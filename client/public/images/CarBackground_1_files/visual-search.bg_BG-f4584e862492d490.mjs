(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14865],{214172:(e,a,l)=>{"use strict";var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="610a35d46510240eb58e262c1909310c";let t=i},727128:(e,a,l)=>{"use strict";var n,i,t;l.r(a),l.d(a,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[t={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},t,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};r.hash="833cd5d58bc1ac105444aa923e882675";let s=r},365402:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"},{args:null,kind:"FragmentSpread",name:"StelaCutouts_pin"}],type:"Pin",abstractKey:null};n.hash="4c094b2f5fd711f63313c83eac8ecfc5";let i=n},604733:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightResultGrid_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};n.hash="0e18466f59f891e9ea12d1c056d9f627";let i=n},646920:(e,a,l)=>{"use strict";var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FollowButton_pin",selections:[{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:n,storageKey:null}],type:"Pin",abstractKey:null};i.hash="cabaa35ed7d59dee006897bf3ef32e3d";let t=i},530118:(e,a,l)=>{"use strict";var n,i,t,r,s,o,d,u,c,g,p,m,h,_,y,f,S,k,x,v,b,P,T,w,F,I,E,A,L,C,K,R,D,j,O,N,M,Z,U,z,H,G,V,B,W,Y,$,Q;l.r(a),l.d(a,{default:()=>X});let q=(n={defaultValue:null,kind:"LocalArgument",name:"isDesktop"},i={defaultValue:null,kind:"LocalArgument",name:"pinId"},t=[{kind:"Variable",name:"pin",variableName:"pinId"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s=[{kind:"Literal",name:"spec",value:"736x"}],g={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},x=[c={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],v=[{kind:"Literal",name:"spec",value:"236x"}],b=[{kind:"Literal",name:"spec",value:"474x"}],P={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},E=[h,T={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},S,r,w={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null}],A=[r],L={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null},C={alias:"productId",args:null,kind:"ScalarField",name:"id",storageKey:null},D={alias:"image236x",args:v,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:R=[{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:K=[d,o,u],storageKey:null},m],storageKey:'additionalImagesPerSpec(spec:"236x")'},j={alias:"image474x",args:b,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:R,storageKey:'additionalImagesPerSpec(spec:"474x")'},N={alias:"image564x",args:O=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:R,storageKey:'additionalImagesPerSpec(spec:"564x")'},M={alias:"image736x",args:s,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:R,storageKey:'additionalImagesPerSpec(spec:"736x")'},Z=[h,T,S,w,F,I],U={alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},G=[o],V={alias:null,args:null,concreteType:"PinAnalyticsStats",kind:"LinkedField",name:"creatorAnalytics",plural:!1,selections:[{alias:null,args:null,concreteType:"CreatorAnalytics",kind:"LinkedField",name:"_30dRealtime",plural:!1,selections:A,storageKey:null}],storageKey:null},B=[w,S],Q=[W={alias:null,args:null,kind:"ScalarField",name:"boardId",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"localPinId",storageKey:null},p,$={alias:null,args:null,kind:"ScalarField",name:"sectionId",storageKey:null},g,_,o],{fragment:{argumentDefinitions:[n,i],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[r,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[i,n],kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"imageSpec_736x",args:s,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[o,d,u,c],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},g,p,{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},c,m,h,{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:[{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[_],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adDestinationUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"followedByMe",storageKey:null},y,{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},o,f,S,{alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[h,S],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"descriptionHtml",storageKey:null},k,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},_,u],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,concreteType:"ImageCrop",kind:"LinkedField",name:"imageCrop",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minY",storageKey:null}],storageKey:null},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:x,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:x,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:v,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:x,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:b,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:x,storageKey:'images(spec:"474x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[c,d,o,u,r],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},P,{alias:null,args:null,kind:"ScalarField",name:"mobileLink",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:E,storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[y,o],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingKlpUrls",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[h,f,y,o,S,r],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"explicitlyFollowedByMe",storageKey:null},T,S,w,I,{alias:null,args:null,kind:"ScalarField",name:"imageLargeUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVerifiedMerchant",storageKey:null},{alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null}],storageKey:null},F,r],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:E,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[k,g,{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:A,storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[r,y,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[y,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:A,storageKey:null}],storageKey:null},L,C,D,j,N,M,{alias:"additionalImageSpec_236x",args:v,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:A,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:"additionalImageSpec_474x",args:b,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:A,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImageSpec_564x",args:O,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:A,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImageSpec_736x",args:s,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:A,storageKey:'additionalImagesPerSpec(spec:"736x")'}],storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[y,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},L,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[y],storageKey:null},C,D,j,N,M,{alias:null,args:null,concreteType:"LabelInfo",kind:"LinkedField",name:"labelInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"labels",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"siteName",storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"displayCookTime",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"creator",plural:!1,selections:Z,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:Z,storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isDeleted",storageKey:null},{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},S,r,{alias:null,args:null,kind:"ScalarField",name:"hasProductPins",storageKey:null},{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"blockType",storageKey:null},{alias:null,args:null,concreteType:"StoryPinVideoMetadata",kind:"LinkedField",name:"video",plural:!1,selections:[U,{alias:null,args:null,concreteType:"StoryPinVideoFormats",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:[d,z,u,o],storageKey:null}],storageKey:null}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalVideoDuration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"staticPageCount",storageKey:null}],storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[h,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:[H,d,u,o,r],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:[r,d,z,o,u],storageKey:null},r,{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:A,storageKey:null}],storageKey:null},S,r,H],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[y,o,S,r,h],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reasonId",storageKey:null},{alias:null,args:null,concreteType:"PinThroughProperties",kind:"LinkedField",name:"throughProperties",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"details",storageKey:null},P,U,{alias:"slotId",args:null,kind:"ScalarField",name:"id",storageKey:null},m,{alias:"imagesSpec_236x",args:v,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:K,storageKey:'images(spec:"236x")'},{alias:"image236x",args:v,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:K,storageKey:'images(spec:"236x")'},{alias:"image474x",args:b,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:K,storageKey:'images(spec:"474x")'},{alias:"image564x",args:O,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:K,storageKey:'images(spec:"564x")'},{alias:"image736x",args:s,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:K,storageKey:'images(spec:"736x")'},r],storageKey:null},S,{alias:"carouselDataId",args:null,kind:"ScalarField",name:"id",storageKey:null},h,r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adMatchReason",storageKey:null},{alias:null,args:null,concreteType:"Interest",kind:"LinkedField",name:"sourceInterest",plural:!1,selections:[y,{alias:null,args:null,kind:"ScalarField",name:"urlName",storageKey:null},S,h],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupDescription",storageKey:null},{alias:null,args:null,concreteType:"AdTargetingAttribution",kind:"LinkedField",name:"adTargetingAttribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"geoPostalCode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"geoRegion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isCustomerListMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingRetargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isActalikeMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEngagementMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isExpandTargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFromGpsLocation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVisitorMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingProspectingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPlPersonaMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedAgeBucket",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedDevice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedGender",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedInterest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedKeyword",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedLocale",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFirstPartyAdPersonalizationEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAdPersonalizationEnabled",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAdvertiserName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAttributionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPromotedPartnership",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"digitalMediaSourceType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"videoStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"AdData",kind:"LinkedField",name:"adData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ceAltImageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collectionGridClickType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dpaCreativeType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:"imageSpec_564x",args:O,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:G,storageKey:'images(spec:"564x")'},{alias:null,args:null,concreteType:"PromotedLeadForm",kind:"LinkedField",name:"promotedLeadForm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"leadFormId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},S,V,{alias:null,args:null,concreteType:"PinTagChipImagesPerSpec",kind:"LinkedField",name:"pinTagsChips",plural:!0,selections:[r,U,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"image",plural:!1,selections:K,storageKey:null},P],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRepin",storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:[w,S,h,F,I,{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},T],storageKey:null},S,r],storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:B,storageKey:null},S],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:B,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viaPinner",plural:!1,selections:B,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppable",storageKey:null},V,{alias:null,args:null,concreteType:"CollectionPin",kind:"LinkedField",name:"collectionPin",plural:!1,selections:[{alias:null,args:null,concreteType:"CollectionPinItem",kind:"LinkedField",name:"itemData",plural:!0,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"pinId",storageKey:null},{alias:null,args:[{kind:"Literal",name:"spec",value:"750x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:[o,u,d],storageKey:'images(spec:"750x")'},P],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ReactionCountModel",kind:"LinkedField",name:"reactionCountsData",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reactionCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reactionType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldOpenInStream",storageKey:null},{alias:"image236x",args:v,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:K,storageKey:'images(spec:"236x")'},{alias:"image474x",args:b,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:K,storageKey:'images(spec:"474x")'},{alias:"image564x",args:O,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:K,storageKey:'images(spec:"564x")'},{alias:"image736x",args:s,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:K,storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},S],storageKey:null},{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:G,storageKey:'images(spec:"60x60")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:G,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"isVideo",storageKey:null},S,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedInfo",plural:!1,selections:[W,Y,o,p,$,g,_,r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"saved",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedCutout",plural:!1,selections:Q,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"selectedItem",plural:!1,selections:Q,storageKey:null}]},{condition:"isDesktop",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null}]}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"949c1d4afddffaaeac8925dcef2b49661a52040fa4a559ab108b9dac921f3baf",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});q.hash="607770115a4a49c823d7c8aed6ca092d";let X=q;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let a=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[a]=e}}}(q.default||q)},660036:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPage_pin"}],type:"Pin",abstractKey:null};n.hash="df8cf9d2521b1a82156cc4ecd7b04884";let i=n},149234:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedPinRep_pin"}],type:"Pin",abstractKey:null};n.hash="34375a91362d60921eb61956e01bf8f5";let i=n},206146:(e,a,l)=>{"use strict";var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:n,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};i.hash="12f77507a9fdec344b44b7e659fa5ac1";let t=i},306569:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};n.hash="d3343cbed0df46adae9a256f0fc6f167";let i=n},761650:(e,a,l)=>{"use strict";var n,i,t,r,s;l.r(a),l.d(a,{default:()=>d});let o={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"RelatedProductsPageQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[t,{args:null,kind:"FragmentSpread",name:"RelatedProductsPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"RelatedProductsPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[t],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[t,s],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},s],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"03eb828de8d2e9a4c8e1d3c0a94f7ea7fe306fd1717cc09995da1518d6549cf1",metadata:{},name:"RelatedProductsPageQuery",operationKind:"query",text:null}};o.hash="0a96a1ee859bcb7fedbf477060a5beb3";let d=o;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let a=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[a]=e}}}(o.default||o)},4738:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPage_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchPageWithPinData_pin"}],type:"Pin",abstractKey:null};n.hash="91d05676e413b7b47653c2f8fa609093";let i=n},441089:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};n.hash="395dd0c72ba79e629fa9cf482a4b73d6";let i=n},282813:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaCutout_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};n.hash="0b66eea622c037ef845cce3aa4cd2d46";let i=n},431696:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaCutouts_pin",selections:[{args:null,kind:"FragmentSpread",name:"StelaCutout_pin"}],type:"Pin",abstractKey:null};n.hash="aa969bf48facf77e13c5fc82deaa909e";let i=n},572394:(e,a,l)=>{"use strict";var n,i,t,r,s,o,d,u,c,g,p,m,h,_,y,f,S,k,x,v;l.r(a),l.d(a,{default:()=>P});let b=(n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},c=[o={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],g=[u,d,o],p={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},h=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],y={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:_=[t],storageKey:null},{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[t,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},r,{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},s],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"orig")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:g,storageKey:'images(spec:"736x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:g,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:g,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},r,s,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[p,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[m,{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:h,storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:h,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[t,p,y,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:_,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[p,y,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[f={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},k,t],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},m,{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:v=[d],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:v,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:v,storageKey:'images(spec:"170x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:v,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[x,p,{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},d,k],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[x,S,{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},f,k],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},k],storageKey:null},k],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"6cdf0568ef4791ef0418ee1fe441fb842acf50d89807fd6a9eb18334133da65a",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});b.hash="3904efe87290878b8559da8f51b4bd16";let P=b;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let a=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[a]=e}}}(b.default||b)},925517:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPage_pin"}],type:"Pin",abstractKey:null};n.hash="01839fc3bcd9cdaf206873364167d157";let i=n},407303:(e,a,l)=>{"use strict";var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardBody_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};i.hash="80808af4cef3901a9ce9bec48f33c09b";let t=i},574554:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchProductFeedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};n.hash="b69967adff40ae068eb5d3aad8f106f3";let i=n},941845:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};n.hash="9d37ca13b584492c1fba958c00317b73";let i=n},187962:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightResultGrid_pin"}],type:"Pin",abstractKey:null};n.hash="ecc8a2a34b852db42ada7b81f966ef5a";let i=n},383855:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchProductFeedResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchUnifiedResourceContainer_pin"}],type:"Pin",abstractKey:null};n.hash="559409b5cdf594ceadec1100a8e980f8";let i=n},376194:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchUnifiedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};n.hash="7074039637fc6e2b8dd0bdad128d63c8";let i=n},478976:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInitialCropArea_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};n.hash="120ad104e33b94ab10be1098dc10d74b";let i=n},682230:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetViewLog_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};n.hash="4d2dba5ab4f3957f62edf10d66e5a060";let i=n},312296:(e,a,l)=>{"use strict";var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:n=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:n,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};i.hash="01a93671cde480baa2cfd8b781589acd";let t=i},373462:(e,a,l)=>{"use strict";var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};i.hash="b7ea441f2c20a68b323088ebe3847835";let t=i},50165:(e,a,l)=>{"use strict";l.d(a,{$:()=>c,r:()=>g});var n=l(667294),i=l(498490),t=l(989820),r=l(297728),s=l(730212),o=l(961754),d=l(785893);let{Provider:u,useHook:c}=(0,i.Z)("PinRep");function g({children:e}){let{isAuthenticated:a}=(0,s.B)(),{checkExperiment:l}=(0,r.F)(),{experience:i}=(0,t.Ow)(1000069),[c,g]=(0,n.useState)(!0),[p,m]=(0,n.useState)(!1),[h,_]=(0,n.useState)(!1),[y,f]=(0,n.useState)(null),[S,k]=(0,n.useState)(null),x=(0,t.oS)(1000069),{anyEnabled:v}=l("ap_bmi_custom_activation_nux_revamp_mweb_v2",{dangerouslySkipActivation:!0}),b=(0,o.Z)(a&&v?{name:"UserStateResource",options:{state:"QUICK_SAVES_BOARD_ID"}}:null).data;(0,n.useEffect)(()=>{if(!a){g(!1);return}i&&(!i||i?.experience_id===500417&&i?.display_data.hide_footer)?x.viewExperience(1000069,500417):g(!1),m(!0)},[i]);let P=(0,n.useMemo)(()=>({hasMetSaveRequirementOnUseCaseFeed:h,hasSimplifiedPinGridExpLoaded:p,hidePinRepFooter:c,quickSaveBoardId:b,setHasMetSaveRequirementOnUseCaseFeed:_,setUseCaseFeedOriginalPinId:k,setUseCaseFeedRepinId:f,useCaseFeedOriginalPinId:S,useCaseFeedRepinId:y}),[h,p,c,b,_,k,f,S,y]);return(0,d.jsx)(u,{value:P,children:e})}},767552:(e,a,l)=>{"use strict";l.d(a,{Z:()=>i});var n=l(868808);function i(e,a,l){let i=(0,n.mB)(e.search),t=parseFloat(i.x??""),r=parseFloat(i.y??""),s=parseFloat(i.w??""),o=parseFloat(i.h??"");return function(...e){return e.every(e=>e>=0&&e<=1)}(t,r,s,o)&&a&&l?{x:Math.floor(t*a),y:Math.floor(r*l),w:Math.floor(s*a),h:Math.floor(o*l)}:!function(...e){return e.every(Number.isInteger)}(t,r,s,o)?null:{x:t,y:r,w:s,h:o}}},945034:(e,a,l)=>{"use strict";l.d(a,{Z:()=>g});var n=l(667294),i=l(883119),t=l(573706),r=l(144326),s=l(829413),o=l(235838),d=l(969119),u=l(682661),c=l(785893);function g({alignStart:e,commerceData:a,isFilterOpened:l,isProductFeed:g,searchId:p,viewParameter:m,viewType:h,visualSearchFlashlightUnifiedResource:_}){let y=(0,r.ZP)(),{logContextEvent:f}=(0,t.v)(),S=(0,n.useRef)(null),k=(0,n.useRef)(!1);(0,n.useEffect)(()=>{S.current?.handleResize()},[l]),(0,d.Z)(()=>{let e=(0,o.Z)(()=>{k.current||(f({event_type:110,view_type:h,view_parameter:m}),k.current=!0)},1e3);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)});let{data:x,isFetching:v,fetchMore:b,isAtEnd:P}=_,T=(x?.results||[]).filter(e=>"pin"===e.type);return(0,c.jsxs)(i.xu,{"data-test-id":"visual-search-feed",children:[(0,c.jsx)(i.xu,{children:(0,c.jsx)(s.Z,{isAtEndOfFeed:P,itemCount:(T||[]).length,children:(0,c.jsx)(i.Rk,{ref:S,align:e?"start":"center",items:T||[],loadItems:b,minCols:1,renderItem:({data:e,itemIdx:l})=>"pin"===e.type?(0,c.jsx)(u.ZP,{auxData:{commerce_data:a},componentType:0,duploQueryRef:null,pin:e,pinId:e.id,slotIndex:l,surface:g?"ShoppingDynamicHeightGrid":"SearchItem",viewData:{search_identifier:p},viewParameter:m,viewType:h}):null,scrollContainer:()=>window})})}),(0,c.jsx)(i.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,c.jsx)(i.$j,{accessibilityLabel:y.bt("     ", "Loading visual search results", "visualSearch.spinner.label", undefined, true),show:v})})]})}},339842:(e,a,l)=>{"use strict";function n(e){let{category_filters:a,domain_filters:l,price_filters:n}=e||{};return!!a||!!l||!!n}l.d(a,{Z:()=>n})},934209:(e,a,l)=>{"use strict";l.d(a,{Z:()=>d});var n=l(667294),i=l(339842),t=l(213512),r=l(135296),s=l(961754),o=l(296209);function d({resourceOptions:e,setFlashlightSearchId:a}){let[l,d]=(0,n.useState)(),[u,c]=(0,n.useState)(""),[g,p]=(0,n.useState)(),{cachedOneBarModules:m,setCachedOneBarModules:h}=(0,t.t)(),_=(0,s.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:e}:null);return(0,n.useEffect)(()=>{let{auxData:e}=_,a=e?.metadata?.one_bar_modules;a&&!m&&h((0,r.Z)(o.Z,!0)(a))},[_,h,m]),(0,n.useEffect)(()=>{let{data:e}=_,l=e?.search_identifier;l&&(a?a(l):c(l)),d(e)},[a,_]),(0,n.useEffect)(()=>{let{data:e}=_,a=e?.search_identifier,n=l?.search_identifier;!e||a&&n&&a===n||(0,i.Z)(l)||!(0,i.Z)(e)||p({category_filters:e.category_filters,domain_filters:e.domain_filters,price_filters:e.price_filters})},[g,l,_]),{filters:g,oneBarModules:m,searchId:u,setSearchId:c,visualSearchFlashlightUnifiedResource:_}}},39929:(e,a,l)=>{"use strict";l.d(a,{Z:()=>_});var n=l(667294),i=l(883119),t=l(785893);function r({isTopRow:e,image:a}){return(0,t.jsxs)(i.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[(0,t.jsx)(i.Ee,{alt:a.alt||"",fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,src:a.url??""}),!!a.price&&(0,t.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:a.price})]})}var s=l(573706),o=l(559028),d=l(788388),u=l(945960),c=l(648089),g=l(596530),p=l(96405);let m={container:{borderRadius:`${u.Oc}px ${u.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},h=({images:e,firstImageIndex:a})=>{let l=a+1,n=a+2;return(0,t.jsxs)(i.xu,{overflow:"hidden",rounding:4,children:[(0,t.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:m.content},children:e.at(a)?(0,t.jsx)(r,{image:e[a],isTopRow:!0}):null}),e.length>n?(0,t.jsxs)(i.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,t.jsx)(r,{image:e[l]}),(0,t.jsx)(r,{image:e[n]})]}):null]})};function _({dangerouslySetActionUrl:e,query:a,story:l,slotIndex:r}){let u,_,y,f,S;let{logContextEvent:k}=(0,s.v)(),{action:x,id:v,objects:b,story_type:P,subtitle:T}=l,{text:w,url:F}=x||{},[I,E]=(0,n.useState)(!1),A=(0,n.useCallback)(()=>E(!0),[E]),L=(0,n.useCallback)(()=>E(!1),[E]),C=(b||[]).reduce((e,a)=>"pin"!==a.type?e:[...e,{domain:a.domain,image:{alt:a.title||a.description,height:a.images?.["474x"]?.height,url:a.images?.["474x"]?.url,width:a.images?.["474x"]?.width,price:(a.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),K=(C[0]||{}).domain||void 0;["search_product_collage_story","shop_article_story"].includes(P)?(u=2,_=43,y={story_id:v,story_type:P,entered_query:a}):"shop_brand_story"===P||"shop_brand_affinity_story"===P?(u=1,_=92,K&&(y={story_type:P,commerce_data:JSON.stringify({domain:K})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(P)?(u=72,_=3050):"related_domain_collage"===P?(u=72,_=3455):"related_products_collage"===P&&(u=1,_=3177);let R=()=>k({event_type:101,element:372,component:200,view_type:u,view_parameter:_,aux_data:{story_type:P}}),D=T?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(P)&&x){let e=x.user;f=e&&(e.image_medium_url||e.image_large_url),S=e&&e.full_name}let j=e||F;if(!j)return null;let O=(0,c.Z)({url:j})?"nofollow":"none";return(0,t.jsx)(d.F,{componentType:200,contextLogData:y||{},impressionType:"Story",loggingId:P,slotIndex:r,viewParameter:_,viewType:u,children:({impressionTrackerRef:e})=>(0,t.jsx)(i.xu,{ref:e,children:(0,t.jsx)(i.Tg,{href:j,onTap:R,rel:O,children:(0,t.jsxs)(i.xu,{dangerouslySetInlineStyle:{__style:m.container},onMouseEnter:A,onMouseLeave:L,overflow:"hidden",position:"relative",children:[(0,t.jsx)(h,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(P)?1:0,images:C.map(({image:e})=>e)}),(0,t.jsx)(i.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:D,rounding:"pill",children:(0,t.jsxs)(i.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[T?(0,t.jsx)(i.xu,{marginBottom:1,children:(0,t.jsx)(i.xv,{align:"start",color:"subtle",children:T.format})}):null,(0,t.jsx)(i.xv,{align:"start",weight:"bold",children:w})]})}),S&&f&&(0,t.jsx)(i.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,t.jsx)(o.qE,{name:S,outline:!0,size:"md",src:f})}),(0,t.jsx)(g.Z,{visibility:I?"visible":"none",children:(0,t.jsx)(p.Z,{additionalStyles:m.visualOverlay})})]})})})})}},213512:(e,a,l)=>{"use strict";l.d(a,{p:()=>o,t:()=>s});var n=l(667294),i=l(498490),t=l(785893);let{Provider:r,useHook:s}=(0,i.Z)("VisualShopContext");function o({children:e}){let[a,l]=(0,n.useState)(),i=(0,n.useRef)(0),s=(0,n.useRef)("");return(0,t.jsx)(r,{value:{cachedOneBarModules:a,setCachedOneBarModules:l,imageContainerScrollTop:i,imageContainerScrollTopForPinId:s},children:e})}},200017:(e,a,l)=>{"use strict";l.d(a,{Z:()=>E});var n,i,t,r=l(667294);l(167912);var s=l(616550),o=l(284882),d=l(414504),u=l(47848),c=l(297728),g=l(961754),p=l(665992),m=l(122882),h=l(883119),_=l(573706),y=l(488379),f=l(691566);let S=(e,a,l)=>{let n=0;for(let i=0;i<e.length-1;i+=1){let t=e[i],r=e[i+1];if(t&&r){let e=(r.x-t.x)*a,i=(r.y-t.y)*l;n+=Math.sqrt(e*e+i*i)}}if(e.length>0){let i=e[0],t=e[e.length-1];if(i&&t){let e=(i.x-t.x)*a,r=(i.y-t.y)*l;n+=Math.sqrt(e*e+r*r)}}return n};function k({contour:e,context:a,scaledX:l,scaledY:n}){a.beginPath(),e.points.forEach((e,i)=>{if(e){let t=e.x*l,r=e.y*n;0===i?a.moveTo(t,r):a.lineTo(t,r)}})}var x=l(425423),v=l(785893);let b=void 0!==n?n:n=l(282813),P=(e,a,l=5)=>["h","w","x","y"].every(n=>Math.abs(e[n]-a[n])<=l);function T({handleMouseLeave:e,hoveredCutoutId:a,id:l,isHidden:n,maskBounds:i,pinKey:t,pinImageHeight:o,pinImageHovered:d,pinImageWidth:g,requestParams:T,surfaceType:w,trafficSource:F,contours:I,scaledX:E,scaledY:A,scaledWidth:L,scaledHeight:C}){let K=(0,u.Z)(b,t),{logContextEvent:R}=(0,_.v)(),D=(0,s.k6)(),j=(0,s.TH)(),{isHoveringOnCropperEdges:O,scaledValues:N,hasAnimatedCutoutsOnLand:M,setHasAnimatedCutoutsOnLand:Z,setSelectedId:U,selectedId:z,cropArea:H,hasLoggedRender:G,setHasLoggedRender:V}=(0,x.Z)(),{checkExperiment:B}=(0,c.F)(),W=["enabled_trace","employees"].includes(B("web_cutouts").group),Y=j.pathname.includes("visual-search"),$=(0,r.useRef)(null),Q=(0,r.useRef)(null),q=(0,r.useRef)(null),[X,J]=(0,r.useState)(0),[ee,ea]=(0,r.useState)(!1),[el,en]=(0,r.useState)(0),[ei,et]=(0,r.useState)(!1),{xRatio:er,yRatio:es,wRatio:eo,hRatio:ed}=(0,r.useMemo)(()=>{let[e,a]=i[0],[l,n]=i[1];return{xRatio:e,yRatio:a,wRatio:l,hRatio:n}},[i]),eu=(0,r.useMemo)(()=>({x:er*g,y:es*o}),[er,es,g,o]),{getNormalizedPinImage:ec}=(0,y.Z)({pinKey:K,maxWidth:f.RZ}),{height:eg,width:ep}=ec();(0,r.useEffect)(()=>{N&&N[l]&&P((0,p.Z)({cropArea:{x:N[l].xRatio,y:N[l].yRatio,w:N[l].wRatio,h:N[l].hRatio},scaledWidth:ep,scaledHeight:eg}),H)&&U?.(l)},[N,l,H,U,eg,ep]),(0,r.useEffect)(()=>{G||(R({event_type:120,element:14154,view_type:72,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}}),V?.(!0))},[G,R,V]),(0,r.useEffect)(()=>{$.current&&($.current.width=L,$.current.height=C,Q.current=new(window.OffscreenCanvas||window.HTMLCanvasElement)(L,C))},[L,C]);let em=(0,r.useCallback)(()=>{et(!0)},[]);(0,r.useEffect)(()=>{let e=$.current;return e?.addEventListener("transitionend",em),()=>{e?.removeEventListener("transitionend",em)}}),(0,r.useEffect)(()=>{if(!$.current||!Q.current||!E||!A)return;let e=()=>{if(!$.current||!Q.current)return;let e=$.current.getContext("2d"),i=Q.current.getContext("2d");e&&i&&$.current&&Q.current&&E&&A&&(function({contours:e,context:a,hasAnimatedCutoutsOnLand:l,hoveredCutoutId:n,id:i,isHidden:t,scaledX:r,scaledY:s,setTraceProgress:o,setHasAnimatedCutoutsOnLand:d,style:u,traceProgress:c,selectedId:g}){if(a.clearRect(0,0,a.canvas.width,a.canvas.height),!e||0===e.length||g===n&&n===i||g===i)return;let p={trace:{strokeStyle:"#fff",lineWidth:2},outline:{strokeStyle:"#fff",lineWidth:3}},m=t&&n===i,h=!t||m;if("trace"===u&&void 0!==c){let t=c,g=e[0].points.length;if(l){if(m||n===i){o(t=(t+900/S(e[0].points,r,s)*3.2/1e3)%1);let l=Math.floor(.33*g),n=Math.floor(g*t),i=(n-l+g)%g;e.map(e=>({...e,points:i<n?e.points.slice(i,n):e.points.slice(i).concat(e.points.slice(0,n))})).forEach(e=>{e.points.length>1&&(a.strokeStyle=p[u].strokeStyle,k({contour:e,context:a,scaledX:r,scaledY:s}),h&&(a.lineWidth=p[u].lineWidth,a.stroke()))})}}else{let l,n;if(o(t+=t<=1?.0032:.009600000000000001),t>=2){o(1),d?.(!0);return}let i=Math.floor(.33*g);t<=1?n=((l=Math.floor(g*t))-i+g)%g:(l=g,n=Math.floor(g-i+i*(t-1))),e.map(e=>{let a=[];return a=n<l?e.points.slice(n,l):e.points.slice(n).concat(e.points.slice(0,l)),{...e,points:a}}).forEach(e=>{e.points.length>1&&(a.strokeStyle=p[u].strokeStyle,k({contour:e,context:a,scaledX:r,scaledY:s}),h&&(a.lineWidth=p[u].lineWidth,a.stroke()))})}}else e.forEach(e=>{k({contour:e,context:a,scaledX:r,scaledY:s}),h&&(a.strokeStyle=p[u].strokeStyle,a.lineWidth=p[u].lineWidth,a.stroke(),n===i&&(a.save(),a.fillStyle="rgba(255, 255, 255, 0.25)",a.fill(),a.restore()))})}({contours:I,context:i,scaledX:E,scaledY:A,id:l,isHidden:n,hoveredCutoutId:a,opacity:X,setTraceProgress:en,hasAnimatedCutoutsOnLand:M,setHasAnimatedCutoutsOnLand:Z,style:W?"trace":"outline",traceProgress:W?el:void 0,selectedId:z}),e.clearRect(0,0,$.current.width,$.current.height),e.drawImage(Q.current,0,0))};return W?(!ei||d||n&&l===a)&&(q.current=requestAnimationFrame(e)):e(),()=>{q.current&&(cancelAnimationFrame(q.current),q.current=null)}},[I,ei,X,E,A,M,a,l,n,Y,W,d,Z,z,el]),(0,r.useEffect)(()=>{if(d)ea(!0),J(1);else if(ee)J(0);else{J(1);let e=setTimeout(()=>{ea(!1),J(0)},3e3);return()=>clearTimeout(e)}},[d,ee,J]);let eh=(0,r.useCallback)(()=>{if(O||!a||!N?.[a])return;let e=(0,p.Z)({cropArea:{x:N[a].xRatio,y:N[a].yRatio,w:N[a].wRatio,h:N[a].hRatio},scaledWidth:ep,scaledHeight:eg}),l=(0,m.Z)({cropArea:e,cropSource:9,requestParams:T,surfaceType:w,trafficSource:F});if(l!==window.location.search){R({event_type:101,element:14154,view_type:72,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}});let e=`${window.location.pathname}${Y?"":"visual-search/"}${l}`;Y?D.replace(e):D.push(e)}},[N,a,F,D,T,w,R,O,Y,eg,ep]);return(0,v.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{top:eu.y,left:eu.x}},height:o*ed,position:"absolute",width:g*eo,children:(0,v.jsx)("canvas",{ref:$,onMouseLeave:e,onMouseUp:eh,style:{pointerEvents:O?"none":"auto",cursor:a?"pointer":"auto",opacity:Y||d?1:X,transition:d||ee||Y?"none":"opacity 2s linear 1s"}})})}let w=void 0!==i?i:i=l(431696);function F({cutoutsData:e,height:a,pinKey:n,pinImageHovered:i,surfaceType:t,trafficSource:s,width:o}){let d=(0,u.Z)(w,n),{checkExperiment:g}=(0,c.F)(),[p,m]=(0,r.useState)(null),{cutoutContours:_,setCutoutContours:y,scaledValues:f,setScaledValues:S}=(0,x.Z)(),k=(0,r.useCallback)(async(e,a,n,i,t,r,s,o)=>{let d=await l.e(18893).then(l.bind(l,618893)),u=await l.e(69670).then(l.bind(l,469670)),{ContourTracer:c}=d;await u.default();let g=new c,p=await createImageBitmap(new Blob([Uint8Array.from(atob(a),e=>e.charCodeAt(0))],{type:"image/png"})),m=g.trace(p,{useAlpha:!1,threshold:80}),h=n*t,_=i*r;y?.(a=>({...a,[e]:m})),S?.(a=>({...a,[e]:{scaledX:h/p.width,scaledY:_/p.height,scaledWidth:h,scaledHeight:_,xRatio:s,yRatio:o,hRatio:r,wRatio:t}}))},[y,S]);(0,r.useEffect)(()=>{e?.bitmap_masks&&e.bitmap_masks.forEach(e=>{let{id:l,mask_image:n,mask_bounds:i}=e;if(!l||!n||!i?.[0]||!i?.[1])return;let[t,r]=i[1],[s,d]=i[0];[t,r,s,d].every(e=>void 0!==e)&&k(l,n,o,a,t,r,s,d)})},[e,o,a,k]);let b=(0,r.useMemo)(()=>{let e={};return _&&Object.entries(_).forEach(([a,l])=>{l&&(e[a]=l.map(e=>{let a=e.points.map(e=>e.x),l=e.points.map(e=>e.y);return{minX:Math.min(...a),minY:Math.min(...l),maxX:Math.max(...a),maxY:Math.max(...l)}}))}),e},[_]);return g("web_cutouts").anyEnabled||_&&!(Object.keys(_).length<1)?(0,v.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},height:a,onMouseLeave:()=>m(null),onMouseMove:l=>{let n=l.currentTarget.getBoundingClientRect(),i=l.clientX-n.left,t=l.clientY-n.top,r=null;for(let l in _){let n=_[l],s=f?.[l];if(!s||!n)return;let d=e?.bitmap_masks.find(e=>e.id===l);if(!d?.mask_bounds)return;let[u,c]=d.mask_bounds[0]??[0,0],{scaledX:g,scaledY:p}=s,m=(i-u*o)/g,h=(t-c*a)/p;if(n.some((e,a)=>{let n=b[l]?.[a];return n&&m>=n.minX&&m<=n.maxX&&h>=n.minY&&h<=n.maxY&&function(e,a){let{x:l,y:n}=e,i=!1,t=0,r=a.length-1;for(;t<a.length;){let{x:e,y:s}=a[t],{x:o,y:d}=a[r];s>n!=d>n&&l<(o-e)*(n-s)/(d-s)+e&&(i=!i),r=t,t+=1}return i}({x:m,y:h},e.points)})){r=l;break}}r!==p&&m(r)},position:"relative",width:o,children:_&&Object.entries(_).map(([l,n])=>{if(!n||0===n.length)return null;let r=e?.bitmap_masks.find(e=>e.id===l);if(!r)return null;let{mask_bounds:u,is_hidden:c}=r;if(!u||2!==u.length||!f[l])return null;let{scaledX:g,scaledY:h,scaledWidth:_,scaledHeight:y}=f[l];return(0,v.jsx)(T,{contours:n,handleMouseLeave:()=>m(null),hoveredCutoutId:p,id:l,isHidden:!!c,maskBounds:u,pinImageHeight:a,pinImageHovered:i,pinImageWidth:o,pinKey:d,scaledHeight:y,scaledWidth:_,scaledX:g,scaledY:h,surfaceType:t,trafficSource:s},l)})}):null}let I=void 0!==t?t:t=l(365402);function E({customCropper:e,imageSignature:a,imageSize:l,initialCropArea:n,pinId:i,pinKey:t,requestParams:h,showAnimation:_,surfaceType:y,trafficSource:f,viewParameter:S,viewType:k}){let{checkExperiment:x}=(0,c.F)(),b=(0,u.Z)(I,t),P=(0,s.k6)(),T=x("web_cutouts").anyEnabled,{data:w}=(0,g.Z)(T?{name:"ApiResource",options:{url:`/v3/pins/${i}/segmentation/sam/`,data:{client:"visual_cutout",cleanup_masks:!0}}}:null),[E,A]=(0,r.useState)(void 0),[L,C]=(0,r.useState)(!1),[K,R]=(0,r.useState)({w:0,h:0,x:0,y:0}),[D,j]=(0,r.useState)(0),O=(0,r.useMemo)(()=>(b.visualObjects??[]).filter(e=>e.isStela)||[],[b.visualObjects]);(0,r.useEffect)(()=>{j(O.findIndex(e=>{var a;let{x:i,y:t,w:r,h:s}=e;return a=(0,p.Z)({cropArea:{x:i,y:t,w:r,h:s},scaledWidth:l.width??0,scaledHeight:l.height??0}),4>=Object.keys(n).reduce((e,l)=>e+Math.abs(n[l]-a[l]),0)}))},[l,n,O]);let N=O&&!!O.length;(0,r.useEffect)(()=>{void 0===E&&(T?N&&w&&w?.bitmap_masks&&A(!!w.bitmap_masks):A(!1))},[T,w,N,E]);let M=({origCrop:e,cropSource:a,title:l})=>{let n=window.location.search,i=(0,m.Z)({cropArea:e,cropSource:a??6,requestParams:h,surfaceType:y,title:l,trafficSource:f});i!==n&&P.replace({pathname:window.location.pathname,search:i,state:{internalNavigation:!0}})};return(0,v.jsxs)(o.Z,{imageSize:l,initialCropArea:n,onChange:e??M,previewCropArea:K,showPreviewArea:!1,viewParameter:S,children:[!1===E&&N&&(0,v.jsx)(d.Z,{currentSpotlightIdx:D,handleSpotlightClick:a=>{let n=O[a],{x:i,y:t,w:r,h:s}=n,o={origCrop:(0,p.Z)({cropArea:{x:i,y:t,w:r,h:s},scaledWidth:l.width??0,scaledHeight:l.height??0}),cropSource:n.isStela?4:1,trafficSource:f,title:n.title||""};e?e(o):M(o)},handleSpotlightHover:e=>{if(e!==D){C(!0);let{x:a,y:n,w:i,h:t}=O[e];R((0,p.Z)({cropArea:{x:a,y:n,w:i,h:t},scaledWidth:l.width??0,scaledHeight:l.height??0}))}},handleSpotlightUnhover:()=>{C(!1)},imageSignature:a,imageSize:l,pinKey:b,showAnimation:_,viewParameter:S,viewType:k}),E&&!!w&&l.height&&l.width&&(0,v.jsx)(F,{cutoutsData:w,height:l.height,pinKey:b,surfaceType:y,width:l.width})]},JSON.stringify(n))}},945960:(e,a,l)=>{"use strict";l.d(a,{Dv:()=>t,Ml:()=>r,Oc:()=>n,mv:()=>i});let n=16,i=4,t={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},r=120},431705:(e,a,l)=>{"use strict";l.d(a,{$N:()=>m,Cu:()=>_,GY:()=>u,MZ:()=>s,NR:()=>c,bC:()=>h,fm:()=>n,id:()=>t,kM:()=>r,q6:()=>i,qp:()=>d,uV:()=>g,ug:()=>p,xL:()=>o});let n={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",BULK_ID_LIBRARY:"BULK_ID_LIBRARY",RESOURCES:"RESOURCES"},i={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},t={INTEREST:"INTEREST",DEVICE:"DEVICE",LANGUAGE:"LANGUAGE",LOCATION:"LOCATION",LOCATION_COUNTRY:"LOCATION_COUNTRY",LOCATION_METRO:"LOCATION_METRO",LOCATION_REGION:"LOCATION_REGION",AUDIENCE:"AUDIENCE",TARGETING_TEMPLATE:"TARGETING_TEMPLATE",CONVERSION_TAG:"CONVERSION_TAG"},r={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},s={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch",HIGHTOUCH:"Hightouch",EULERIAN:"Eulerian",ADOBE_CDP:"Adobe Real-Time CDP",ADOBE_COMMERCE:"Adobe Commerce",SALESFORCE_COMMERCE_CLOUD:"Salesforce Commerce Cloud",PINTEREST_CAPI_CONNECT:"Pinterest CAPI Connect"},o={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},d={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API",NOCODE_CONVERSIONS_API_SETUP_FLOW:"NOCODE_CONVERSIONS_API_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW_CAPI_TAB:"PINTEREST_EVENTS_OVERVIEW_CAPI_TAB",PINTEREST_EVENT_HISTORY_CAPI_TAB:"PINTEREST_EVENT_HISTORY_CAPI_TAB"},u={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},c={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",HOSTNAME:"hostname",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},g="604800",p="86400",m={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"},h="click",_="view"},829196:(e,a,l)=>{"use strict";l.d(a,{YS:()=>s,eF:()=>o,m_:()=>r});var n=l(431705),i=l(194093),t=l(415787);function r(e,a,l,i,r){let s=new URLSearchParams,o=a.reduce((e,a)=>{if(null!=a){let l=function(e){let a;try{a=decodeURIComponent(e)}catch(l){a=e}a.startsWith("http")?a.startsWith("http://")&&(a=a.replace("http://","https://")):a="https://"+a;try{return new URL(a).origin}catch(n){let l=a.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(l&&l.length>1)return l[1];return e}}(a);return e.add(l)}return e},new Set);s.append(n.NR.SOURCE_EVENT_ID,e??"0"),s.append(n.NR.DESTINATION,JSON.stringify([...o])),s.append(n.NR.EXPIRY,l?n.uV:n.ug),s.append(n.NR.PRIORITY,l?n.NR.CLICK_PRIORITY:n.NR.VIEW_PRIORITY),r&&s.append(n.NR.ADVERTISER_ID,r),i&&s.append(n.NR.CAMPAIGN_ID,i),s.append(n.NR.SOURCE_EVENT_TYPE,l?n.bC:n.Cu);try{let{hostname:e}=new URL(window.location.href);"www.pinterest.com"!==e&&s.append(n.NR.HOSTNAME,e)}catch(e){(0,t.nP)("webapp.arapi.generateARASourceEventURL",{sampleRate:.1,tags:{status:"failed",href:window&&window.location&&window.location.href}})}return"https://www.pinterest.com/attribution_source/?"+s.toString()}async function s(e,a,l,n,s,o,d,u,c){let g;let{appType:p,osType:m}=o||{},h="",_="";if(["Pin","pinImpressions"].includes(e)&&a&&(n||u||c)){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:p,osType:m}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting")){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:p,osType:m}});return}h=r(l,[n,u,c],!1,s,d);try{_=new URL(window.location.href).hostname}catch(e){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"hostname_parse_failed",href:window&&window.location&&window.location.href}})}if(_&&"www.pinterest.com"!==_)document.createElement("img").setAttribute("attributionsrc",h),(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"international",appType:p,osType:m,hostname:_}});else if(!(g=await window.fetch(h,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}})).ok)throw Error("server request failed.");(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:p,osType:m}})}catch(e){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:(0,i.Z)(e,"name"),message:(0,i.Z)(e,"message"),appType:p,osType:m,hostname:_,responseStatus:g&&g.status}})}}else(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:p,osType:m}})}function o(e){if(e){let a=e.toLowerCase();if(a.includes("windows"))return"windows xp"===a?1:"windows vista"===a?2:"windows 7"===a?3:"windows 8"===a?4:12;if(a.includes("mac os"))return 5;if(a.includes("android"))return 7;if(a.includes("ios"))return 6;if(a.includes("ubuntu"))return 8;if(a.includes("chromium os"))return 13}return 0}},934980:(e,a,l)=>{"use strict";l.d(a,{CC:()=>i,Ll:()=>r,XF:()=>t});let n=(e,a,l)=>({x:Math.floor(e*Math.cos(l)),y:Math.floor(a*Math.sin(l))}),i=(e,a)=>n(a/2,e/2,2*Math.random()*Math.PI),t=(e,a)=>Math.floor(Math.random()*(a-e+1))+e,r=e=>["@-webkit-keyframes","@keyframes"].map(a=>e.map(e=>a+" "+e).join("\n")).join("\n")},118755:(e,a,l)=>{"use strict";l.d(a,{G6:()=>t,i7:()=>r,oi:()=>n,u$:()=>i,un:()=>o,vU:()=>s,w1:()=>d});let n=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),i=e=>e?e.includes("Chrome")?n.CHROME:e.includes("Safari")?n.SAFARI:e.includes("Firefox")?n.FIREFOX:e.includes("Opera")?n.OPERA:e.includes("IE")?n.IE:e.includes("Edge")?n.EDGE:n.OTHER:n.OTHER;function t(e){return i(e)===n.SAFARI}function r(e){return i(e)===n.CHROME}function s(e){return i(e)===n.FIREFOX}function o(e){return i(e)===n.EDGE}function d(e){return i(e)===n.IE}},619348:(e,a,l)=>{"use strict";l.d(a,{DW:()=>t,I:()=>i,oo:()=>n,zI:()=>r});let n=e=>{let a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a&&[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]},i=.18,t=(e,a,l)=>.2126*(e/255)**2.2+.7151*(a/255)**2.2+.0721*(l/255)**2.2,r=e=>{let a=e.replace("#",""),l=parseInt(a.substr(0,2),16);return(299*l+587*parseInt(a.substr(2,2),16)+114*parseInt(a.substr(4,2),16))/1e3<155}},953059:(e,a,l)=>{"use strict";l.d(a,{Z:()=>r,k:()=>n.kH});var n=l(557085),i=l(730212),t=l(785893);let r=({dateFormatType:e,useUTC:a=!0,value:l})=>(0,t.jsx)(i.LC,{children:i=>(0,n.ZP)(i.locale,l,e,a)})},557085:(e,a,l)=>{"use strict";l.d(a,{A5:()=>t,ZP:()=>r,kH:()=>n});let n={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:"year_short_month_day_time_timezone",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},i=function(e){switch(e){case n.YEAR:return{year:"numeric"};case n.LONG:return{year:"numeric",month:"long",day:"numeric"};case n.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case n.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case n.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case n.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case n.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case n.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.MONTH_DAY:return{month:"long",day:"numeric"};case n.SHORT_MONTH:return{month:"short"};case n.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case n.DAY:return{day:"numeric"};case n.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case n.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case n.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case n.YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:return{month:"short",year:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.TIME:return{hour:"numeric",minute:"2-digit"};case n.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function t(){return -1!==Intl.DateTimeFormat.toString().indexOf("[native code]")}function r(e,a,l,n=!0){let s=i(l);return n&&(s.timeZone="UTC"),t()||(s.calendar="gregory"),new Intl.DateTimeFormat(e,s).format(a)}},700198:(e,a,l)=>{"use strict";l.d(a,{Z:()=>s});var n=l(667294),i=l(973935);function t(e,a,l){var n;return(a="symbol"==typeof(n=function(e,a){if("object"!=typeof e||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var n=l.call(e,a||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?n:String(n))in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}class r extends n.Component{constructor(...e){super(...e),t(this,"observer",null),t(this,"handleVisibilityChanged",(e,a)=>{this.props.onVisibilityChange(e,a)})}componentDidMount(){let e=i.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return n.Children.only(this.props.children)}}let s=r},830997:(e,a,l)=>{"use strict";l.d(a,{g:()=>r,t:()=>t});var n=l(667294);let i=(0,n.createContext)(null),t=i.Provider,r=()=>(0,n.useContext)(i)},887279:(e,a,l)=>{"use strict";l.d(a,{Z:()=>i});var n=l(785893);let i=(0,n.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})})},576449:(e,a,l)=>{"use strict";l.d(a,{Z:()=>o});var n=l(667294),i=l(883119),t=l(410150);let r=(0,n.createContext)();var s=l(785893);function o(e){(0,n.useContext)(r),(0,t.ZP)();let{alt:a,color:l,children:o,crossOrigin:d,decoding:u,elementTiming:c,fetchPriority:g,fit:p,loading:m,naturalHeight:h,naturalWidth:_,onError:y,onLoad:f,role:S,sizes:k,src:x,srcSet:v,_fixCompletedOnLoad:b}=e;return(0,s.jsx)(i.Ee,{_fixCompletedOnLoad:b,alt:a,color:l,crossOrigin:d,decoding:u,elementTiming:c,fetchPriority:g,fit:p,loading:m,naturalHeight:h,naturalWidth:_,onError:y,onLoad:f,role:S,sizes:k,src:x,srcSet:v,children:o})}},39260:(e,a,l)=>{"use strict";l.d(a,{Z:()=>r});var n=l(297728),i=l(730212),t=l(855746);function r(e){let{isAuthenticated:a}=(0,i.B)(),{expName:l,anyEnabled:r,group:s}=function({experimentsClient:e,handlerId:a,isAuthenticated:l,skipActivation:n}){let{checkExperiment:i}=e,t=i(l?"web_masonry_v2_auth":"web_masonry_v2_unauth",{dangerouslySkipActivation:n});return t.group?{expName:l?"web_masonry_v2_auth":"web_masonry_v2_unauth",...t}:"www/[username]/[slug].js"!==a||l?"www/pin/[id].js"!==a||l?{expName:"",anyEnabled:!1,group:""}:{expName:"web_masonry_v2_unauth_pin",...i("web_masonry_v2_unauth_pin",{dangerouslySkipActivation:n})}:{expName:"web_masonry_v2_unauth_board",...i("web_masonry_v2_unauth_board",{dangerouslySkipActivation:n})}}({experimentsClient:(0,n.F)(),handlerId:(0,t.MM)(),isAuthenticated:a,skipActivation:e?.skipActivation??!1});return{expName:l,anyEnabled:r,group:s,isMeasureAllEnabled:"enabled_measure_all"===s||"enabled_measure_all_impression_fix"===s,isImpressionFixEnabled:"control_impression_fix"===s||"enabled_impression_fix"===s||"enabled_measure_all_impression_fix"===s}}},936437:(e,a,l)=>{"use strict";l.d(a,{Z:()=>r});var n=l(967232),i=l(144326),t=l(240760);function r(){let e=(0,i.ZP)();return function(a,l){let i=new Date(a).getTime(),r=Date.now()-i,s=Math.floor(r/n.FS),o=Math.floor(r/n.UK),d=Math.floor(r/n.F4),u=Math.floor(r/n.VL),c=Math.floor(r/n.N9),g=Math.floor(r/n.N1),p=e.nbt([" {{ minutes }} ", " {{ minutes }} "], s, " - ", true),m=e.nbt([" {{ hours }} ", " {{ hours }} "], o, " - ", true),h=e.nbt([" {{ days }} ", " {{ days }} "], d, " - ", true),_=e.nbt([" {{ weeks }} ", " {{ weeks }} "], u, " - ", true),y=e.nbt([" {{ months }} ", " {{ months }} "], c, "useGetHumanizedTimeSince.monthsString", true),f=e.nbt([" {{ years }} ", " {{ years }} "], g, " - ", true),S=e.nbt(["{{ minutes }} ", "{{ minutes }} "], s, "minutes ago abbreviated", true),k=e.nbt(["{{ hours }} ", "{{ hours }} "], o, "hours ago abbreviated", true),x=e.nbt(["{{ days }} ", "{{ days }} "], d, "days ago abbreviated", true),v=e.nbt(["{{ weeks }} ", "{{ weeks }} "], u, "weeks ago abbreviated", true),b=e.nbt(["{{ months }} ", "{{ months }} "], c, "months ago abbreviated", true),P=e.nbt(["{{ years }} ", "{{ years }} "], g, "years ago abbreviated", true);return g>0?(0,t.nk)(l?P:f,{years:g}).join(""):c>0?(0,t.nk)(l?b:y,{months:c}).join(""):u>0?(0,t.nk)(l?v:_,{weeks:u}).join(""):d>0?(0,t.nk)(l?x:h,{days:d}).join(""):o>0?(0,t.nk)(l?k:m,{hours:o}).join(""):s>0?(0,t.nk)(l?S:p,{minutes:s}).join(""):e.bt(" ", "Just now", " - ", undefined, true)}}},788388:(e,a,l)=>{"use strict";l.d(a,{F:()=>y,Z:()=>_});var n=l(667294),i=l(829196),t=l(118755),r=l(573706),s=l(39260),o=l(635284),d=l(730212),u=l(410150),c=l(644797),g=l(243583),p=l(415787),m=l(855746);let h={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},CuratedBoard:{impressionType:"curatedBoardImpressions",idType:"curatedBoardIdStr",eventType:15555}};function _({carouselData:e,closeupImpressionType:a,closeupNavigationType:l,componentType:_,contextLogData:y,clientTrackingParams:f,duploShouldTrackPinEvents:S,elementType:k,impressionAuxFields:x,inImpressionExp:v,impressionType:b,impressionsFramework:P,isPaused:T,loggingId:w,objectIdStr:F,slotIndex:I,trackCarousel:E,viewData:A,viewParameter:L,viewType:C,isPromoted:K,storyPinProductEventData:R}){let{logContextEvent:D}=(0,r.v)(),{logMrcVideoAdEventOnPlay:j}=(0,c.r)(),{userAgent:{browserName:O}}=(0,d.B)(),{logStat:N}=(0,g.Yg)(),M=P||o.Z,Z=(0,n.useRef)(null),U=n=>{let r=h[b],s=r.idType,o={clientTrackingParams:f,endTime:n.endTime,[s]:w,slotIndex:I,time:n.startTime,renderDuration:n.endTime-n.startTime,type:a,...x,forcedExit:"removed"===n.forcedExit?0:void 0};if("Pin"===b){let e=[],a=n.visibleEvents||new Map,l=n.hiddenEvents||new Map;if([1,50,80,2].forEach(n=>{a.has(n)&&e.push({type:n,time:1e6*(a.get(n)||0),visible:!0}),l.has(n)&&e.push({type:n,time:1e6*(l.get(n)||0),visible:!1})}),o={...o,pinCellWidth:n.pinCellWidth||0,pinCellHeight:n.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,a)=>e.time-a.time)},(0,t.i7)(O)&&x&&x.isPromoted){let{attributionSourceId:e,isPromoted:a,link:l,campaignId:n,araAuxData:t,advertiserId:r,domain:s,adDestinationUrl:o}=x;(0,i.YS)(b,a??null,e??null,l??null,n??null,t??null,r??null,s??null,o??null)}}let d={component:_,object_id_str:F,view_type:C,view_data:A||{},view_parameter:L};if(E)e&&E&&D({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...o,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...d,aux_data:{...y}});else{let e={clientTrackingParams:f,event_type:r.eventType,...d,element:k,event_data:{[r.impressionType]:"Story"===b?o:[o],...R?{storyPinProductEventData:R}:{}},aux_data:{closeup_navigation_type:l,...y}};D(e),j(e)}S&&N("log_pin_impression")},{expName:z,group:H}=(0,s.Z)({skipActivation:!0}),G=(0,u.ZP)(),V=(0,m.MM)(),{isAuthenticated:B}=(0,d.B)(),W=(0,n.useCallback)(()=>{let e=!1;try{let{current:a}=Z;if(a instanceof HTMLElement&&(!K||a.getElementsByTagName("img").length>0)){let l=M.start(a);l.onExitViewport(U).setDebugId(w||"unknown"),S&&l.onEnterViewport(()=>{N("log_pin_impression_track_enter_viewport")}),e=!0,H&&(0,p.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:G,experimentName:z,group:H,handlerId:V,isAuthenticated:B,slotIndex:I??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}S&&N("log_pin_impression_track",{didStartTracking:e})},[Z.current]);return(0,n.useEffect)(()=>(v&&!M.inExperiment&&M.setExperimentStatus(!0),T||W(),()=>{let{current:e}=Z;e instanceof HTMLElement&&(!K||e.getElementsByTagName("img").length>0)&&M.stop(e)}),[T,W]),Z}let y=({children:e,...a})=>e({impressionTrackerRef:_(a)})},766546:(e,a,l)=>{"use strict";l.d(a,{Z:()=>r});var n=l(667294);function i(e,a,l){var n;return(a="symbol"==typeof(n=function(e,a){if("object"!=typeof e||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var n=l.call(e,a||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?n:String(n))in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}class t extends n.Component{constructor(...e){super(...e),i(this,"ref",(0,n.createRef)()),i(this,"observer",null),i(this,"handleVisibilityChanged",(e,a)=>{this.props.onVisibilityChange(e,a)})}componentDidMount(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}render(){return this.props.children(this.ref)}}let r=t},206708:(e,a,l)=>{"use strict";l.d(a,{Rq:()=>t,Vf:()=>r,jd:()=>s,oy:()=>o,yR:()=>c});var n=l(914896),i=l(790014);let t=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,r=28,s=e=>window.innerHeight>=748&&t(e),o=()=>"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&"ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=700),d=()=>{n.t8(i.oj,String(!0),(0,n.kZ)(i.oj))},u=()=>!!n.U2(i.oj),c=()=>{let e=o();e!==u()&&(e?d():n.zN(i.oj.name),"undefined"!=typeof window&&window.location.reload())}},775383:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>d});var n=l(883119),i=l(679482),t=l(206708),r=l(675625),s=l(730212),o=l(785893);let d=({children:e,dataLayoutShiftBoundaryId:a,hasFixedHeader:l=!1,hasGutter:d=!0,height:u,showKeychainError:c=!1,useViewport:g=!1})=>{let p=(0,s.B)(),m=(0,t.jd)(p.userAgent.platform)?t.Vf:0;return(0,o.jsx)(n.xu,{"data-layout-shift-boundary-id":a||"PageContainer",height:g?`calc(100vh - ${m}px)`:u,paddingX:d?i.D6:void 0,paddingY:l||c?void 0:3,children:(0,o.jsx)(r.C,{value:!!d,children:e})})}},675625:(e,a,l)=>{"use strict";l.d(a,{C:()=>t,V:()=>r});var n=l(667294);let i=(0,n.createContext)(!1),t=i.Provider,r=()=>(0,n.useContext)(i)},812477:(e,a,l)=>{"use strict";l.d(a,{Z:()=>t});var n=l(616550);let i=["/BingSiteAuth.xml","/about","/add-account","/ads","/ads.txt","/age_verification","/all","/app-ads.txt","/apple-app-site-association","/apple-app-site-association.p7m","/attribution_source","/bot.html","/branded-pins","/browserbutton","/buy-it","/careers","/categories","/close-account","/content-claiming","/convert-business","/convert-personal","/create-business","/create-personal","/creation-inspiration","/creator-onboarding-landing","/csrf_error","/ct.html","/deactivate-account","/deed6a3ef3a44d41bb3ae2bad137db84.txt","/developers","/discover","/edit","/email_verification_error","/engagement","/explore","/favicon.ico","/fb.html","/flyup-instant-loading-indicator-app-shell.html","/following","/getWebPushKey","/google_gdn.html","/google_search.html","/googlef5dc42d6e03f6e61.html","/guidedsearch","/help","/holidays-celebrations","/homefeed","/idea-ads-tool","/idea-pin-builder","/ideas","/inbox","/install-shuffles","/invited","/jobs","/lens-search","/login","/logout","/manifest.json","/manifest.webapp","/me","/messages","/mobile","/notifications","/oauth","/app-factory-oauth","/appealed-pin","/oembed.json","/offline.html","/offsite","/opensearch.xml","/parent_contact_info","/parental-passcode","/pin-builder","/pin-creation-tool","/pin-editor","/pin_catalog","/pin_redirect","/pinterest-wellbeing","/pinterest-predicts","/pinterestlens","/pinterestlenstryon","/pinterestwellbeing","/policy","/product-catalogs","/public-beta","/quick-instant-loading-indicator-app-shell.html","/quick-lite-instant-loading-indicator-app-shell.html","/recently-viewed","/refresh_stored_accounts","/refresh_token","/report","/reports-and-violations","/request-data","/robots.txt","/safe-redirect","/search","/settings","/shopping","/signup","/socialmanager","/story-pin-builder","/story_feed","/sw-shell.html","/sw.html","/sw.js","/switch_account","/terms","/today","/topics","/transparent.html","/unauth-profile","/unlink","/upload-image","/upload-image-lens-history","/upload-lens-image","/upload-profile-image","/verified","/verify","/videos","/web-custom-svg","/web-mentorship","/welcome","/windows-app-web-link","/your-shop"];function t(e){return!!(0,n.LX)(e.pathname,{path:"/:username/",exact:!0})&&!i.includes(e.pathname.replace(/\/$/,""))}},753652:(e,a,l)=>{"use strict";l.d(a,{Q6:()=>c,ZP:()=>o,le:()=>g,qe:()=>d,yU:()=>u});var n=l(785220),i=l(655201);let t=(e,a)=>e.length===a.length&&e.every((e,l)=>e===a[l]),r=e=>e;function s(e,a=t,l=r){return function(n){let i=[];return function(...t){let r=i.find(e=>a(e.args,l(t)));if(r)return r.result;let s=n(...t);return i.push({args:l(t),result:s}),e&&i.length>e&&i.shift(),s}}}let o=s(),d=s(1),u=s(void 0,t,e=>[JSON.stringify(e)]),c=s(0,(e,a)=>e.length===a.length&&e.every((e,l)=>(0,i.Z)(e,a[l]))),g=s(0,(e,a)=>e.length===a.length&&e.every((e,l)=>(0,n.ZP)(e,a[l])))},178793:(e,a,l)=>{"use strict";function n(e,a,l){return!!(e&&e.trim().length>0&&a&&!l)}l.d(a,{r:()=>n})},26473:(e,a,l)=>{"use strict";function n({embedSrc:e,embedType:a,imagesUrls:l,preferredResolution:n,excludeOriginals:i}){if(!e&&!a&&!l)return"";if("gif"===a)return e||"";if(!l)return"";if(n){let e="474x"===n&&l["474x"]||"236x"===n&&l["236x"]||l["736x"];if(e)return e}let t=Object.keys(l).reduce((e,a)=>{try{let n=a.split("x")[0];if(Number.isNaN(Number(n)))return{...e,[a]:l[a]};return{...e,[n]:l[a]}}catch(a){return e}},{}),r=Object.keys(t);return i&&"orig"===r[r.length-1]&&r.pop(),t[r.pop()]||""}l.d(a,{Z:()=>n})},786890:(e,a,l)=>{"use strict";l.d(a,{eg:()=>r,kt:()=>h,rw:()=>p,fs:()=>u,eK:()=>c,Ly:()=>g,BY:()=>m,bN:()=>_,RC:()=>o,EU:()=>d});let n=/\s\s+/g,i=e=>e.replace(n," ");var t=l(715824);let r=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_description","is_sensitive_rich_pin_title","is_sensitive_board_title"])),s=e=>"string"==typeof e?e:"",o=({storyPinDataMetadataPinTitle:e,pinTitle:a})=>e||a,d=(e,a)=>e?e.trim().length>a?(0,t.ZP)(e.trim(),a).trim():e.trim():"",u=({pinTitle:e,gridTitle:a,richSummaryDisplayName:l,richMetadataTitle:n,storyPinDataId:i,storyPinDataMetadataPinTitle:t})=>{let r=t||e,s=d(a,200);return s||l||n||(i&&r?r:null)},c=e=>{let{richSummaryDisplayName:a}=e,l=e.pinJoinVisualAnnotation||[],n=e.pinJoinAnnotationsWithLinks||{},r=e.richMetadataDescription||"",s=e.closeupUnifiedDescription||"",o=l.map(e=>(n||{})[e]||{name:e,url:""}),d="",u=(a||"").toLocaleLowerCase().trim(),c=r.toLocaleLowerCase().trim(),g=s.toLocaleLowerCase().trim();return s&&s.length>3&&g!==u?d=s:r&&r.length>3&&c!==u&&(d=r),d&&(d=i((0,t.ZP)(d,496)).trim()),{description:d,annotationsWithLinks:o}},g=({pinTitle:e,gridTitle:a,richSummaryDisplayName:l,richMetadataTitle:n,storyPinDataId:i,storyPinDataMetadataPinTitle:t,pinJoinVisualAnnotation:s,seoNoindexReason:o,seoTitle:d})=>r.has(o??"")?d:u({pinTitle:e,gridTitle:a,richSummaryDisplayName:l,richMetadataTitle:n,storyPinDataId:i,storyPinDataMetadataPinTitle:t})||s?.[0]||e,p=(e,a,l,n,i)=>{let t=s(e).trim(),r=(e,a)=>a&&a.length>0?`${e} ${a.join(", ")}`:e;return n&&n.trim().length?r(n.trim(),l):i&&i.trim().length?i.trim():t?r(t,l):l?l.join(", "):""},m=e=>`/pin/${e}/`,h=(e,a)=>{let l=`Pinterest video from ${a}: `.concat(e);return""===a?e:l},_=({pinId:e,seoUrl:a})=>a&&"string"==typeof a?a:m(e)},220797:(e,a,l)=>{"use strict";l.d(a,{Z:()=>s}),l(167912);var n,i=l(47848),t=l(144326);let r=void 0!==n?n:n=l(312296),s=e=>{let a;let l=(0,t.ZP)(),n=(0,i.Z)(r,e),s=n.trackedLink||n.link||n.imageSpec_orig&&n.imageSpec_orig.url,{richMetadata:o,richSummary:d}=n,u=l.bt("  ", "Saved from ", "Closeup pin annotation", undefined, true);return o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary&&(u=l.bt("    ", "Product sold by ", "pin annotation", undefined, true),a=(o.products?.[0]||void 0)?.offerSummary),!a&&d&&d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary&&(u=l.bt("    ", "Product sold by ", "pin annotation", undefined, true)),{pinLink:s,pinCreditPrefix:u,pinTitle:n.closeupUnifiedTitle,pinDescription:n.closeupUnifiedDescription,pinCategory:n.category}}},593078:(e,a,l)=>{"use strict";l.d(a,{Z:()=>r}),l(167912);var n,i=l(47848);let t=void 0!==n?n:n=l(373462),r=e=>{let a=(0,i.Z)(t,e);return[["60x60",a?.imageSpec_60x60],["136x136",a?.imageSpec_136x136],["170x",a?.imageSpec_170x],["236x",a?.imageSpec_236x],["474x",a?.imageSpec_474x],["564x",a?.imageSpec_564x],["736x",a?.imageSpec_736x],["600x315",a?.imageSpec_600x315],["orig",a?.imageSpec_orig]].reduce((e,[a,l])=>l?{...e,[a]:l.url}:e,{})}},947956:(e,a,l)=>{"use strict";function n({hasPin:e,hasPinRichMetadata:a,hasPinRichMetadataProducts:l,hasPinRichMetadataArticle:n,hasPinRichMetadataRecipe:i,hasPinStoryPinData:t}){if(e){if(a)return l?144:n?141:i?145:139;if(t)return 157}return 140}l.d(a,{Z:()=>n})},178638:(e,a,l)=>{"use strict";l.d(a,{Z:()=>o});var n=l(667294),i=l(576449),t=l(785893);let r=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,a,l)=>{let i=(0,n.useRef)(null),t=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(e!==i.current||l&&l!==t.current){i.current=e;let l=r(e);l?.complete&&a()}t.current=l},[e,a,l])};function o({alt:e,children:a,color:l,elementTiming:n,fetchPriority:r,isActive:o=!1,naturalHeight:d,naturalWidth:u,onLoad:c,src:g,fit:p="none",srcSet:m,...h}){return s(g,c,o),(0,t.jsx)(i.Z,{...h,alt:e,color:l,elementTiming:n,fetchPriority:r,fit:p,naturalHeight:d,naturalWidth:u,onLoad:c,src:g,srcSet:m,children:a})}},829413:(e,a,l)=>{"use strict";l.d(a,{Z:()=>o});var n=l(886132),i=l(667294),t=l(353168),r=l(770975),s=l(142921);function o({children:e,isAtEndOfFeed:a,pinData:l,itemCount:o,includeBackgroundImages:d=!1,includeVideos:u=!1,includeSections:c=!1,isPlaceholderGrid:g}){return s.Z()?.isAuthenticated||(c=!0),(0,n.Z)({pinData:l,isAtEndOfFeed:a,includeBackgroundImages:d,includeVideos:u,includeSections:c,isPlaceholderGrid:g}),!function(e){let a=(0,r.E)(),l=(0,i.useRef)(null);(0,i.useEffect)(()=>{e!==l.current&&(l.current=e,a&&(0,t.ZP)(t.at))},[!!a,e])}(o),e}},886132:(e,a,l)=>{"use strict";l.d(a,{Z:()=>f,v:()=>p});var n=l(667294),i=l(630118),t=l(845729),r=l(301567),s=l(248750),o=l(353168),d=l(770975),u=l(202953),c=l(438973);let g=(0,t.XV)("GridProfiler"),p=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,r.VZ)(),m=e=>"LAYOUT"===e.status&&500||"TIMING"===e.status&&100||null,h=(e,a)=>{if(!a){let a=(0,r.LM)();if(a===e)return g("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,r.F9)())return g("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:a}}return{complete:!0}},_=(e,a)=>{let l=0,n=0,i=0,t=0,r=0;return e=e.filter(e=>"pin"===e.type),a.forEach((a,s)=>{let o;let d=a.fileName.split(".")[0];o=e[s],d!==o?.image_signature&&(o=e.find(e=>d===e?.image_signature)),void 0===o?r+=1:o.is_promoted||o.recommendation_reason?.reason==="PROMOTED_PIN"||o?.promoter?.length?i+=1:null!==o.story_pin_data_id&&void 0!==o.story_pin_data_id?l+=1:o?.videos?.video_list?n+=1:t+=1}),{storyPinCount:l,videoCount:n,adCount:i,imageCount:t,unknownCount:r}},y=(e,a)=>{let l=()=>{window.removeEventListener(e,l),a()};return window.addEventListener(e,l),()=>window.removeEventListener(e,l)};function f({isAtEndOfFeed:e,pinData:a,includeBackgroundImages:l,includeVideos:p=!1,includeSections:f,isPlaceholderGrid:S}){let k=(0,d.E)(),x=k?.getId(),v=k?.setVisuallyCompleteResult,[b,P]=(0,n.useState)({status:"DISABLED"});(0,n.useEffect)(()=>{v?P({status:"LAYOUT",failedCount:0,numOfItemsChecked:0}):P({status:"DISABLED"})},[x,v]),(0,n.useEffect)(()=>{if("DISABLED"!==b.status&&(0,o.ZP)(`GridVisuallyCompleteProfiler_${b.status}`),g("new status",b),"LAYOUT"===b.status){let e=y("scroll",()=>{(0,o.ZP)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[b.status]),(0,c.Z)(()=>{if(!k||!v)return;let{abort:n,getMetricId:o}=k,d=o(),c=(0,r.cQ)(l,p,f);if(S&&!c.length){g("bypassing PWT run due to skeleton pin grid");return}switch(b.status){case"LAYOUT":{let a=h(b.numOfItemsChecked,e);a.complete?P({status:"TIMING",failedCount:0,pinElements:c}):500*b.failedCount>6e4?((0,s.A9)(`images.${(0,i.KJ)(d)}.visuallyComplete.maxLayoutAttempt`),n("visuallyComplete_layoutTimeout"),P({status:"DISABLED"})):P({...b,failedCount:b.failedCount+1,numOfItemsChecked:a.numOfItemsChecked});break}case"TIMING":{let e=(0,u.Cg)(),l=b.pinElements.length,r=[],o=0,c=0,p=0;if(b.pinElements.forEach(({element:a,fileName:l})=>{let n=e.find(e=>e.name.endsWith(l));n?n.responseEnd?(r.push(n),(0,t.v5)(a,"green")):(p+=1,(0,t.v5)(a,"blue")):a instanceof HTMLImageElement&&a.complete?(c+=1,(0,t.v5)(a,"red")):(o+=1,(0,t.v5)(a,"greenyellow"))}),o||p)100*b.failedCount>6e4?((0,s.A9)(`images.${(0,i.KJ)(d)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:l,incompleteCount:o,noTimingCount:c,noTimingResponseEndCount:p}}),n("visuallyComplete_timingTimeout"),P({status:"DISABLED"})):P({...b,failedCount:b.failedCount+1});else{if(g(`All ${r.length} images are fetched`),a&&a.length){let e=_(a,b.pinElements);Object.entries(e).forEach(([e,a])=>{k.addBinaryAnnotation(e,a,"I16")}),(0,s.A9)(`${(0,i.KJ)(d)}.pinTypes`,{tags:e})}v({imageTimings:r}),P({status:"DISABLED"}),(0,s.A9)(`images.${(0,i.KJ)(d)}.visuallyComplete.complete`,{tags:{totalImageCount:l,noTimingCount:c}})}}}},m(b))}},302749:(e,a,l)=>{"use strict";l.d(a,{A:()=>s,Z:()=>o});var n=l(667294),i=l(883119),t=l(115642),r=l(785893);let s=({fill:e})=>{let a="half"===e?(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(i.xu,{position:"absolute",children:(0,r.jsx)(i.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:15})}),(0,r.jsx)(i.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:15})]}):(0,r.jsx)(i.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:15});return(0,r.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},"data-test-id":`rating-star-${e}`,display:"inlineBlock",children:a})};function o({max_rating:e,rating:a,display:l}){var n;let{peekCloseupEnabled:o}=(0,t.x4)(),d=[],u=parseFloat(e)||5,c=5*(n=(n=parseFloat(a)||0)<=u?n:u)/u;if(Number.isNaN(c))return null;let g=Math.floor(c),p=c-g;return[...Array(g).keys()].forEach(e=>d.push((0,r.jsx)(s,{fill:"full"},e))),p>=.75?d.push((0,r.jsx)(s,{fill:"full"},d.length)):p>=.25&&d.push((0,r.jsx)(s,{fill:"half"},d.length)),[...Array(5-d.length).keys()].forEach(()=>d.push((0,r.jsx)(s,{fill:"empty"},d.length))),(0,r.jsx)(i.xu,{display:l??o?"flex":"inlineBlock",position:"relative",width:18*u,children:d})}},957486:(e,a,l)=>{"use strict";l.d(a,{Z:()=>s});var n=l(667294),i=l(545007),t=l(809833),r=l(604759);function s(e){let{name:a,optionsKey:l}=e,s=a===t.fY,o=(0,r.bC)(),d=o?.get(a,l);if(d)throw d;let u=e=>e[a]?.[l],c=(0,i.v9)(({resources:e})=>u(e)?.nextBookmark),g=(0,i.v9)(({resources:e})=>u(e)?.data),p=(0,i.v9)(({resources:e})=>u(e)?.auxData),m=(0,i.v9)(({resources:e})=>u(e)?.error),h=(0,n.useRef)({auxData:void 0,data:void 0,error:void 0,isAtEnd:!1,nextBookmark:void 0});if(s)return h.current;let _={auxData:p,data:g,error:m,isAtEnd:c===t.qx,nextBookmark:c};return(_.auxData!==h.current.auxData||_.data!==h.current.data||_.error!==h.current.error||_.isAtEnd!==h.current.isAtEnd||_.nextBookmark!==h.current.nextBookmark)&&(h.current=_),h.current}},931397:(e,a,l)=>{"use strict";l.d(a,{Z:()=>t});var n=l(809833),i=l(174044);function t(e){let{enabledRouteRefresh:a,headers:l,name:t,noCache:r,options:s,schema:o}=e??{name:n.fY,options:null},d=!e,{fetchResource:u,ref:c}=(0,i.Z)({enabledRouteRefresh:a,headers:l,name:t,noCache:r,options:s,schema:o},d,!1);return d||u(),c}},873095:(e,a,l)=>{"use strict";l.d(a,{l:()=>t,r:()=>r});var n=l(667294);let i=(0,n.createContext)(null),t=()=>(0,n.useContext)(i),r=i.Provider},728593:(e,a,l)=>{"use strict";l.d(a,{Z:()=>t});var n=l(830997),i=l(873095);let t=()=>{let e=(0,n.g)(),a=(0,i.l)();return l=>{let{mobileOptions:n,desktopOptions:i,reason:t,attributionLabel:r,pinId:s}=l;e?e.showDesktopSignupModal({signupFlow:i?.modalType==="login"?{type:"login"}:{type:"signup"},reason:t,attributionLabel:r,...i?.modalOptions}):a&&a.showMobileSignupModal({reason:t,attributionLabel:r,headingType:n?.headingType??"none",pinId:s})}}},715824:(e,a,l)=>{"use strict";l.d(a,{ZP:()=>i,mP:()=>n});let n="";function i(e,a=80,l=n,t=!1){let r;if(!e)return"";if(e.length<=a)return e;if(" "!==e[a-1]&&" "===e[a]||t)r=e.substring(0,a);else{let l=e.lastIndexOf(" ",a);r=e.substring(0,l)}return(r=r.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+l}},509781:(e,a,l)=>{"use strict";l.d(a,{Z:()=>k});var n=l(667294),i=l(883119),t=l(700198),r=l(136061),s=l(766546),o=l(297728),d=l(730212),u=l(655201),c=l(616949);let{Provider:g,useMaybeHook:p}=(0,l(498490).Z)("timeSpentContext");var m=l(603667),h=l(66560),_=l(785893);function y(e,a,l){var n;return(a="symbol"==typeof(n=function(e,a){if("object"!=typeof e||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var n=l.call(e,a||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?n:String(n))in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}class f extends n.Component{constructor(e){super(e),y(this,"componentWillUnmount",()=>{this.unregisterComponent()}),y(this,"getContext",()=>{let{clientTrackingParams:e,component:a,element:l,objectId:n,timeSpentContext:i,view:t,viewParameter:r}=this.props;return{view:t||i?.view,viewParameter:r||i?.viewParameter,component:a||i?.component,element:l,objectId:n||i?.objectId,clientTrackingParams:e||i?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),y(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),y(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:a=!1}=this.props;if(a&&e&&e.getGrandparentUuid){let a=e.getGrandparentUuid();if(a)return a}return e&&e.getParentUuid?e.getParentUuid():void 0}),y(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),y(this,"getTimedPair",()=>this.state.timedPair),y(this,"setTimedPair",(e,a)=>{this.setState({timedPair:e},()=>{a&&a()})}),y(this,"isRegistered",!1),y(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),y(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),y(this,"handleVisibilityChange",e=>{let{intersectionRatio:a}=e[0],{bottom:l,left:n,right:i,top:t}=e[0].intersectionRect;a>0?this.registerComponent():0===a&&(0===l&&0===n&&0===i&&0===t?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new c.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,u.Z)(e.auxData,this.props.auxData)&&(0,u.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e,intersectionObserverExpEnabled:a,intersectionObserverBoxHeight:l}=this.props;return a?(0,_.jsx)(g,{value:this.getContext(),children:(0,_.jsx)(s.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:a=>(0,_.jsx)(i.xu,{ref:a,height:l??"100%",children:n.Children.only(e)})})}):(0,_.jsx)(g,{value:this.getContext(),children:(0,_.jsx)(t.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:n.Children.only(e)})})}}function S(e){let a;let l=(0,r.Hv)(),i=p(),t=(0,m.Z)(),s=(0,h.H0)(),{requestIdentifier:u="",isAuthenticated:c}=(0,d.B)(),g={app_instance_id:u.slice(0,8),...e.auxData??{}},{checkExperiment:y}=(0,o.F)();if(c)switch(e.view){case 42:a=y("web_intersection_observer_migration_timespent_inbox_auth").anyEnabled;break;case 675:a=y("web_intersection_observer_migration_timespent_closeup_media_viewer_auth").anyEnabled;break;default:a=y("web_intersection_observer_migration_timespent_auth").anyEnabled}else a=y("web_intersection_observer_migration_timespent_unauth").anyEnabled;return(0,n.useEffect)(()=>{t?.setHistoryStackContext(l)},[l,t]),(0,n.useEffect)(()=>{t?.setPins(s??{})},[s,t]),t?(0,_.jsx)(f,{...e,auxData:g,intersectionObserverExpEnabled:a,timeSpentContext:i,timeSpentManager:t,children:e.children}):e.children}S.displayName="TimeSpent";let k=S},154785:(e,a,l)=>{"use strict";l.d(a,{Z:()=>d});var n=l(667294),i=l(616550),t=l(282999),r=l(812477),s=l(1006);let o=e=>(0,t.L6)(e)?"pin":(0,t.am)(e)?"board":(0,t.Xn)(e)?"login":(0,t.C$)(e)?"home":(0,r.Z)(e)?"profile":(0,t.dr)(e)?"ideas":(0,t.gT)(e)?"ideas-root":(0,t.tZ)(e)?"videos":(0,t.Q0)(e)?"videos-category":(0,t.$Y)(e)?"article":(0,t.E0)(e)?"shopping-spotlight":(0,t.Zz)(e)?"today":(0,t.j8)(e)?"unauth-profile":(0,t.f1)(e)?"shopping-root":(0,t.OX)(e)?"shopping-category":"other";function d(){let e=(0,i.TH)();return(0,n.useCallback)(({action:a,item:l,within:n})=>{let i=o(e);(0,s.My)(`logged_out_product.interaction.${i}.${a}`,{item:l||"none",within:n||"none"})},[e])}},564573:(e,a,l)=>{"use strict";l.d(a,{Z:()=>n});let n=e=>e?"string"==typeof e?e:e.pathname?e.pathname:"":""},438973:(e,a,l)=>{"use strict";l.d(a,{Z:()=>i});var n=l(667294);let i=(e,a)=>{let l=(0,n.useRef)(()=>{});(0,n.useEffect)(()=>{l.current=e},[e]),(0,n.useEffect)(()=>{if(null===a)return()=>{};let e=setInterval(()=>l.current(),a);return()=>clearInterval(e)},[a])}},899850:(e,a,l)=>{"use strict";l.d(a,{G:()=>s,Z:()=>o});var n=l(667294),i=l(616550),t=l(785893);let r=(0,n.createContext)(!0);function s({children:e}){let a=(0,i.TH)(),[l,s]=(0,n.useState)(!0),o=(0,n.useRef)(a);return(0,n.useEffect)(()=>{o.current!==a&&(o.current=a,s(!1))},[a]),(0,t.jsx)(r.Provider,{value:l,children:e})}function o(){return(0,n.useContext)(r)}},164756:(e,a,l)=>{"use strict";l.d(a,{Z:()=>i});var n=l(667294);let i=()=>{let e=(0,n.useRef)(!1);return(0,n.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},644797:(e,a,l)=>{"use strict";l.d(a,{W:()=>u,r:()=>d});var n=l(667294),i=l(573706),t=l(498490),r=l(297728),s=l(785893);let{Provider:o,useHook:d}=(0,t.Z)("VideoPlayer");function u({children:e}){let{logContextEvent:a,logImpression:l}=(0,i.v)(),{checkExperiment:t}=(0,r.F)(),[d,u]=(0,n.useState)(!1),[c,g]=(0,n.useState)([]),[p,m]=(0,n.useState)([]),[h,_]=(0,n.useState)({}),y=t("web_ads_mrc_video_impression").anyEnabled,f=e=>{_(a=>({...a,[e]:!0}))},S=(0,n.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:a}=e.event_data.pinImpressions[0],l=(e.aux_data?.commerce_data||"").includes("story_pin_id");y&&(a||l)&&g(a=>[...a,e].slice(-1e3))}},[y]),k=(0,n.useCallback)(e=>{18===e.eventType&&y&&m(a=>[...a,e].slice(-1e3))},[y]),x=e=>{let{time:a}=e.event_data.pinImpressions[0];return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:a,renderDuration:0}]}}},v=e=>{if(e.eventData){let{time:a}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:a??0}}}return null};(0,n.useEffect)(()=>{let e=c.filter(e=>{let{pinIdStr:l}=e.event_data.pinImpressions[0];return!h[l]||!y||(a(x(e)),!1)});e.length!==c.length&&g(e)},[c,y,a,h]),(0,n.useEffect)(()=>{let e=p.filter(e=>{let a=e.eventData?.pinIdStr;if(!a)return!1;if(h[a]&&y){let a=v(e);return a&&l(a),!1}return!0});e.length!==p.length&&m(e)},[p,y,l,h]);let b=(0,n.useMemo)(()=>({captionsEnabled:d,logMrcVideoAdImpressionOnPlay:k,logMrcVideoAdEventOnPlay:S,setCaptionsEnabled:u,setVideoPlayed:f,videosPlayed:h}),[d,S,k,h]);return(0,s.jsx)(o,{value:b,children:e})}},811036:(e,a,l)=>{"use strict";function n(e){let a;switch(e){case 1:a=1;break;case 2:a=2;break;case 3:a=3;break;case 4:a=4;break;case 5:a=5;break;case 6:a=6;break;case 9:a=9}return a}l.d(a,{Z:()=>n})},12886:(e,a,l)=>{"use strict";function n({cropSource:e,surfaceType:a,isProductPage:l}){return"stl"===a&&4===e?"shop_the_look_module":l?"feed_module":null}l.d(a,{Z:()=>n})},668564:(e,a,l)=>{"use strict";l.d(a,{X:()=>i,Z:()=>t});var n=l(667294);let i=120;function t(e,a=0,l=i){let[r,s]=(0,n.useState)(e?"active":"inactive");return(0,n.useEffect)(()=>{if(e){if(a){let e=setTimeout(()=>s("active"),a);return()=>{clearTimeout(e)}}s("active")}else{let e=setTimeout(()=>s("inactive"),l);return()=>{clearTimeout(e)}}},[e]),r}},557443:(e,a,l)=>{"use strict";l.d(a,{$:()=>i,B:()=>n});let{Provider:n,useHook:i}=(0,l(498490).Z)("SurfaceContext",{surface:"Unknown"})},596530:(e,a,l)=>{"use strict";l.d(a,{Z:()=>r});var n=l(883119),i=l(668564),t=l(785893);function r({children:e,fadeInDuration:a=0,fadeOutDuration:l=i.X,visibility:r}){return"none"!==r&&e?(0,t.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{hidden:{opacity:0,transition:l?`opacity ${l}ms ease`:void 0},visible:{opacity:1,transition:a?`opacity ${a}ms ease`:void 0}}[r]},children:e}):null}},533191:(e,a,l)=>{"use strict";l.d(a,{Z:()=>P}),l(167912);var n,i=l(883119),t=l(488792),r=l(47848),s=l(144326),o=l(297728),d=l(728593),u=l(1006),c=l(154785),g=l(901450),p=l(410150),m=l(969119),h=l(383399),_=l(578406),y=l(934648),f=l(424583),S=l(310368),k=l(55463),x=l(785893);let v=({children:e,pulsar:a,testId:l})=>a.show?(0,x.jsx)(i.xu,{"data-test-id":l,position:"relative",children:(0,x.jsxs)(i.iP,{onTap:a.onClick,tapStyle:"none",children:[(0,x.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"-75px"}},marginTop:-5,position:"absolute",children:e}),(0,x.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"-83px"}},marginTop:-12,position:"absolute",children:(0,x.jsx)(i.o3,{})})]})}):(0,x.jsx)(i.xu,{"data-test-id":l,children:e}),b=void 0!==n?n:n=l(646920);function P({auxData:e,disabled:a,disableLog:l,followEventType:n,id:P,inline:T,invertColors:w,isFollowed:F,isIdeaPin:I,isLegoEnabled:E,isSecondaryButton:A,isUserFollowButton:L,isUserMe:C,onFollow:K,onUnfollow:R,pinKey:D,shouldUseLegoColors:j,showPulsar:O,size:N,textType:M="FollowFollowing",unfollowEventType:Z,viewParameter:U,viewType:z,clientTrackingParams:H}){let G;let V=(0,s.ZP)(),B=(0,p.HG)(),{showToast:W}=(0,g.F9)(),Y=(0,c.Z)(),$=(0,t.Z)(),Q=(0,d.Z)(),{checkExperiment:q}=(0,o.F)(),X=(0,y.Z)(),J=(0,h.Z)(),ee=J&&J.isAuth,{unauthFollowUserId:ea,setUnauthFollowUserId:el}=(0,k.f)(),en=(0,f.mN)()(P),ei=en&&{imageMediumUrl:en.image_medium_url,username:en.username},et=(0,r.Z)(b,D),er=et?.linkDomain,es=et?.nativeCreator,eo=et?.originPinner,ed=et?.pinner;G=es||(er?er.officialUser:eo||ed);let eu=ei??G;(0,m.Z)(()=>{!B&&ee&&ea&&P&&ea===P&&K(P)});let ec=X({fn:()=>{ee?F?(R(P),l||$({event_type:Z,view_type:z,view_parameter:U,object_id_str:P,aux_data:e,clientTrackingParams:H})):(K(P),L&&W(({hideToast:e})=>{let a=eu?.username?`/${eu.username}/`:"";return(0,x.jsx)(S.Z,{handleHide:e,href:a,imageUrl:eu?.imageMediumUrl||"",text:(0,x.jsx)(i.xv,{lineClamp:4,children:V.bt("!           !", "Following! Their created Pins will show up in your home feed!", "followButton.follow.informationalToastText", undefined, true)}),userId:P})}),l||$({event_type:n,view_type:z,view_parameter:U,object_id_str:P,aux_data:e,clientTrackingParams:H})):((0,u.NC)(F?"press_profile_unfollow":"press_profile_follow"),Y({action:"click",item:F?"unfollow-button":"follow-button"}),Q({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:I?"click_idea_pin_follow":"click_follow",desktopOptions:{modalType:"signup",modalOptions:B&&q("pcons_dweb_contextual_follow_modal").anyEnabled?{source:"followButton",container:"follow"}:void 0},mobileOptions:!B&&q("pcons_mweb_contextual_follow_modal").anyEnabled?{headingType:"follow"}:void 0}),B||el(P??""),(0,u.NC)("clickthrough"))},modalHeader:(0,_.N4)({i18n:V,toFollow:!F})}),eg=!F&&!!O,ep=()=>{if(C)return V.bt("  !", "That's you!", "Follow button is disabled because this is you", undefined, true);if("AddRemove"===M)return F?V.bt("", "Remove", "unfollowButton.removeText", undefined, true):V.bt("", "Add", "followButton.addText", undefined, true);let e="FollowUnfollow"===M?V.bt("  ", "Unfollow", "unfollowButton.unfollowText", undefined, true):V.bt("", "Following", "Follow button label - followed state", undefined, true);return F?e:V.bt("", "Follow", "Follow button label - unfollowed state", undefined, true)};return(0,x.jsx)(v,{pulsar:eg?{show:!0,onClick:ec}:{show:!1},testId:C||F?"board-unfollow-button":"board-follow-button",children:(0,x.jsx)(i.zx,{accessibilityLabel:ep(),color:j||"AddRemove"===M||!E&&A||w?"gray":"red",disabled:C||a,fullWidth:T,onClick:eg?void 0:({event:a})=>{a.preventDefault(),a.stopPropagation(),l||$({event_type:101,component:13672,element:11951,object_id_str:P,view_type:z,view_parameter:U,aux_data:e,clientTrackingParams:H}),ec()},selected:F||!1,size:N,text:ep()})})}},343931:(e,a,l)=>{"use strict";l.d(a,{Z:()=>r});var n=l(883119),i=l(144326),t=l(785893);let r=({isInModal:e})=>{let a=(0,i.ZP)();return(0,t.jsx)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, .5)"}},display:"flex",height:"100%",justifyContent:"center",left:!0,position:e?"absolute":"fixed",top:!0,width:"100%",zIndex:new n.Ry(1),children:(0,t.jsx)(n.$j,{accessibilityLabel:a.bt("", "Loading", "Full page loading state", undefined, true),show:!0})})}},87416:(e,a,l)=>{"use strict";l.d(a,{Cy:()=>d,HE:()=>u,Mv:()=>t,PR:()=>m,Y4:()=>c,dL:()=>i,fS:()=>g,fv:()=>s,lu:()=>p,qS:()=>o,uc:()=>r});var n=l(788388);let i=e=>{let a=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,duploShouldTrackPinEvents:e.duploShouldTrackPinEvents,loggingId:e.loggingId,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Pin",isPaused:e.isPaused,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:a})},t=e=>{let a=(0,n.Z)({impressionAuxFields:{newsType:e.newsType,displayMode:e.displayMode,newsIndex:e.newsIndex||0,tapItemIdStr:e.tapItemIdStr},contextLogData:e.auxData||{},impressionType:"Notification",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:a})},r=e=>{let a=(0,n.Z)({impressionAuxFields:{newsType:e.newsType},contextLogData:e.auxData||{},impressionType:"NotificationFeed",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:a})},s=e=>{let a=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},contextLogData:e.auxData||{},componentType:e.component,isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,impressionType:"Article"});return e.children({impressionTrackerRef:a})},o=e=>{let a=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Story",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:a})},d=e=>{let a=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0,contextLogData:e.auxData||{},componentType:e.component,impressionType:"User",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:a})},u=e=>{let a=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Interest",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:a})},c=e=>{let a=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"TodayArticle",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:a})},g=e=>{let a=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Board",loggingId:e.loggingId,viewType:e.viewType||1,viewParameter:e.viewParameter,viewData:e.viewData});return e.children({impressionTrackerRef:a})},p=e=>{let a=(0,n.Z)({carouselData:e.carouselData,impressionType:"Pin",loggingId:e.loggingId,slotIndex:e.slotIndex??0,trackCarousel:!0,viewParameter:e.viewParameter||72,viewType:e.viewType||1,isPaused:e.isPaused,contextLogData:e.contextLogData,componentType:e.component,impressionAuxFields:e.impressionAuxFields});return e.children({impressionTrackerRef:a})},m=e=>{let a=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"CuratedBoard",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:a})}},410287:(e,a,l)=>{"use strict";l.d(a,{Z:()=>t});var n=l(883119),i=l(785893);function t({children:e,onMouseEnter:a,onMouseLeave:l,onTouch:t,rounding:r,fullWidth:s=!1,pressState:o="none",accessibilityLabel:d,role:u,dataTestId:c}){let g=(Array.isArray(o)?o:[o]).includes("compress");return(0,i.jsx)(n.iP,{accessibilityLabel:d,dataTestId:c,fullWidth:s,onMouseEnter:a&&(({event:e})=>a(e)),onMouseLeave:l&&(({event:e})=>l(e)),onTap:t&&(({event:e})=>t(e)),role:u,rounding:r,tapStyle:g?"compress":"none",children:e})}},65895:(e,a,l)=>{"use strict";l.d(a,{D:()=>n,a:()=>i});let{Provider:n,useMaybeHook:i}=(0,l(498490).Z)("unauthPageWrapperContext")},96405:(e,a,l)=>{"use strict";l.d(a,{Z:()=>t});var n=l(883119),i=l(785893);function t({children:e,additionalStyles:a={}}){return(0,i.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...a}},"data-test-id":"contentLayer",left:!0,position:"absolute",right:!0,top:!0,children:e})}},462888:(e,a,l)=>{"use strict";l.d(a,{ET:()=>s,UQ:()=>o,dv:()=>d,xZ:()=>c,yh:()=>g});var n,i=l(667294),t=l(498490),r=l(785893);let s={NONE:"NONE",GROUP:"GROUP",SECRET:"SECRET",ARCHIVED:"ARCHIVED"},o={NONE:0,ARCHIVED:1,GROUP:2,SECRET:3},d=((n={}).COLORS="COLORS",n.CREATED_BY_ME="CREATED_BY_ME",n.FAVORITED="FAVORITED",n.FAVORITED_AND_CREATED="FAVORITED_AND_CREATED_BY_ME",n.INTERESTS="INTERESTS",n.NONE="",n),{Provider:u,useMaybeHook:c}=(0,t.Z)("ProfileViewContext");function g({children:e}){let[a,l]=(0,i.useState)(),[n,t]=(0,i.useState)(new Map),[s,o]=(0,i.useState)(),[c,g]=(0,i.useState)(),[p,m]=(0,i.useState)(d.NONE),[h,_]=(0,i.useState)(0),[y,f]=(0,i.useState)(),S=(0,i.useCallback)((e,a)=>{t(new Map(n.set(e,a)))},[n]),k=(0,i.useMemo)(()=>({boardPinDensity:a,boardSortOrder:n,profileBoardView:s,profilePinDensity:c,profileFollowingSelectedIndex:h,selfProfilePinFilter:p,setBoardPinDensity:l,setSelfProfilePinFilter:m,updateBoardSortOrder:S,selfProfileBoardFilter:y,setSelfProfileBoardFilter:f,setProfileBoardView:o,setProfilePinDensity:g,setProfileFollowingSelectedIndex:_}),[a,n,s,c,h,p,y,S]);return(0,r.jsx)(u,{value:k,children:e})}},845873:(e,a,l)=>{"use strict";l.d(a,{bn:()=>s,fJ:()=>d,gC:()=>o});var n=l(545007),i=l(498490),t=l(785893);let{Provider:r,useHook:s}=(0,i.Z)("Boards");function o(){let e=s();return a=>e[a]}function d({children:e}){let a=(0,n.v9)(({boards:e})=>e,n.wU);return(0,t.jsx)(r,{value:a,children:e})}},124747:(e,a,l)=>{"use strict";l.d(a,{G:()=>_,Z:()=>f});var n=l(667294),i=l(883119),t=l(897128),r=l(587435),s=l(679482),o=l(829413),d=l(892205),u=l(410150),c=l(969119),g=l(798920),p=l(995060),m=l(507830),h=l(785893);let _=25;function y(e){return e?.storyType==="recommended_boards_module"?{sm:2,md:2,lg:3,xl:4}:1}function f({customLayoutType:e,getColumnSpanConfig:a,emptyState:l,feedItems:_,feedKey:f,maxColumns:S,minColumns:k,pagination:{hasNext:x,isLoadingNext:v,loadNext:b,refetch:P},pullToRefresh:T,renderFeedItem:w,serverRender:F}){let I=(0,u.HG)(),{experimentalColumnWidth:E,experimentalGutter:A}=(0,r.Z)(),[L,C]=(0,n.useState)(!1),K="userSearch"===e?window.innerWidth-16:200,R=v&&0===_.length&&!L,D="desktopFlashlight"===e?0:s.qG,j=k??2;return"userSearch"===e&&(j=1),(0,c.Z)(()=>(window.addEventListener("online",b),()=>window.removeEventListener("online",b))),(0,h.jsxs)(i.xu,{"data-test-id":"MobileFeed",children:[(0,h.jsx)(p.Z,{enabled:!!T,onPull:()=>{P(),C(!0)},refreshing:L}),(0,h.jsxs)(i.xu,{"data-test-id":"grid",marginEnd:D,marginStart:D,opacity:L?.5:1,children:[(0,h.jsx)(o.Z,{isAtEndOfFeed:!x,itemCount:_.length,children:_.length?(0,h.jsx)(i.xu,{"data-test-id":"feed",marginTop:(0,g.kk)({isDesktop:I}),children:(0,h.jsx)(d.Z.Consumer,{children:e=>(0,h.jsx)(n.Fragment,{children:(0,h.jsx)(g.c$,{children:(0,h.jsx)(t.default,{_getColumnSpanConfig:a||y,cacheKey:f,columnWidth:I?E??s.yF:K,gutterWidth:I?A??4*s.jC:void 0,id:F?f:void 0,items:_,loadItems:b,maxColumns:S,minCols:j,optOutFluidGridExperiment:null!=S,renderItem:({data:e,itemIdx:a})=>w(e,a),scrollContainerRef:e,serverRender:F})})})})}):v?(0,h.jsx)(g.gG,{}):l??null}),R&&(0,h.jsx)(i.xu,{column:12,paddingY:2,children:(0,h.jsx)(m.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},55463:(e,a,l)=>{"use strict";l.d(a,{f:()=>s,w:()=>o});var n=l(667294),i=l(498490),t=l(785893);let{Provider:r,useHook:s}=(0,i.Z)("Session");function o({children:e}){let[a,l]=(0,n.useState)(void 0),i=(0,n.useCallback)(()=>l(void 0),[]),s=(0,n.useMemo)(()=>({unauthFollowUserId:a,setUnauthFollowUserId:l,removeUnauthFollowUserId:i}),[a,i]);return(0,t.jsx)(r,{value:s,children:e})}},115642:(e,a,l)=>{"use strict";l.d(a,{Nb:()=>s,Of:()=>o,YO:()=>r,ZP:()=>c,x4:()=>u});var n=l(667294),i=l(753652),t=l(590045);let r=({showProductDetailPage:e,isLargerPane:a,showCloseupContentRight:l})=>e&&a?l?t.Uj:t.zT:1,s=(0,i.qe)(({paneWidth:e,pdpCarouselSlotToPaneRatio:a,showCloseupContentRight:l,showProductDetailPage:n,viewportSize:i,maxWidth:t,descriptionPaneWidth:r,inCommentFooterRedesignExp:s,isCloseupRelatedPinsAboveTheFoldEnabled:o,isCommentAttachmentSelectorOpen:d,isCommentThreadExpanded:u,isMediaViewerOpen:c,isPinNoteExpanded:g,isProductDetailsExpanded:p,isShoppingModuleExpanded:m,setIsCommentAttachmentSelectorOpen:h,setIsCommentThreadExpanded:_,setIsMediaViewerOpen:y,setIsPinNoteExpanded:f,setIsProductDetailsExpanded:S,setIsShoppingModuleExpanded:k,closeupWithinMasonryEnabled:x,peekCloseupEnabled:v,isInRemoveMagnifyingGlassVariant:b,setAbortNoActionPlacementTimeout:P,clientTrackingParams:T,isCloseupMediaViewerOpen:w,setIsCloseupMediaViewerOpen:F})=>({paneWidth:e,pdpCarouselSlotToPaneRatio:a,showCloseupContentRight:l,showProductDetailPage:n,viewportSize:i,maxWidth:t,descriptionPaneWidth:r,isCommentAttachmentSelectorOpen:d,inCommentFooterRedesignExp:s,isCloseupRelatedPinsAboveTheFoldEnabled:o,isCommentThreadExpanded:u,isCloseupMediaViewerOpen:w,isMediaViewerOpen:c,isPinNoteExpanded:g,isProductDetailsExpanded:p,isShoppingModuleExpanded:m,setIsCommentAttachmentSelectorOpen:h,setIsCommentThreadExpanded:_,setIsCloseupMediaViewerOpen:F,setIsMediaViewerOpen:y,setIsPinNoteExpanded:f,setIsProductDetailsExpanded:S,setIsShoppingModuleExpanded:k,closeupWithinMasonryEnabled:x,peekCloseupEnabled:v,isInRemoveMagnifyingGlassVariant:b,setAbortNoActionPlacementTimeout:P,clientTrackingParams:T})),o={showCloseupContentRight:!0,showProductDetailPage:!1,viewportSize:"lg",paneWidth:t.Gg,pdpCarouselSlotToPaneRatio:1,maxWidth:t.u6,descriptionPaneWidth:t.u6-t.Gg,inCommentFooterRedesignExp:!1,isCloseupRelatedPinsAboveTheFoldEnabled:!1,isCommentAttachmentSelectorOpen:!1,isCommentThreadExpanded:!1,isCloseupMediaViewerOpen:!1,isMediaViewerOpen:!1,isPinNoteExpanded:!1,isShoppingModuleExpanded:!1,closeupWithinMasonryEnabled:!1,peekCloseupEnabled:!1,isInRemoveMagnifyingGlassVariant:!1,setAbortNoActionPlacementTimeout:()=>{},setIsCloseupMediaViewerOpen:()=>{},setIsCommentAttachmentSelectorOpen:()=>{},setIsMediaViewerOpen:()=>{},setIsShoppingModuleExpanded:()=>{}},d=(0,n.createContext)(o);function u(){let e=(0,n.useContext)(d);if(!e)throw Error("useCloseupContext must be used within CloseupContextProvider");return e}let c=d},590045:(e,a,l)=>{"use strict";l.d(a,{$T:()=>f,CI:()=>r,Ch:()=>o,ER:()=>y,Gb:()=>d,Gg:()=>i,Hf:()=>x,Ie:()=>p,KP:()=>m,Kn:()=>s,O5:()=>S,Uj:()=>u,bx:()=>h,d2:()=>g,g9:()=>_,iB:()=>v,rv:()=>k,u6:()=>t,zT:()=>c});var n=l(883119);let i=508,t=1016,r=488,s=992,o=672,d=1176,u=.6,c=.84,g=40,p=72,m=740,h=912,_=32,y=16,f=24,S=2,k=1,x=new n.Ry(5),v={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},941128:(e,a,l)=>{"use strict";l.d(a,{Z:()=>k});var n=l(667294),i=l(883119),t=l(144326),r=l(178638),s=l(730212),o=l(235838),d=l(410150),u=l(899850),c=l(716259),g=l(785893);function p({children:e,isImagePinForUnauthOnTablet:a}){let{isAuthenticated:l}=(0,s.B)();return(0,g.jsxs)(i.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:a?"40vw":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!a||void 0,top:!0,zIndex:l?void 0:c.eu,children:[(0,g.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}var m=l(728593),h=l(1006),_=l(154785);function y({setShowClickthroughOverlay:e,isEligibleForPdp:a,isEligibleForDesktopSocialInviteOverlay:l,inviterFirstName:r}){let s=(0,t.ZP)(),o=(0,_.Z)(),u=(0,m.Z)(),c=(0,n.useRef)(),p="desktop"===(0,d.ZP)(),y=r&&l,f=y&&(s.bt(" ,      {{ name }}  Pinterest", "Sign up to join {{ name }} on Pinterest", "pin.closeup.wash.desktop.shareNotification", undefined, true)).replace("{{ name }}",r),S=s.bt(",           ", "Click to make the most out of this idea with a free account", "web.unauth.plp.clickable_wash.header", undefined, true),k=s.bt(",           ", "Tap to make the most out of this idea with a free account", "mweb.unauth.plp.clickable_wash.header", undefined, true);return(0,g.jsx)(i.iP,{onMouseEnter:()=>{y&&(0,h.My)("dweb.main_pin.social.wash.view"),(0,h.My)("dweb.pin.wash.view")},onMouseLeave:()=>{y?o({action:"dismiss",item:"main-pin-social-wash"}):o({action:"dismiss",item:"main-pin-wash"})},onTap:({event:e})=>{p&&(e.preventDefault(),o({action:"click",item:"pin-image"}),l&&r&&o({action:"click",item:"main-pin-social-wash"}),o({action:"click",item:"main-pin-image-signup-modal"}),u({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}}),a&&o({action:"click",item:"pdp-pin-image"}))},children:(0,g.jsxs)(i.xu,{zIndex:new i.Ry(2),children:[(0,g.jsx)(i.xu,{ref:c,alignItems:"center",bottom:!0,"data-test-id":"main-pin-hover-overlay",direction:"column",display:"flex",height:"100%",justifyContent:l?"center":void 0,left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,g.jsx)(i.xu,{alignItems:"center",direction:"column",display:"flex",maxWidth:240,paddingY:10,children:(0,g.jsx)(i.xu,{marginTop:8,children:(0,g.jsx)(i.X6,{align:"center",color:"light",size:y?"500":"400",children:p?f||S:k})})})}),!p&&(0,g.jsx)(i.xu,{marginEnd:4,marginTop:4,position:"absolute",right:!0,top:!0,children:(0,g.jsx)(i.hU,{accessibilityLabel:s.bt("      ", "Close pin clickable wash", "mweb.unauth.plp.clickable_wash.close_button", undefined, true),icon:"cancel",iconColor:"white",onClick:({event:a})=>{a.stopPropagation(),e&&(e(!1),o({action:"dismiss",item:"main-pin-hover-overlay"}))},size:"md"})})]})})}var f=l(696724),S=l(65895);let k=e=>{let a=(0,t.ZP)(),{alt:l,clickthroughOverlayOptions:c,color:m,isFlashlightPage:h,naturalHeight:_,naturalWidth:k,placeholder:x,pwtElementTimingId:v,pwtSurfaceContext:b,setShowClickthroughOverlay:P,showSpinner:T,src:w,stickyFooter:F,isEligibleForPdp:I}=e,E=!(0,u.Z)(),{isAuthenticated:A}=(0,s.B)(),L=(0,d.ZP)(),C="desktop"===L,K=(0,n.useRef)(),[R,D]=(0,n.useState)(!E||!!w&&!!x&&x===w),j=(0,n.useRef)(""),O=()=>{b&&b.markConstraintComplete("PinPageMainImageRendered")};(0,n.useEffect)(()=>{let e=new Image;e.onload=()=>D(!0),e.src=w},[]);let N=(0,n.useRef)(S.a()?.setHasScrolledPastMainContent);(0,n.useEffect)(()=>{let e=(0,o.Z)(()=>{if(K.current){let a=window.scrollY>K.current.offsetTop+K.current.offsetHeight;N.current?.(a),a&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]);let[M,Z]=(0,n.useState)();(0,n.useEffect)(()=>{K.current&&Z(K.current.scrollHeight)},[]);let U=!h&&"tablet"===L,z=E?(0,g.jsx)(r.Z,{alt:l,color:m,elementTiming:v,naturalHeight:_,naturalWidth:k,onLoad:O,src:x}):null;return(0,g.jsxs)(i.xu,{ref:K,"data-test-id":"pin-closeup-image",maxHeight:"100%",maxWidth:"tablet"===L?f.g6:void 0,minHeight:M,overflow:F?void 0:"hidden",position:"relative",rounding:h||"phone"===L?0:6,width:h||"phone"===L?"100%":C?508:f.Hg,children:[!A&&c&&(0,g.jsx)(p,{isImagePinForUnauthOnTablet:!1,children:(0,g.jsx)(y,{inviterFirstName:j.current,isEligibleForPdp:I,setShowClickthroughOverlay:P})}),z&&(U?(0,g.jsx)(i.xu,{overflow:"hidden",rounding:6,children:z}):z),(0,g.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:R?1:0,transition:R&&!C?"opacity .5s ease-in-out":void 0,backgroundColor:m}},left:!0,overflow:U?"hidden":void 0,position:E?"absolute":"relative",right:!0,rounding:U?6:5,top:!0,children:E?(0,g.jsx)(i.Ee,{alt:l,naturalHeight:_,naturalWidth:k,src:w}):(0,g.jsx)(r.Z,{alt:l,color:m,elementTiming:v,naturalHeight:_,naturalWidth:k,onLoad:O,src:w})}),T&&(0,g.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:R?0:1,transition:R?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!R&&(0,g.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,g.jsx)(i.$j,{accessibilityLabel:a.bt("Loading image", "Loading image", "Loading higher resolution image", undefined, false),show:!0})})}),F]})}},243583:(e,a,l)=>{"use strict";l.d(a,{Yg:()=>o,ib:()=>u,nF:()=>g,xX:()=>c});var n=l(297728),i=l(730212),t=l(410150),r=l(415787);let s=({checkExperiment:e})=>{let{group:a}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,l)=>(0,r.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:a,...l}})}},o=()=>{let{isAuthenticated:e}=(0,i.B)(),a=(0,t.HG)(),{checkExperiment:l}=(0,n.F)();return e&&!a?s({checkExperiment:l}):{logStat:()=>{}}},d=0,u=({checkExperiment:e,isAuthMweb:a})=>{if(!a)return;let{logStat:l}=s({checkExperiment:e});(d+=1)<10&&l(`repin_${d}`)};function c({checkExperiment:e,isDesktop:a,isAuthenticated:l}){if(!l)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};if(a){let{anyEnabled:a}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:a,isGraphQLEnabledInGeneral:a,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1}}{let{anyEnabled:a,group:l}=e("auth_mweb_graphql_pin_page");switch(l){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"only_impression_fix":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"enabled_and_impression_fix":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"only_related_pins":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"only_related_pins_and_impression_fix":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"should_render_with_missing_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"render_and_subscribe":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingDataAndSubscribe",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"add_related_pins_latency":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!0};default:return{isGraphQLEnabledInGeneral:a,isGraphQLEnabledForRelatedPins:a,closeupPageSuspenseBehavior:a?"SuspendOnMissingData":null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1}}}}function g(){let{checkExperiment:e}=(0,n.F)(),a=(0,t.HG)(),{isAuthenticated:l}=(0,i.B)();return c({checkExperiment:e,isDesktop:a,isAuthenticated:l})}},598259:(e,a,l)=>{"use strict";l.d(a,{O:()=>c,Z:()=>g});var n=l(667294),i=l(883119),t=l(144326),r=l(297728),s=l(635258),o=l(557443),d=l(785893);let u={xs:12,sm:16,md:20,lg:24};function c({children:e}){let a=(0,t.ZP)();return(0,d.jsx)(i.u,{link:(0,d.jsx)(i.rU,{href:s.vBy,target:"blank",children:(0,d.jsx)(i.xv,{color:"inverse",size:"100",weight:"bold",children:a.bt(" ", "Learn more", "verifiedBadge.tooltip.link", undefined, true)})}),text:a.bt("          Pinterest", "This retailer meets Pinterest's Merchant Guidelines", "merchantVerification.badge.tooltip", undefined, true),children:e})}function g({iconOnly:e,isVerifiedIdentity:a,isVerifiedMerchant:l,showText:s,size:g}){let p=(0,t.ZP)(),{checkExperiment:m}=(0,r.F)(),{surface:h}=(0,o.$)(),_=(0,d.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",children:[(0,d.jsx)(i.JO,{accessibilityLabel:p.bt("      ", "Merchant verification badge icon", "merchantVerification.badge.icon", undefined, true),color:"shopping",icon:"workflow-status-ok",inline:!0,size:u[g]}),s&&(0,d.jsx)(i.xu,{marginStart:2,children:(0,d.jsx)(i.xv,{color:"shopping",inline:!0,weight:"bold",children:p.bt(" ", "Verified merchant", "creator.header.verifiedMerchant", undefined, true)})})]});if((a||l)&&(!h||h&&["AuthHomefeed","RelatedPinGrid","SearchItem","BaseBoardPinGrid"].includes(h))&&"enabled_att_trusted_merchants_and_verified_creators_only"===m("simplify_creator_attributions_web").group)return(0,d.jsx)(n.Fragment,{});let{group:y}=m("simplify_creator_attributions_web");switch(y){case"enabled_att_trusted_merchant_blue_checkmark":return(0,d.jsxs)(n.Fragment,{children:[l&&!e&&(0,d.jsx)(c,{children:_}),l&&e&&_]});case"enabled_att_creators_with_red_checkmarks":return(0,d.jsx)(n.Fragment,{children:a&&(0,d.jsx)(i.JO,{accessibilityLabel:p.bt("    ", "Domain verification icon", "domainVerification.badge.icon", undefined, true),color:"error",icon:"check-circle",size:u[g]})});default:return(0,d.jsxs)(n.Fragment,{children:[l&&!e&&(0,d.jsx)(c,{children:_}),l&&e&&_,a&&!l&&(0,d.jsx)(i.JO,{accessibilityLabel:p.bt("    ", "Domain verification icon", "domainVerification.badge.icon", undefined, true),color:"error",icon:"check-circle",size:u[g]})]})}}},809079:(e,a,l)=>{"use strict";l.d(a,{Z:()=>eF});var n,i,t,r,s,o,d=l(667294);l(167912);var u=l(616550),c=l(883119),g=l(47848),p=l(289762),m=l(144326),h=l(297728),_=l(961754),y=l(414416),f=l(847452),S=l(767552),k=l(39929),x=l(559028),v=l(240760),b=l(1006),P=l(785893);let T=void 0!==n?n:n=l(214172),w=()=>{(0,b.NC)("click_best_pin_board",!0)},F=()=>{(0,b.NC)("click_best_pin_profile",!0)},I=({pin:e})=>{let{pinner:a}=e,{username:l,fullName:n}=a??{},i=a?.imageMediumUrl||a?.imageSmallUrl,t=`/${l??""}/`;return(0,P.jsx)(c.Tg,{fullWidth:!1,href:t,onTap:F,rounding:"circle",children:(0,P.jsx)(x.qE,{name:n??"",outline:!0,size:"sm",src:i??""})})},E=({pin:e})=>{let a=(0,m.ZP)(),{board:l,pinner:n}=e,{name:i,privacy:t,url:r}=l??{},s=l?.entityId||"",{username:o,fullName:d}=n??{},u=`/${o??""}/`,g=(0,P.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,P.jsx)(c.rU,{display:"inlineBlock",href:u,onClick:F,underline:"hover",children:d})},d);return"protected"===t?(0,v.nk)(a.bt("{{ pinnerName }}   ", "{{ pinnerName }} saved this Pin", "Showing who saved this pin, but not which board (private board), on closeup", undefined, true),{pinnerName:g}):(0,v.nk)(a.bt("{{ pinnerName }}   {{ boardName }}", "{{ pinnerName }} saved to {{ boardName }}", "Showing who saved this pin to which board on closeup", undefined, true),{pinnerName:g,boardName:(0,P.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,P.jsx)(c.rU,{href:r??"",onClick:w,children:i},"board")},s)})},A=({pinKey:e})=>{let a=(0,g.Z)(T,e);return(0,P.jsxs)(c.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,P.jsx)(I,{pin:a}),(0,P.jsx)(c.xu,{marginEnd:2}),(0,P.jsx)(c.xv,{size:"200",children:(0,P.jsx)(E,{pin:a})})]})},L=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="underline")},C=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="none")};var K=l(488792);function R({pageType:e,pinCreditPrefix:a,pin:l,pinLink:n,viewParameter:i}){let t=(0,m.ZP)(),r=(0,K.Z)();if("topic"!==e.page&&(!l.domain||"Uploaded by user"===l.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",o="topic"===e.page&&!!l.nativeCreator,d=o?l.nativeCreator?.fullName:l.domain;return(0,P.jsx)(c.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,P.jsx)(c.rU,{display:"inlineBlock",href:o?`/${l.nativeCreator?.username||""}/`:n,onClick:()=>{"topic"===e.page?(0,b.NC)("click_topic_best_pin_link"):r({event_type:12,view_type:3,object_id_str:l.entityId,component:85,view_parameter:i})},rel:"nofollow",target:"blank",underline:"hover",children:(0,P.jsx)(c.xv,{size:s,children:(0,v.nk)(t.bt("{{ pinCreditPrefix }} {{ pinCredit }}", "{{ pinCreditPrefix }} {{ pinCredit }}", "Tells the user where the pin is from in the form of \"Saved from <website>\"", undefined, true),{pinCreditPrefix:a,pinCredit:(0,P.jsx)(c.xv,{inline:!0,size:s,weight:"bold",children:"topic"!==e.page?(0,P.jsxs)("span",{onBlur:C,onFocus:L,onMouseLeave:C,onMouseOver:L,children:[" ",l.domain]}):d},o?"creatorProfile":"pinLinkDomain")})})})})}var D=l(953059),j=l(357013),O=l(26473),N=l(178793),M=l(786890),Z=l(220797),U=l(593078),z=l(947956),H=l(756222),G=l(302749);let V=void 0!==i?i:i=l(206146);function B({recipeKey:e}){let a=(0,g.Z)(V,e);if(a?.aggregateRating?.ratingValue&&a.aggregateRating.reviewCount){let e="number"==typeof a.cookTimes?.cook?.m&&"number"==typeof a.cookTimes.prep?.m?`${a.cookTimes.cook.m+a.cookTimes.prep.m} minutes \xb7 `:"";return(0,P.jsxs)(d.Fragment,{children:[(0,P.jsx)(G.Z,{max_rating:a.aggregateRating.bestRating,rating:a.aggregateRating.ratingValue},a.aggregateRating.ratingValue),(0,P.jsx)(c.xv,{inline:!0,size:"200",children:` ${a.aggregateRating.reviewCount} \xb7 ${e}`})]})}return null}var W=l(730212);let Y=void 0!==t?t:t=l(727128),$=e=>{let a=null;e.lastRepinDate&&(a=new Date(e.lastRepinDate));let l=null;return(e.createdAt&&(l=new Date(e.createdAt)),a)?l?a>l?a:l:a:l},Q=e=>{let a="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return a;let l=$(e);if(l&&l.getFullYear()===new Date().getFullYear()){let n=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:i}=e;n.has(i)&&(a=l?(0,P.jsx)(D.Z,{dateFormatType:D.k.LONG_MONTH_YEAR,useUTC:!1,value:l}):"")}return a},q=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),X=(e,a)=>{let l=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),n=l.getTime(),i=new Date().getTime();return null==a||i-n<=31536e6*a?(0,P.jsx)(D.Z,{dateFormatType:D.k.LONG_MONTH_YEAR,useUTC:!1,value:l}):""};function J(e){let{pinKey:a,viewportSize:l,pageType:n}=e,i=(0,g.Z)(Y,a),{pinCreditPrefix:t,pinLink:r}=(0,Z.Z)(i),s=(0,U.Z)(i),{description:o}=(0,M.eK)({richMetadataDescription:i.richMetadata?.description,richSummaryDisplayName:i.richSummary?.displayName,closeupUnifiedDescription:i.closeupUnifiedDescription});"videos_category"===n.page&&(o=(0,M.kt)(o,i.nativeCreator?.username||""));let d="wide"===l,u=(0,M.Ly)({pinTitle:i.title,gridTitle:i.gridTitle,richSummaryDisplayName:i.richSummary?.displayName??"",richMetadataTitle:i.richMetadata?.title??"",storyPinDataId:i.storyPinDataId,storyPinDataMetadataPinTitle:i.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:i.pinJoin?.visualAnnotation});(i.gridTitle||"").trim()&&u!==i.gridTitle&&(u=(0,M.EU)(i.gridTitle,200));let p=(0,N.r)(i.richMetadata?.recipe?.name,!!i.richMetadata?.recipe?.categorizedIngredients,i.richMetadata?.recipe?.fromAggregatedData??!1)?i.richMetadata?.recipe:null,m=q(i)&&X(i,2),h=Q(i)||m,{isBot:_,isSocialBot:y}=(0,W.B)();return(0,P.jsx)(c.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,P.jsxs)(c.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,P.jsx)(R,{pageType:n,pin:{entityId:i.entityId,domain:i.domain||"",nativeCreator:i.nativeCreator&&{fullName:i.nativeCreator.fullName,username:i.nativeCreator.username}},pinCreditPrefix:"topic"===n.page&&i.nativeCreator?"Created by":t,pinLink:r??"",viewParameter:(0,z.Z)({hasPin:!0,hasPinRichMetadata:!!i.richMetadata,hasPinRichMetadataProducts:!!i.richMetadata?.products,hasPinRichMetadataArticle:!!i.richMetadata?.article,hasPinRichMetadataRecipe:!!i.richMetadata?.recipe,hasPinStoryPinData:!!i.storyPinData})}),(0,P.jsx)(c.kC,{direction:"row",justifyContent:"between",children:(0,P.jsx)(c.xu,{display:"flex",marginEnd:d?0:3,marginTop:d?3:0,overflow:"hidden",children:u&&(0,P.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:600,fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:u})})}),h?(0,P.jsx)(c.xu,{marginTop:1,children:(0,P.jsx)(c.xv,{color:"subtle",children:h})}):null,o&&(0,P.jsx)(c.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,P.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[p&&(0,P.jsx)(B,{recipeKey:p}),o]})}),p&&(0,P.jsx)(H.Z,{marginOverrides:p?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:p.categorizedIngredients,name:p.name,image:(0,O.Z)({imagesUrls:s,embedSrc:i.embed?.src,embedType:i.embed?.type,excludeOriginals:!_&&!y})}}}),(0,P.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:[(0,P.jsx)(A,{pinKey:i}),(0,P.jsx)(c.kC,{alignItems:"stretch",justifyContent:"end",children:!i.repinCount||i.repinCount<1?null:(0,P.jsxs)(c.kC,{alignItems:"center",justifyContent:"start",children:[(0,P.jsx)(c.JO,{accessibilityLabel:"Pin",color:"subtle",icon:"pin",size:12}),(0,P.jsx)(c.xv,{color:"default",inline:!0,size:"100",children:(0,P.jsx)(j.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:i.repinCount})})]})})]})]})})}var ee=l(409416),ea=l(200017),el=l(282999),en=l(488379),ei=l(509781),et=l(154785),er=l(499068),es=l(868808),eo=l(969119),ed=l(74264),eu=l(665992),ec=l(122882),eg=l(472921),ep=l(682661),em=l(919122),eh=l(124747);let e_=0,ey="",ef=void 0!==r?r:r=l(407303);function eS(e){let{imageSpec_564x:a,imageSpec_orig:l,imageSignature:n}=e,i=a&&l,{url:t}=i??{},r=i?.width??1,s=i?.height??void 0;return"number"==typeof r&&"number"==typeof s&&r>564&&(s*=564/r,r=564),{width:r,height:s,url:t,imageSignature:n}}let ek=({data:e,index:a,viewParameter:l,productsURL:n})=>{switch(e.type){case"pin":return(0,P.jsx)(ep.ZP,{duploQueryRef:null,pinId:e.id,slotIndex:a,viewParameter:l,viewType:72});case"story":return n&&(0,P.jsx)(k.Z,{dangerouslySetActionUrl:n,slotIndex:a,story:e});default:return null}},ex=({resourceOptions:e})=>{let a=(0,m.ZP)(),{data:l,isAtEnd:n,isFetching:i,fetchMore:t}=(0,_.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,u.TH)(),s=`${r.pathname}products/${r.search}`;return(0,P.jsxs)(d.Fragment,{children:[l&&(0,P.jsx)(eh.Z,{customLayoutType:"desktopFlashlight",feedItems:l.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:t,hasNext:n,isLoadingNext:i,refetch:()=>void 0},renderFeedItem:(e,a)=>ek({data:e,index:a,viewParameter:3050,productsURL:s})}),(0,P.jsx)(c.$j,{accessibilityLabel:a.bt("     ...", "Loading visual search results...", "unauthDesktopVisualSearch.flashlightFeed.loading", undefined, true),show:i})]})},ev=({resourceOptions:e})=>{let a=(0,m.ZP)(),{data:l,isAtEnd:n,isFetching:i,fetchMore:t}=(0,_.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,P.jsxs)(d.Fragment,{children:[l&&(0,P.jsx)(eh.Z,{customLayoutType:"desktopFlashlight",feedItems:l||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:t,hasNext:n,isLoadingNext:i,refetch:()=>void 0},renderFeedItem:(e,a)=>ek({data:e,index:a,viewParameter:3334})}),(0,P.jsx)(c.$j,{accessibilityLabel:a.bt("       ...", "Loading visual search product results...", "unauthDesktopVisualSearch.flashlightProductFeed.loading", undefined, true),show:i})]})};function eb({pinKey:e}){let a=(0,m.ZP)(),{isRTL:l}=(0,W.B)(),n=(0,K.Z)(),i=(0,u.k6)(),t=(0,u.TH)(),r=(0,d.useRef)(),s=(0,u.$B)(),o=(0,et.Z)(),{pinId:p}=(0,y.Z)(s.params.id||""),h=(0,es.mB)(t.search),_=(0,S.Z)(t),k=function(e){let a=parseInt(e??"",10);switch(a){case 1:case 2:case 3:case 4:case 5:case 6:return a;default:return}}(h.cropSource),x=(0,el.hd)(t),v=(0,g.Z)(ef,e),{getNormalizedPinImage:b}=(0,en.Z)({pinKey:v});if((0,d.useEffect)(()=>{if(!_&&v){let{width:e,height:a}=b(),l=(0,eg.Z)({cropArea:{h:a-2*ee.SP,w:e-2*ee.SP,x:ee.SP,y:ee.SP},isProductPage:x,pinId:p,surfaceType:"flashlight"});i.replace(l)}},[b,i,_,x,v,p]),(0,eo.Z)(()=>{n({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:p}})}),(0,d.useEffect)(()=>{let e=r.current;return e&&ey===p&&(e.scrollTop=e_),()=>{e&&(e_=e.scrollTop,ey=p)}}),!v)return(0,P.jsx)(ei.Z,{objectId:"",view:72,children:(0,P.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:er.Pw}},position:"relative",children:(0,P.jsx)(c.$j,{accessibilityLabel:a.bt("    ", "Loading Pin data", "unauthDesktopFlashlightPage.loadingPinData", undefined, true),show:!0})})});let{imageSignature:T,description:w}=v,{width:F,height:I,url:E}=eS(v),A=function({initialCropArea:e,pin:a}){let l;if(e)l={...e};else{let{visualObjects:e}=a,{width:n=1,height:i=1}=eS(a);if(e&&e.length){let{x:a,y:t,w:r,h:s}=e[0];l=(0,eu.Z)({cropArea:{x:a,y:t,w:r,h:s},scaledWidth:n,scaledHeight:i})}else{let[e,a]=[n/6,i/6],[t,r]=[n-2*e,i-2*a];l={x:e,y:a,w:t,h:r}}}return{x:Math.floor(l.x??0),y:Math.floor(l.y??0),w:Math.floor(l.w??0),h:Math.floor(l.h??0)}}({initialCropArea:_,pin:v}),L=t.state&&t.state.internalNavigation,C=F+f.n,R=(C??1)+24,D={pin_id:p,imageSignature:T,crop:(0,ed.Z)({cropArea:A,scaledWidth:F,scaledHeight:I}),crop_source:k||5},j={__style:{top:140}};return(0,P.jsx)(ei.Z,{objectId:"",view:72,children:(0,P.jsxs)(d.Fragment,{children:[(0,P.jsxs)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new c.Ry(4),children:[(0,P.jsx)(c.xu,{left:!0,position:"absolute",children:(0,P.jsx)(em.Z,{})}),(0,P.jsx)(c.xu,{flex:"grow",children:(0,P.jsx)(c.X6,{align:"center",size:"400",children:x?a.bt("   ", "Shop similar items", "unauthDesktopFlashlightPage.flashlightProductsFeed.header", undefined, true):a.bt("  ", "Visually similar results", "unauthDesktopFlashlightPage.flashlightFeed.header", undefined, true)})})]}),x?(0,P.jsx)(c.xu,{dangerouslySetInlineStyle:j,position:"relative",children:(0,P.jsx)(ev,{resourceOptions:D})}):(0,P.jsxs)(c.xu,{display:"flex",paddingX:12,children:[(0,P.jsxs)(c.xu,{ref:r,dangerouslySetInlineStyle:j,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:C,zIndex:new c.Ry(4),children:[(0,P.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{width:F,height:I}},"data-test-id":"flashlight-enabled-image",children:(0,P.jsxs)(c.zd,{height:I,rounding:2,width:F,children:[(0,P.jsx)(c.Ee,{alt:w??"",naturalHeight:I??1,naturalWidth:F??1,src:E??""}),(0,P.jsx)(ea.Z,{customCropper:function({origCrop:e,cropSource:a}){let l=window.location.pathname+window.location.search,n=(0,eg.Z)({cropArea:e,cropSource:a??6,isProductPage:x,pinId:p,surfaceType:"flashlight"});o({action:"trigger",item:"cropper-changed",within:"flashlight-page"}),n!==l&&p&&i.replace({pathname:`/pin/${p}/visual-search/`,search:(0,ec.Z)({cropArea:e,cropSource:a??6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},imageSignature:T??void 0,imageSize:{height:I,width:F},initialCropArea:A,pinKey:v,showAnimation:!L,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,P.jsx)(c.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:F??1,position:"relative",children:(0,P.jsx)(J,{pageType:{isAuth:!1,page:"flashlight"},pinKey:v,viewportSize:"narrow"})})]}),(0,P.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...j.__style,...l?{marginRight:`${R}px`}:{marginLeft:`${R}px`}}},position:"relative",width:"100%",children:(0,P.jsx)(ex,{resourceOptions:D})})]})]})})}let eP=void 0!==s?s:s=l(925517),eT=void 0!==o?o:o=l(572394);function ew(){let{checkExperiment:e}=(0,h.F)(),a=(0,u.$B)(),{pinId:l}=(0,y.Z)(a.params.id||""),n=e("unauth_dweb_graphql_flashlight_pinResource").anyEnabled,i=(0,p.Z)({strategy:n?"GRAPHQL":"LEGACY",query:eT,variables:{pinId:l},options:{fetchPolicy:"store-or-network"},transformGraphQL:e=>e.v3GetPinQuery?.__typename==="V3GetPin"?e.v3GetPinQuery.data:null,useGetLegacyData:({pinId:e})=>(0,_.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}}).data}),t=(0,g.Z)(eP,i);return(0,P.jsx)(eb,{pinKey:t})}function eF(){let e=(0,m.ZP)();return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(c.$j,{accessibilityLabel:e.bt("    ", "Loading Pin data", "unauthDesktopFlashlightPage.loadingPinData", undefined, true),show:!0}),children:(0,P.jsx)(ew,{})})}},696724:(e,a,l)=>{"use strict";l.d(a,{$K:()=>r,Hg:()=>i,g6:()=>t,w6:()=>n});let n=(e,a)=>Array.from({length:a-e},(a,l)=>l+e),i=508,t=600;function r(e){return null!=e}},578406:(e,a,l)=>{"use strict";l.d(a,{N4:()=>t,Wh:()=>n,hr:()=>i});let n=e=>e.bt(",   ", "Log in to continue", "limitedLogin.modalHeader.default", undefined, true),i=e=>e.bt(" ! ,        Pinterest", "You're almost there! Log in to access all of Pinterest", "loginModal.limitedLogin.subheader", undefined, true),t=({i18n:e,toFollow:a})=>a?e.bt(",   ", "Log in to follow", "limitedLogin.modalHeader.follow", undefined, true):e.bt(",    ", "Log in to unfollow", "limitedLogin.modalHeader.unfollow", undefined, true)},934648:(e,a,l)=>{"use strict";l.d(a,{Z:()=>s});var n=l(144326),i=l(410150),t=l(754143),r=l(578406);let s=()=>{let e=(0,n.ZP)(),a=(0,i.HG)(),{viewer:l,loginForMore:s,limitedLoginModalSubheader:o,limitedLoginModalNextLocation:d}=(0,t.H)();return"LIMITED_LOGIN"===l.type?({modalHeader:l,nextLocation:n})=>i=>{let t=null;i&&(i.nativeEvent&&i.nativeEvent instanceof Event?t=i:i.event&&(t=i.event)),t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()),s?.setVisible(!0),o?.setText(l||(a?r.hr(e):r.Wh(e))),n&&d?.setRoute(n)}:({fn:e})=>e}},132245:(e,a,l)=>{"use strict";l.d(a,{Z:()=>aa});var n,i,t,r,s,o,d,u,c,g,p,m,h=l(667294);l(167912);var _=l(616550),y=l(883119),f=l(602185),S=l(47848),k=l(289762),x=l(144326),v=l(297728),b=l(957486),P=l(931397),T=l(414416),w=l(343931),F=l(767552),I=l(409416),E=l(488379),A=l(691566);let L=void 0!==n?n:n=l(478976);var C=l(868808),K=l(811036),R=l(12886),D=l(74264),j=l(425423),O=l(961754),N=l(847452),M=l(573706),Z=l(136061),U=l(785893);function z({arrowType:e,pinId:a,viewParameter:l,viewType:n}){let i=(0,x.ZP)(),t=(0,_.k6)(),{previous:r}=(0,Z.Hv)(),{logContextEvent:s}=(0,M.v)();return(0,U.jsx)(y.xu,{"data-test-id":"go-back-button",children:(0,U.jsx)(y.hU,{accessibilityLabel:i.bt("", "Go back", "Accessible icon for close button", undefined, true),icon:e??"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(s({event_type:101,view_type:n,element:34,view_parameter:l}),0===r.length){t.replace(`/pin/${a}/`);return}t.goBack()}})})}var H=l(732533),G=l(635284),V=l(730212),B=l(547007);function W({buttonText:e,handleDrawerClose:a,isDrawerOpen:l,onClick:n,largeSize:i=!1,reversed:t=!1,invertWhenDrawerIsOpen:r=!1,hasProductFiltersApplied:s=!1}){let o=(0,x.ZP)(),d=r&&l,u=(0,U.jsx)(y.JO,{accessibilityLabel:"",color:d?"light":"dark",icon:"filter"},"filterIcon"),c=e&&(0,U.jsx)(y.xv,{align:"center",color:d?"inverse":"default",weight:"bold",children:e},e);return(0,U.jsx)(y.iP,{accessibilityLabel:o.bt("", "Filter", "productsFilterButton", undefined, true),onTap:()=>{l?a():n()},rounding:"pill",children:(0,U.jsxs)(y.xu,{position:"relative",children:[(0,U.jsx)(y.xu,{alignContent:"center",color:d?"dark":"secondary",dangerouslySetInlineStyle:i?{__style:{padding:"18px"}}:void 0,display:"flex",justifyContent:"center",minHeight:40,paddingX:4,rounding:"pill",children:(0,U.jsx)(y.kC,{alignItems:"center",gap:{row:2,column:0},children:t?[c,u]:[u,c]})}),s&&(0,U.jsx)(y.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},display:"flex",height:14,justifyContent:"center",minWidth:14,position:"absolute",right:!0,rounding:"pill",top:!0})]})})}function Y({filtersText:e,handleDrawerClose:a,handleDrawerOpen:l,isDrawerOpen:n,isProductOnlyFeed:i,pinId:t,showFilter:r,title:s,viewParameter:o,viewType:d}){let{logContextEvent:u}=(0,M.v)(),{isRTL:c}=(0,V.B)(),g=(0,h.useRef)(null);(0,h.useEffect)(()=>(r&&u({event_type:120,view_type:d,component:13467,element:11735,view_parameter:o}),g.current&&G.Z.addObstruction("top",g.current),()=>{g.current&&G.Z.removeObstruction("top",g.current)}),[r]);let p=()=>{u({event_type:101,view_type:d,component:13467,element:11735,view_parameter:o}),l&&l()};return(0,U.jsx)(B.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,U.jsxs)(y.xu,{ref:g,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",justifyContent:"center",minHeight:60,position:"absolute",top:!0,width:"100%",children:[(0,U.jsx)(y.xu,{left:!c,marginStart:5,position:"absolute",right:c,children:(0,U.jsx)(z,{arrowType:i?"directional-arrow-left":"cancel",pinId:t,viewParameter:o,viewType:d})}),(0,U.jsx)(H.Z,{title:s}),r&&"boolean"==typeof n&&p&&e&&a&&(0,U.jsx)(y.xu,{"data-test-id":"filter-button",left:c,marginEnd:12,position:"absolute",right:!c,children:(0,U.jsx)(W,{buttonText:e,handleDrawerClose:a,isDrawerOpen:n,onClick:p})})]})})}var $=l(200017),Q=l(770975);let q=void 0!==i?i:i=l(306569);function X({cropArea:e,description:a,height:l,imageSignature:n,imageUrl:i,pinId:t,pinKey:r,requestParams:s,showAnimation:o,surfaceType:d,trafficSource:u,viewParameter:c,width:g}){let p=(0,S.Z)(q,r),m=(0,Q.E)();return(0,U.jsx)(y.xu,{"data-test-id":"flashlight-enabled-image",height:l,width:g,children:(0,U.jsxs)(y.zd,{height:l,rounding:4,width:g,children:[(0,U.jsx)(y.Ee,{alt:a,naturalHeight:l,naturalWidth:g,onLoad:()=>{m&&m.markConstraintComplete("visualSearchMainPinImageRender")},src:i}),(0,U.jsx)($.Z,{imageSignature:n,imageSize:{height:l,width:g},initialCropArea:e,pinId:t,pinKey:p,requestParams:s,showAnimation:!!o,surfaceType:d,trafficSource:u,viewParameter:c})]})})}var J=l(339842),ee=l(354174);let ea=()=>{let{checkExperiment:e}=(0,v.F)(),{anyEnabled:a}=e("web_search_hybrid_object_level_onebar");return a};var el=l(587062);function en(){let e=(0,Q.E)();return a=>{e&&a&&("remove"===a?e.removeConstraint("shoppingModuleRender"):"complete"===a&&e.markConstraintComplete("shoppingModuleRender"))}}var ei=l(679482),et=l(769064),er=l(912985),es=l(682661);function eo({action:e,component:a,dangerouslySetActionUrl:l,element:n,contextLogData:i,hasPwtConstraint:t,id:r,objects:s,surface:o,viewType:d,viewParameter:u}){let{logContextEvent:c}=(0,M.v)(),g=en(),{url:p,text:m}=e||{},h=p&&m?e=>(0,U.jsx)(er.Z,{coverImages:e.images,height:ei.yF,onClick:()=>c({event_type:101,view_type:d,view_parameter:u,component:a,element:n,aux_data:{story_id:r,...i}}),text:m,url:l??p,width:ei.yF},"actionBubble"):null,{containerRef:_,itemsToRender:f,actionItem:S}=(0,et.n)({items:s,itemWidth:ei.yF,itemGap:ei.oX,actionItemType:h?"one":void 0});return t&&g&&g(f&&f.length>0?"complete":"remove"),(0,U.jsxs)(et.Z,{containerRef:_,itemGap:ei.oX,children:[f.map((e,l)=>(0,U.jsx)(y.xu,{"data-grid-item":"true",flex:"none",width:ei.yF,children:(0,U.jsx)(es.ZP,{auxData:i,componentType:a,duploQueryRef:null,pin:e,pinId:e.id,pinImageCrop:{height:ei.yF,width:ei.yF},slotIndex:l,surface:o??"ShoppingDynamicHeightGrid",viewParameter:u,viewType:d})},e.id)),S&&h?.(S)]})}function ed({title:e}){return(0,U.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:55}},"data-test-id":"unified-feed-subheader",display:"flex",justifyContent:"center",children:(0,U.jsx)(y.X6,{accessibilityLevel:2,size:"400",children:e})})}var eu=l(794352),ec=l(87416);let eg={flashlight:72,stela:427,stl:427};function ep({pinId:e,surfaceType:a,visualSearchFlashlightUnifiedResource:l}){let n=(0,_.TH)(),i=en(),{data:t,isLoaded:r}=l,s=t?.results||[],o=a?eg[a]:72;i&&(!s&&r||s&&!s.some(e=>"story"===e.type&&"unified_visual_feed_product_upsell"===e.story_type))&&i("remove");let d=s.filter(e=>"story"===e.type);return(0,U.jsx)(h.Fragment,{children:d.map((a,l)=>{if("story"!==a.type)return null;let{action:i,id:t="",objects:r,story_type:s,title:d}=a,u=d?.format||"",c=(0,C.mB)(n.search),g=(0,C.mB)(i?.url).full_feed_title||"";c.full_feed_title=(0,eu.Z)(g);let p=(0,C.XP)(c),m=`/pin/${e}/visual-search/products/?${p}`;switch(s){case"stela_shop":case"unified_visual_feed_product_upsell":return(0,U.jsx)(ec.qS,{auxData:{story_type:s},component:14339,loggingId:t,objectIdStr:t,slotIndex:l,viewParameter:3462,viewType:o,children:({impressionTrackerRef:e})=>(0,U.jsxs)(y.xu,{ref:e,children:[u&&(0,U.jsx)(ed,{title:u}),(0,U.jsx)(y.xu,{"data-test-id":"unified-feed-stela-story",marginBottom:12,marginTop:4,children:(0,U.jsx)(eo,{action:i,component:14339,contextLogData:{story_type:s},dangerouslySetActionUrl:m,element:179,hasPwtConstraint:!0,id:t,objects:r,surface:"ShoppingModule",viewParameter:3462,viewType:o})})]})},t);case"unified_visual_feed_organic_header":return(0,U.jsx)(ec.qS,{auxData:{story_type:s},component:14339,loggingId:t,objectIdStr:t,slotIndex:l,viewParameter:3462,viewType:o,children:({impressionTrackerRef:e})=>(0,U.jsx)(y.xu,{ref:e,marginBottom:4,children:(0,U.jsx)(ed,{title:a?.title?.format||""})})},t);default:return null}})})}var em=l(945034),eh=l(847881);let e_=void 0!==t?t:t=l(441089);function ey({isFilterOpened:e,isProductOnlyFeed:a,oneBarModules:l,pinKey:n,surfaceType:i,viewParameter:t,viewType:r,visualSearchFlashlightUnifiedResource:s}){let o=(0,S.Z)(e_,n),d=ea(),u="stl"===i,c=u||a,{data:g}=s,p=g?.search_identifier;return(0,U.jsxs)(h.Fragment,{children:[d&&l&&l.length>0&&(0,U.jsx)(y.xu,{position:"relative",zIndex:new y.Ry(1),children:(0,U.jsx)(eh.v,{children:(0,U.jsx)(el.f,{children:(0,U.jsx)(ee.Z,{oneBarModulesKey:null,oneBarModulesRest:l,paddingX:8})})})}),!u&&(0,U.jsx)(ep,{pinId:o.entityId,surfaceType:i,visualSearchFlashlightUnifiedResource:s}),(0,U.jsx)(em.Z,{commerceData:{is_product_only_feed:c},isFilterOpened:e,isProductFeed:c,searchId:p,viewParameter:t,viewType:r,visualSearchFlashlightUnifiedResource:s})]})}var ef=l(213512),eS=l(656817),ek=l(212515),ex=l(692960),ev=l(509781),eb=l(969119),eP=l(240760),eT=l(472921);l(422578);var ew=l(151958);let eF=void 0!==r?r:r=l(682230);var eI=l(897128),eE=l(829413),eA=l(66560);let eL=({data:e,itemIdx:a})=>{let l=(0,eA.S6)(),n=(e.id?l(e.id):null)||e;return(0,U.jsx)(es.rX,{duploQueryRef:null,pinId:n.id,pinKey:null!=n?{type:"deprecated",data:n}:null,slotIndex:a,surface:"RelatedProductsFeed",viewParameter:3334,viewType:72})};function eC({visualLiveSearchProductFeedResourceData:e}){let a=(0,x.ZP)(),{data:l,isAtEnd:n,isLoaded:i,isFetching:t,fetchMore:r}=e,s=Array.isArray(l)?l:l?.results;return i?s&&0!==s.length?(0,U.jsx)(eE.Z,{isAtEndOfFeed:n,itemCount:s.length,children:(0,U.jsx)(eI.default,{columnWidth:ei.yF,items:s,loadItems:()=>{t||n||r()},renderItem:e=>(0,U.jsx)(eL,{...e}),scrollContainer:()=>window,virtualize:!1})}):null:(0,U.jsx)(y.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,U.jsx)(y.$j,{accessibilityLabel:a.bt("   ", "Loading related products", "Label for loading spinner", undefined, true),show:!0})})}var eK=l(50165),eR=l(39929);let eD=void 0!==s?s:s=l(604733);function ej({pinKey:e,viewParameter:a,visualLiveSearchResourceData:l}){let n=(0,x.ZP)(),{hasSimplifiedPinGridExpLoaded:i}=(0,eK.$)(),t=(0,S.Z)(eD,e),{data:r,isFetching:s,fetchMore:o}=l,d=r?.results,u=r?.search_identifier;return(0,U.jsxs)(h.Fragment,{children:[d&&u&&(0,U.jsx)(y.Rk,{columnWidth:ei.yF,items:d,loadItems:o,minCols:1,renderItem:({data:e,itemIdx:l})=>(function({data:e,itemIdx:l}){let n=`${window.location.pathname}products/${window.location.search}&full_feed_title=${encodeURIComponent("Shop similar items")}`;return"story"===e.type?(0,U.jsx)(eR.Z,{dangerouslySetActionUrl:n,slotIndex:l,story:e}):"pin"===e.type?(0,U.jsx)(es.ZP,{auxData:{search_identifier:u,image_signature:t.imageSignature},duploQueryRef:null,pin:e,pinId:e.id,slotIndex:l,surface:"FlashlightResultGrid",viewData:{search_identifier:u},viewParameter:a,viewType:72}):null})({data:e,itemIdx:l}),scrollContainer:()=>window}),(0,U.jsx)(y.$j,{accessibilityLabel:n.bt("    ...", "Loading search results...", "FlashlightResultGrid.spinner", undefined, true),show:s||!u||!i})]})}var eO=l(584288),eN=l(210173),eM=l(774649),eZ=l(978574),eU=l(689967),ez=l(588120),eH=l(616890);function eG({categoryFilters:e,cropSource:a,handleCategoryChange:l,viewParameter:n,viewType:i}){let{logContextEvent:t}=(0,M.v)(),r=(0,x.ZP)(),[s,o]=(0,h.useState)(!0);return(0,U.jsxs)(h.Fragment,{children:[(0,U.jsxs)(y.kC,{alignItems:"center",justifyContent:"between",children:[(0,U.jsx)(y.xv,{weight:"bold",children:r.bt(" ", "Product category", "filter.category.header", undefined, true)}),(0,U.jsx)(y.xu,{flex:"none",children:(0,U.jsx)(y.hU,{accessibilityLabel:r.bt("Product category", "Product category", "filter.category.button", undefined, false),icon:s?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{o(!s),t({event_type:101,component:13535,element:11547,view_type:i,view_parameter:n,aux_data:{commerce_data:JSON.stringify({filter:s?"collapsed":"expanded"})}}),s||t({event_type:13,component:13535,view_type:i,view_parameter:n,aux_data:{commerce_data:JSON.stringify({source:(0,eH.Z)({cropSource:a,viewType:i})})}})},size:"sm"})})]}),s?(0,U.jsx)(h.Fragment,{children:e.slice(0,5).map((e,a)=>(0,U.jsxs)(y.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,children:[(0,U.jsx)(y.xu,{flex:"grow",children:(0,U.jsx)(y.xv,{children:e.label.charAt(0).toUpperCase()+e.label.slice(1)})}),(0,U.jsx)(y.xu,{children:(0,U.jsx)(y.hU,{accessibilityLabel:r.bt("    ", "Category Filter Option", "filter.category.option", undefined, true),icon:e.checked?"check-circle":"circle",iconColor:"darkGray",onClick:()=>l(a),size:"sm"})})]},e.label))}):(0,U.jsx)(y.xu,{width:"80%",children:(0,U.jsx)(y.xv,{color:"subtle",size:"200",children:function(e=[],a){let l=e.filter(e=>e.checked),n=l.length;return 0===n?a.bt("", "All", "filter.category.applied", undefined, true):`(${n}) ${l.map(e=>e.label).join(", ")}`}(e,r)})})]})}var eV=l(521378);function eB(e,a){return e.filter(e=>e.checked).map(e=>e[a]).join(",")}function eW(e){return e.map(e=>({...e,checked:!1}))}function eY({listOfAvailableFiltersFromAPI:e,appliedFilterValues:a,key:l,component:n,viewType:i,viewParameter:t}){let{logContextEvent:r}=(0,M.v)(),[s,o]=(0,h.useState)([]),[d,u]=(0,h.useState)(""),[c,g]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{if(e){let n=eW(e),i=a?function(e,a,l){if(e){let n=decodeURI(e).split(",");return a.map(e=>n.includes(e[l])?{...e,checked:!0}:e)}return a}(a,n,l):n;o(i),u(eB(i,l))}},[e,a,l]),{filters:s,setFilters:o,submittedFilters:d,submitFilters:function(e){e!==d&&r({event_type:7472,component:n,view_type:i,view_parameter:t}),u(e),g(!1)},isFilterChanged:c,clearFilters:()=>eW(s),getSelected:e=>eB(e,l),handleFilterChange:function({index:e,pinId:a,auxCommerceData:u}){let c=!s[e].checked,p=[...s.slice(0,e),{...s[e],checked:c},...s.slice(e+1)];o(p),g(d!==eB(p,l)),r({event_type:101,component:n,element:11548,view_type:i,view_parameter:t,aux_data:{pin_id:a,commerce_data:JSON.stringify({[l]:s[e][l],select:c,...u})}})}}}function e$({categoryFilters:e,cropSource:a,domainFilters:l,drawerHeight:n,handleFilterChange:i,onSubmit:t,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:d,width:u,viewParameter:c,viewType:g}){let{logContextEvent:p}=(0,M.v)(),m=(0,x.ZP)();(0,eb.Z)(()=>{p({event_type:13,component:13467,view_type:g,view_parameter:c,aux_data:{commerce_data:JSON.stringify({source:(0,eH.Z)({cropSource:a,viewType:g})})}})});let{category:_,domain:f,max:S,min:k}=o||{},{filters:v,setFilters:b,submittedFilters:P,submitFilters:T,isFilterChanged:w,clearFilters:F,getSelected:I,handleFilterChange:E}=eY({listOfAvailableFiltersFromAPI:l,appliedFilterValues:f,key:"domain",component:13469,viewType:g,viewParameter:c}),{filters:A,setFilters:L,submittedFilters:C,submitFilters:K,isFilterChanged:R,clearFilters:D,getSelected:j,handleFilterChange:O}=eY({listOfAvailableFiltersFromAPI:e,appliedFilterValues:_,key:"label",component:13535,viewType:g,viewParameter:c}),[N,Z]=(0,h.useState)(s),[z,H]=(0,h.useState)(-1),[G,V]=(0,h.useState)(-1),[B,W]=(0,h.useState)(-1),[Y,$]=(0,h.useState)(-1),[Q,q]=(0,h.useState)(!1);(0,h.useEffect)(()=>{if(!s||S&&k||Z(s),k){let e=parseInt(k,10);$(e),V(e)}else V(s?.min_value??-1),$(s?.min_value??-1);if(S){let e=parseInt(S,10);W(e),H(e)}else H(s?.max_value??-1),W(s?.max_value??-1)},[s,S,k]);let{max_value:X,min_value:J,currency_type:ee}=N||{},ea=e=>a=>{let l,n;let i=0>(a||0)?0:a;i&&p({event_type:7472,component:13468,view_type:g,view_parameter:c});let t=!1;"max"===e?(l=i||X,-1===(n=G)&&(n=J),n>l&&(n=Math.max(l-eZ.$,0))):(n=i||0,-1===(l=z)&&(l=X),l<n&&(l=n+eZ.$)),q(t=t||Y!==n||B!==l),V(n),H(l)};(0,h.useEffect)(()=>{d&&d(function({categoryFilters:e,domainFilters:a,minPrice:l,maxPrice:n},i){let t=i.bt("", "Filters", "Filter icon button to open drawer containing price filter and domain filters on related products feed", undefined, true),r=function({categoryFilters:e,domainFilters:a,minPrice:l,maxPrice:n}){return(n||l?1:0)+(a?a.split(",").length:0)+(e?e.split(",").length:0)}({categoryFilters:e,domainFilters:a,minPrice:l,maxPrice:n}),s=r>0?` (${r})`:"";return`${t}${s}`}({categoryFilters:C,domainFilters:P,maxPrice:-1===B||B===X?void 0:B,minPrice:-1===Y||Y===J?void 0:Y},m))},[m,B,Y,C,P,d,X,J]);let el=({categoryParam:e,domainParam:a,maxPrice:l,minPrice:n})=>{i({categoryParam:e,domainParam:a,maxPrice:-1!==l?l:void 0,minPrice:-1!==n?n:void 0}),W(l),$(n),q(!1),(B!==l||Y!==n)&&p({event_type:7472,component:13468,view_type:g,view_parameter:c}),T(a),K(e);let r=-1!==l,s=""!==a,o=""!==e,d=-1!==n?n.toString():"",u=r?l.toString():"",m=s?encodeURI(a):"",h=o?encodeURI(e):"";t&&t({category:h,domain:m,max:u,min:d})};return(0,U.jsxs)(h.Fragment,{children:[(0,U.jsxs)(y.xu,{direction:"column",display:"flex",height:n-50-70,overflow:"scroll",paddingX:1,paddingY:1,width:"100%",children:[(0,U.jsxs)(y.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,U.jsx)(y.xv,{weight:"bold",children:m.bt("", "Filter", "shopping.filter.header", undefined, true)}),(0,U.jsx)(y.zx,{onClick:()=>{H(-1),V(-1),b(F()),L(D()),el({categoryParam:"",domainParam:"",maxPrice:-1,minPrice:-1}),p({event_type:101,component:13467,element:11545,view_type:g,view_parameter:c})},size:"md",text:m.bt("  ", "Clear all", "filter.clear.button", undefined, true)})]}),!!N&&-1!==G&&-1!==z&&(0,U.jsx)(eV.Z,{children:(0,U.jsx)(ez.Z,{cropSource:a,currencyCode:ee,defaultMaxPrice:X,defaultMinPrice:J,disableAutoFormatOnChange:!0,handleMaxPriceChange:ea("max"),handleMinPriceChange:ea("min"),maxPrice:z,minPrice:G,uiType:"slider",viewParameter:c,viewType:g})}),!!A&&A.length>0&&4!==a&&(0,U.jsx)(eV.Z,{children:(0,U.jsx)(eG,{categoryFilters:A,cropSource:a,handleCategoryChange:e=>{O({index:e,pinId:r})},viewParameter:c,viewType:g})}),!!v&&v.length>0&&(0,U.jsx)(eV.Z,{children:(0,U.jsx)(eU.Z,{cropSource:a,filterOptions:v,handleFilterChange:e=>{E({index:e,pinId:r,auxCommerceData:{source:(0,eH.Z)({cropSource:a,viewType:g})}})},showVerifiedMerchants:!0,uiType:"check-circles",viewParameter:c,viewType:g})})]}),(0,U.jsx)(y.xu,{color:"default",display:"flex",justifyContent:"center",position:"fixed",width:u,children:(0,U.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},direction:"row",display:"flex",paddingY:2,children:(0,U.jsx)(y.xu,{marginStart:2,children:(0,U.jsx)(y.sg,{span:6,children:(0,U.jsx)(y.zx,{color:"red",dataTestId:"confirm-filters-button",disabled:!(w||R||Q),onClick:()=>{let e=I(v);el({categoryParam:j(A),domainParam:e,maxPrice:z,minPrice:G}),p({event_type:101,component:13467,element:11546,view_type:g,view_parameter:c})},size:"md",text:m.bt("", "Apply", "filter.apply.button", undefined, true),type:"submit"})})})})})]})}function eQ({categoryFilters:e,cropSource:a,domainFilters:l,isDrawerOpen:n,handleFilterChange:i,handleSubmit:t,pinId:r,priceFilters:s,submittedFilters:o,topOffset:d=0,updateButtonText:u,viewParameter:c=3455,viewType:g}){let p=(0,eO.t)(),[m,_]=(0,h.useState)(0),f=()=>{_(window.innerHeight-p)};return(0,h.useEffect)(()=>(f(),window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}),[]),(0,U.jsx)(y.xu,{color:"default",dangerouslySetInlineStyle:{__style:{marginRight:n?0:-eM.pG,visibility:n?"visible":"hidden",top:p+d}},height:m,left:!0,paddingX:eM.VF,position:"fixed",width:eM.pG,zIndex:new y.Ry(2),children:(0,U.jsx)(e$,{categoryFilters:e,cropSource:a,domainFilters:l,drawerHeight:m,handleFilterChange:i,onSubmit:t,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:u,viewParameter:c,viewType:g,width:eM.pG-eM.VF*eM.vc*2})})}let eq=void 0!==o?o:o=l(187962);function eX(e){let{checkExperiment:a}=(0,v.F)(),l=(0,_.k6)(),n=(0,_.TH)(),i=(0,x.ZP)(),{width:t=0}=(0,eS.Z)()||{},r=(0,j.Z)(),{imageContainerScrollTop:s,imageContainerScrollTopForPinId:o}=(0,ef.t)(),{filters:d,oneBarModules:u,pinKey:c,visualSearchFlashlightUnifiedResourceData:g,visualLiveSearchResourceData:p,visualLiveSearchProductFeedResourceData:m}=e,{cropArea:f,cropSource:k,entrySource:b,handleFilterChange:P,isProductPage:T,requestParams:w,searchQuery:F,submittedFilters:I,surfaceType:L,title:C,trafficSource:K}=r,{category_filters:R,domain_filters:D,price_filters:O}=d||{},M=(0,S.Z)(eq,c),{getNormalizedPinImage:Z}=(0,E.Z)({pinKey:M,maxWidth:A.RZ}),z=["stela","stl"].includes(L),{anyEnabled:H}=a("web_unified_visual_feed"),{anyEnabled:G}=a("web_flashlight_unified_feed"),{anyEnabled:V}=a("web_unified_visual_features_expansion"),B=function({cropSource:e,i18n:a,inFlashlightUFExperiment:l,inStelaUFExperiment:n,inUnifiedVisualFeaturesExpansion:i,isProductPage:t,surfaceType:r,title:s}){let o=a.bt("  ", "Image search", "imageSearch.header", undefined, true),d=a.bt(" ", "Shop the look", "shopTheLook.header", undefined, true),u=(0,eP.nk)(a.bt(" {{ category }}", "Shop {{ category }}", "relatedProducts.stela.header", undefined, true),{category:(s||"").toLowerCase()}).join(""),c=4===e;if(t)return s;if("stl"===r)return c?d:o;let g=l&&"flashlight"===r,p=n&&["stela","stl"].includes(r);return i||g||p?c?"":o:c?u:o}({cropSource:k,i18n:i,inFlashlightUFExperiment:G,inStelaUFExperiment:H,inUnifiedVisualFeaturesExpansion:V,isProductPage:T,surfaceType:L,title:C}),[W,$]=(0,h.useState)(!1),[Q,q]=(0,h.useState)(""),ee=(0,J.Z)(d),{state:ea}=n||{},{internalNavigation:el=!1}=ea||{},{width:en,height:et,url:er}=Z(),es=en+N.n,eo=W?0:12,ed=(0,eO.t)(),eu=(0,eN.Z)(),ec=W?eM.pG:0,eg=T?0:es+4*eo,ep=!T&&H&&"stela"===L,em=!T&&G&&"flashlight"===L,eh=t-eu-ec-eg-N.n,e_=g?.data?.search_identifier||p?.data?.search_identifier||m?.data?.search_identifier||"",[eI,eE]=(0,h.useState)(e_);(0,h.useEffect)(()=>{e_&&eI!==e_&&eE(e_)},[e_,eI]);let eA=(0,h.useRef)(null);(0,eb.Z)(()=>{eA.current&&0!==s.current&&o.current===M.entityId&&(eA.current.scrollTop=s.current)});let eL=z?427:"flashlight"===L?G&&T?427:72:427,eK=z?4===k?3462:3455:"flashlight"===L?G&&4===k?3462:3050:3462,eR=function({entrySource:e,isProductPage:a,pinKey:l,surfaceType:n,viewParameter:i,viewType:t}){let{checkExperiment:r}=(0,v.F)(),{anyEnabled:s}=r("web_unified_visual_feed"),{anyEnabled:o}=r("web_flashlight_unified_feed"),d=(0,S.Z)(eF,l),u=(0,ew.Z)(d)({default:{is_product_only_feed:"stl"===n||a}});if(s||o)return{view_type:t,view_parameter:i,aux_data:u};if(!["stela","stl"].includes(n))return{view_type:t,view_parameter:3050,view_data:{pin_id:d.entityId}};{let a=(d.visualObjects||[]).some(e=>e.isStela);return{view_type:t,view_parameter:i,view_data:{pin_id:d.entityId},aux_data:{commerce_data:JSON.stringify({entrypoint:e,pin_is_stela:a})}}}}({entrySource:b,isProductPage:T,pinKey:M,surfaceType:L,viewParameter:eK,viewType:eL});return(0,U.jsx)(ex.Z,{constraints:function({isProductPage:e,isStl:a,isUnifiedFeed:l}){return e?[]:!l||a?["visualSearchMainPinImageRender"]:l?["shoppingModuleRender","visualSearchMainPinImageRender"]:[]}({isProductPage:T,isStl:"stl"===L,isUnifiedFeed:G||H||V}),measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,U.jsx)(ev.Z,{objectId:eI,view:eL,children:(0,U.jsx)(ek.Z,{log:eR,children:(0,U.jsxs)(y.xu,{"data-test-id":"related-products",children:[(0,U.jsx)(Y,{filtersText:Q,handleDrawerClose:function(){$(!1)},handleDrawerOpen:function(){$(!0)},isDrawerOpen:W,isProductOnlyFeed:T,pinId:M.entityId,showFilter:!(ep||em)&&z&&ee,title:B,viewParameter:eK,viewType:eL}),ee&&(0,U.jsx)(eQ,{categoryFilters:R,cropSource:k,domainFilters:D,handleFilterChange:P??(()=>{}),handleSubmit:function(){let e=(0,eT.Z)({cropArea:f,cropSource:k,isProductPage:T,pinId:M.entityId,requestParams:w,searchQuery:F,surfaceType:L,title:C,trafficSource:K});l.replace(e)},isDrawerOpen:W,pinId:M.entityId,priceFilters:O,submittedFilters:I,topOffset:60,updateButtonText:e=>{q(e)},viewParameter:eK,viewType:eL}),!T&&(0,U.jsx)(y.xu,{ref:eA,bottom:!0,dangerouslySetInlineStyle:{__style:{top:ed+92,left:eu+ec,right:eu+ec}},height:"inherit",marginBottom:3,marginStart:eo,onScroll:()=>{s.current=eA.current?.scrollTop||0,o.current=M.entityId},overflow:"auto",position:"fixed",width:es,children:(0,U.jsx)(X,{cropArea:f,description:M.description??"",height:et,imageSignature:M.imageSignature||"",imageUrl:er,pinId:M.entityId,pinKey:M,requestParams:w,showAnimation:!el&&"flashlight"===L,surfaceType:L,trafficSource:K,viewParameter:eK,width:en})}),(0,U.jsxs)(y.xu,{dangerouslySetInlineStyle:{__style:{top:92,left:ec+eg,right:ec+eg}},paddingX:ei.jC,position:"relative",width:eh,children:[g&&(0,U.jsx)(ey,{isFilterOpened:W,isProductOnlyFeed:T,oneBarModules:u,pinKey:M,surfaceType:L,viewParameter:eK,viewType:eL,visualSearchFlashlightUnifiedResource:g}),!G&&p&&(0,U.jsx)(ej,{pinKey:M,viewParameter:eK,visualLiveSearchResourceData:p}),!G&&m&&(0,U.jsx)(eC,{visualLiveSearchProductFeedResourceData:m})]})]})})})})}let eJ=void 0!==d?d:d=l(574554);function e0(e){let{legacySearchId:a,pinKey:l,resourceOptions:n,setLegacySearchId:i}=e,t=(0,S.Z)(eJ,l),r=(0,O.Z)({name:"VisualLiveSearchProductFeedResource",options:n}),s=r.data?.search_identifier||"";return(0,h.useEffect)(()=>{i&&s&&a!==s&&i(s)}),(0,U.jsx)(eX,{pinKey:t,visualLiveSearchProductFeedResourceData:r})}let e1=void 0!==u?u:u=l(941845);function e6(e){let{legacySearchId:a,pinKey:l,resourceOptions:n,setLegacySearchId:i}=e,t=(0,S.Z)(e1,l),r=(0,O.Z)({name:"VisualLiveSearchResource",options:n}),s=r.data?.search_identifier||"";return(0,h.useEffect)(()=>{i&&s&&a!==s&&i(s)}),(0,U.jsx)(eX,{pinKey:t,visualLiveSearchResourceData:r})}var e2=l(934209);let e4=void 0!==c?c:c=l(376194);function e3(e){let{pinKey:a,resourceOptions:l}=e,n=(0,S.Z)(e4,a),{visualSearchFlashlightUnifiedResource:i,filters:t,oneBarModules:r}=(0,e2.Z)({resourceOptions:l});return(0,U.jsx)(eX,{filters:t,oneBarModules:r,pinKey:n,visualSearchFlashlightUnifiedResourceData:i})}let e7=void 0!==g?g:g=l(383855);function e5({pinKey:e}){let{checkExperiment:a}=(0,v.F)(),l=(0,_.TH)(),n=(0,S.Z)(e7,e),{getInitialCropArea:i}=function({pinKey:e}){let a=(0,S.Z)(L,e),{getNormalizedPinImage:l}=(0,E.Z)({pinKey:a,maxWidth:A.RZ}),{width:n,height:i}=l();return{getInitialCropArea:(0,h.useCallback)(({initialCropArea:e})=>e||{x:I.SP,y:I.SP,w:n-2*I.SP,h:i-2*I.SP},[i,n])}}({pinKey:n}),{getNormalizedPinImage:t}=(0,E.Z)({pinKey:n,maxWidth:A.RZ}),{width:r,height:s}=t(),o=a("web_unified_visual_feed").anyEnabled||a("web_unified_visual_features_expansion").anyEnabled,d=a("web_flashlight_unified_feed").anyEnabled||a("web_unified_visual_features_expansion").anyEnabled,u=(0,C.mB)(l.search),{cropSource:c,filters:g,full_feed_title:p,hybrid_search_param:m,journey_depth:y,search_query:f,source_module_id:k,surfaceType:x,category:b,domain:P,max:T,min:w,q:O,requestParams:N,rs:M}=u,Z=u.entrypoint||null,z=(0,K.Z)(Number(c))||5,H=i({initialCropArea:(0,F.Z)(l,r,s)}),G=l.pathname.includes("/products"),V=x||"flashlight",B=G||"stl"===V?"shopping":"flashlight";Z||(Z=(0,R.Z)({cropSource:z,isProductPage:G,surfaceType:V}));let[W,Y]=(0,h.useState)(parseInt(w,10)||null),[$,Q]=(0,h.useState)(parseInt(T,10)||null),[q,X]=(0,h.useState)(P?decodeURI(P):null),[J,ee]=(0,h.useState)(b?decodeURI(b):null);function ea({minPrice:e,maxPrice:a,domainParam:l,categoryParam:n}){Y(e),Q(a),X(l),ee(n)}let el={categories:J,crop:(0,D.Z)({cropArea:H,scaledWidth:r,scaledHeight:s}),crop_source:z,domains:q,entry_source:B,entrypoint:Z,field_set_key:"shopping_grid_item",filters:g,hybrid_search_param:m,image_signature:n.imageSignature||void 0,is_shopping:function({cropSource:e,inStelaUFExperiment:a,isProductPage:l,surfaceType:n}){return!!l||4===e&&("stl"===n||"stela"===n&&!a)}({cropSource:z,inStelaUFExperiment:o,isProductPage:G,surfaceType:V}),journey_depth:parseInt(y,10)||void 0,pin_id:n.entityId,price_max:$,price_min:W,request_params:N,search_query:f,source:M,source_module_id:k},en=(0,h.useMemo)(()=>({cropArea:H,cropSource:z,entrySource:B,handleFilterChange:ea,isProductPage:G,requestParams:N,searchQuery:O,submittedFilters:{category:b,domain:P,max:T,min:w},surfaceType:V,title:p,trafficSource:M}),[b,H,z,P,B,G,T,w,N,O,V,p,M]);if(!n)return null;let ei="flashlight"!==V||d?(0,U.jsx)(e3,{pinKey:n,resourceOptions:el}):G?(0,U.jsx)(e0,{pinKey:n,resourceOptions:el}):(0,U.jsx)(e6,{pinKey:n,resourceOptions:el});return(0,U.jsx)(j.V,{value:en,children:ei})}let e8=void 0!==p?p:p=l(761650),e9=void 0!==m?m:m=l(4738);function ae({pinId:e,relatedProductsDataRef:a}){let{checkExperiment:l}=(0,v.F)(),n=(0,x.ZP)(),i=l("auth_dweb_graphql_closeup_shop_pinResource").anyEnabled,t=(0,k.Z)({strategy:i?"GRAPHQL":"LEGACY",query:e8,variables:{pinId:e},options:{fetchPolicy:"store-or-network"},transformGraphQL:e=>e.v3GetPinQuery?.data,useGetLegacyData:()=>{let{data:e}=(0,b.Z)(a);return e}}),r=(0,S.Z)(e9,t);return(0,U.jsx)(h.Suspense,{fallback:(0,U.jsx)(y.$j,{accessibilityLabel:n.bt("    ", "Loading Pin data", "RelatedProductsPage.loadingPinData", undefined, true),show:!0}),children:r&&(0,U.jsx)(e5,{pinKey:r})})}function aa(){let e=(0,_.$B)(),{pinId:a}=(0,T.Z)(e.params.id||""),l=(0,P.Z)({name:"PinResource",options:{id:a,field_set_key:"detailed",fetch_visual_search_objects:!0}});return(0,U.jsx)(f.Z,{name:"RelatedProductsPage_RelatedProductsPageWrapper",children:(0,U.jsx)(h.Suspense,{fallback:(0,U.jsx)(w.Z,{}),children:(0,U.jsx)(ae,{pinId:a,relatedProductsDataRef:l})})})}},402151:(e,a,l)=>{"use strict";l.d(a,{KF:()=>u,ZN:()=>s,fv:()=>d,kE:()=>g,yA:()=>o});var n=l(252071),i=l(400416),t=l(900492);function r(e,a,l,i){return n.Z.create("UserFollowResource",{user_id:e,invite_code:i||void 0,aux_data:a?{pin_id:a}:void 0,client_tracking_params:l})}function s(e,a=null,l,n){return i=>{r(e,a,l,n).callCreate().catch(()=>i((0,t.P_)(e,!1))),i((0,t.P_)(e,!0))}}function o(e,a=null,l,n){return async i=>{i((0,t.P_)(e,!0)),await r(e,a,l,n).callCreate().catch(a=>{throw i((0,t.P_)(e,!1)),a})}}function d(e,a=null,l){return n=>{r(e,a,l).callDelete().catch(()=>n((0,t.P_)(e,!0))),n((0,t.P_)(e,!1))}}function u(e,a=null,l){return async n=>{n((0,t.P_)(e,!1)),await r(e,a,l).callDelete().catch(a=>{throw n((0,t.P_)(e,!0)),a})}}let c=(e,a)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:a}}),g=e=>a=>{e.length>0&&((0,i.Z)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e.join(",")}}).catch(()=>a(c(e,!1))),a(c(e,!0)))}},919122:(e,a,l)=>{"use strict";l.d(a,{Z:()=>y});var n=l(545007),i=l(616550),t=l(883119),r=l(609326),s=l(488792),o=l(477058),d=l(793874),u=l(144326),c=l(282999),g=l(864723),p=l(1006),m=l(154785),h=l(410150),_=l(785893);function y({alignIconLeft:e,bgColor:a,color:l,disableRedirect:y=!1,fallbackUrl:f,icon:S="arrow-back",onTouch:k,padding:x,placement:v,shouldUseFallbackUrl:b,size:P="lg",viewParameter:T,viewType:w,isVisualSearch:F}){let I=(0,u.ZP)(),E=(0,i.k6)(),A=(0,i.TH)(),L=(0,h.HG)(),C=(0,n.v9)(e=>e.session.isAuthenticated),K=(0,s.Z)(),R=(0,m.Z)(),D=(0,d.vs)(),{viewType:j,viewParameter:O}=(0,o.SU)(),[N,M]=w?[w,T]:[j,O],Z=()=>A.search&&A.search.includes("?nativeShouldDismiss=true"),U=()=>{let e=g.ZP.getItem(r.pm);A.key||"/ideas"!==f?(0,p.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,p.My)("pinner_conversion.back_button.no_history"),(0,p.My)(`web_back_button_click.${String(v)}.is_auth_${String(C)}`),R({action:"click",item:"back-button"}),N&&K({view_type:N,view_parameter:M,element:34,event_type:102}),k&&k(),y||((!A.key||A.state&&"redirect"===A.state.referrer||b)&&f?E.push(f):A.pathname.includes("/password/reset/")&&Z()?E.push("/login/?dismissWebview=true"):E.goBack())},z=D?d.t4:"white",H=(0,c.am)(A)||F||"white"===l;return(0,_.jsx)(t.xu,{"data-test-id":"back-button",children:e?(0,_.jsx)(t.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===S?-1:-2,width:48,children:(0,_.jsx)(t.hU,{accessibilityLabel:I.bt("", "Back", "navigation button", undefined, true),bgColor:a,icon:S,iconColor:!l&&(!a||["white","lightGray","transparent"].includes(a))?"gray":l,onClick:U,padding:"auto"!==x?x:2,size:P})}):(0,_.jsx)(t.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:L||H?"":z,width:D&&!H?"fit-content":""}},rounding:"circle",children:(0,_.jsx)(t.hU,{accessibilityLabel:I.bt("", "Back", "navigation button", undefined, true),bgColor:a||L?a:"transparent",icon:S,iconColor:!l&&(!a||["white","lightGray","transparent"].includes(a))?"gray":l,onClick:U,padding:"auto"!==x?x:2,size:P})})})}},521378:(e,a,l)=>{"use strict";l.d(a,{Z:()=>t});var n=l(883119),i=l(785893);function t({children:e}){return(0,i.jsx)(n.xu,{paddingY:4,children:e})}},310368:(e,a,l)=>{"use strict";l.d(a,{Z:()=>u});var n=l(883119),i=l(476198),t=l(144326),r=l(961754),s=l(410150),o=l(785893);function d({ideaPinImages:e}){let a=e.map((e,a)=>(0,o.jsx)(n.xu,{borderStyle:"sm",color:"default",dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:a}},height:48,overflow:"hidden",rounding:2,width:28,children:(0,o.jsx)(n.Ee,{alt:"",color:"#696969",fit:"cover",naturalHeight:e?.height??1,naturalWidth:e?.width??1,src:e?.url??""})},a));return(0,o.jsx)(n.kC,{justifyContent:"center",children:(0,o.jsx)(n.kC,{justifyContent:"start",width:{1:28,2:40,3:48}[e.length],children:a})})}function u({handleHide:e,text:a,userId:l,href:u,imageUrl:c}){let g=(0,t.ZP)(),p=(0,s.HG)(),m=(0,r.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:l}}),h=Array.isArray(a)?a.join(" "):a;if(0===(m.data||[]).length)return(0,o.jsx)(i.ZP,{duration:5e3,href:u,onHide:e,text:h,thumbnail:c?{image:(0,o.jsx)(n.Ee,{alt:g.bt("  ,   ", "Image of who you followed", "userFollowingToast.thumbnail.userImage", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:c})}:void 0});let _=(m.data||[]).slice(0,3).map(e=>e.images?.[p?"236x":"170x"]),y=(0,o.jsx)(d,{ideaPinImages:_});return(0,o.jsx)(i.ZP,{_dangerouslySetThumbnail:y,duration:5e3,href:u,onHide:e,text:h})}},866106:(e,a,l)=>{"use strict";l.d(a,{Z:()=>eH});var n,i,t,r=l(410150),s=l(383399),o=l(667294);l(167912);var d=l(616550),u=l(883119),c=l(47848),g=l(289762),p=l(144326),m=l(297728),h=l(692960),_=l(961754),y=l(414416),f=l(545007),S=l(656817),k=l(573706),x=l(679482),v=l(136061),b=l(512541),P=l(775383),T=l(881507),w=l(509781),F=l(499068),I=l(868808),E=l(969119);function A(e,a){let l=0,n=!1,i=-1;return e.forEach((e,t)=>{let{x:r=0,y:s=0,h:o=0,w:d=0}=e,u=function(e,a){let{x:l,y:n,w:i,h:t}=e,{x:r,y:s,w:o,h:d}=a,u=Math.max(l,r),c=Math.min(l+i,r+o),g=Math.max(n,s),p=Math.min(n+t,s+d),m=u<c&&g<p?(c-u)*(p-g):0;return m/(i*t+o*d-m)}(a,{x:r,y:s,h:o,w:d});u>=.9&&u>l&&(l=u,n=!0,i=t)}),{isCropAreaOnDotArea:n,dotIndexToHide:i}}var L=l(811036),C=l(12886),K=l(472921),R=l(891880),D=l(817031),j=l(798920),O=l(793874),N=l(919122),M=l(785893);function Z({handleBackClick:e,viewParameter:a,viewType:l}){let n=(0,O.vs)();return(0,M.jsx)(u.xu,{"data-test-id":"cancelButton",left:!0,margin:2,position:"fixed",top:!0,children:(0,M.jsx)(N.Z,{color:n?"darkGray":"white",disableRedirect:!0,icon:"cancel",isVisualSearch:!0,onTouch:e,padding:3,size:"lg",viewParameter:a,viewType:l})})}var U=l(488792),z=l(164756),H=l(585913),G=l(913574),V=l(49808),B=l(957435),W=l(941128);function Y({pinDominantColor:e,url:a,closeupImageWidth:l,closeupImageHeight:n}){let i=(0,p.ZP)();return(0,M.jsx)(W.Z,{alt:i.bt("  ", "Pin image", "flashlight.cropper.closeupImage", undefined, true),color:e,isFlashlightPage:!0,naturalHeight:n,naturalWidth:l,placeholder:a,showSpinner:!1,src:a})}let $=e=>{let{alt:a,src:l,top:n,left:i}=e;return(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{top:n,left:i}},height:24,position:"absolute",width:24,children:(0,M.jsx)(u.Ee,{alt:a,color:"transparent",naturalHeight:24,naturalWidth:24,src:l})})},Q={backgroundColor:"#000000",opacity:"0.4"};function q({closeupImageUrl:e,closeupImageDims:a,cropArea:{x:l,y:n,w:i,h:t},disableBorder:r,disableHandles:s,handleBackClick:o,onTouchEnd:d,onTouchMove:c,onTouchStart:g,pinDominantColor:m,showBackButton:h,viewParameter:_}){let y=(0,p.ZP)(),{closeupImageWidth:f,closeupImageHeight:S}=a,k=Math.floor(S*n),x=Math.floor(f*l),v=Math.floor(S*t),b=Math.floor(f*i),P=x+b,T=k+v;return(0,M.jsxs)(u.xu,{"data-test-id":"cropper-container",onTouchEnd:d,onTouchMove:c,onTouchStart:g,position:"relative",children:[(0,M.jsx)(Y,{closeupImageHeight:S,closeupImageWidth:f,pinDominantColor:m,url:e??""}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:Q},height:k,left:!0,position:"absolute",top:!0,width:"100%"}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...Q,top:k}},height:v,left:!0,position:"absolute",width:x}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...Q,top:k,left:P}},height:v,position:"absolute",right:!0}),(0,M.jsx)(u.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...Q,top:T}},left:!0,position:"absolute",width:"100%"}),h&&(0,M.jsx)(Z,{handleBackClick:o,viewParameter:_,viewType:427}),!s&&(0,M.jsxs)(u.xu,{"data-test-id":"CropperHandles",children:[(0,M.jsx)($,{alt:y.bt("    ", "Top left cropper handle", "flashlight.cropper.topLeftHandle", undefined, true),left:x-9,src:V,top:k-9}),(0,M.jsx)($,{alt:y.bt("    ", "Top right cropper handle", "flashlight.cropper.topRightHandle", undefined, true),left:P-15,src:B,top:k-9}),(0,M.jsx)($,{alt:y.bt("    ", "Bottom left cropper handle", "flashlight.cropper.bottomLeftHandle", undefined, true),left:x-9,src:H,top:T-15}),(0,M.jsx)($,{alt:y.bt("    ", "Bottom right cropper handle", "flashlight.Cropper.BottomLeftHandle", undefined, true),left:P-15,src:G,top:T-15})]}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{top:k-2,left:x-2,border:r?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:v+4,position:"absolute",rounding:2,width:b+4})]})}var X=l(665992);function J({auxData:e,onClick:a,shouldLogDotRender:l,showNoHalo:n,style:i,viewParameter:t,x:r,y:s}){let o=(0,p.ZP)(),d=(0,U.Z)();return(0,E.Z)(()=>{l&&d({aux_data:e,element:1221,event_type:120,view_parameter:t,view_type:72})}),(0,M.jsx)("div",{"aria-label":o.bt("    ", "Select a specific item on image", "dot.accessibilityLabel", undefined, true),"data-test-id":"dot",onClick:a,onKeyPress:a,role:"button",style:{position:"absolute",top:s-16,left:r-16,outline:"none",...i},tabIndex:"0",children:(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:n?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:a?"pointer":"default"}},children:(0,M.jsx)(u.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var ee=l(934980);let ea="flashlightDotPop",el=(0,ee.Ll)([`
  ${ea} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),en=e=>{let a=parseFloat((.1*e).toFixed(2));return{animation:`${ea} 0.3s ease-out ${a}s both`}};function ei({closeupImageTop:e,imageHeight:a,imageTop:l,imageWidth:n,onDotTap:i,pinId:t,pinImageSignature:r,setCropArea:s,shouldLogDotRender:d,showNoHalo:u,viewParameter:c,visualObjects:g,visualObjectToHide:p}){let m=(0,U.Z)();return(0,M.jsxs)(o.Fragment,{children:[(0,M.jsx)(b.Z,{unsafeCSS:el}),g.map((o,h)=>{if(h===p)return null;let{x:_=0,y=0,w:f=0,h:S=0}=o,k={x:_,y,h:S,w:f},x=(0,X.Z)({cropArea:{x:_,y,w:f,h:S},scaledWidth:n,scaledHeight:a}),v=Math.floor(x.x+x.w/2),b=Math.floor(x.y+l+x.h/2),P=en(h),T={pin_id:t,image_signature:r,visual_objects:JSON.stringify([k]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,M.jsx)(J,{auxData:T,onClick:function(){m({aux_data:T,element:1221,event_type:102,view_parameter:c,view_type:72}),i({cropArea:k,cropSource:4,visualObjects:g}),s?.(k)},shouldLogDotRender:d,showNoHalo:u,style:P,viewParameter:c,x:v,y:b-e},JSON.stringify(k))})]})}var et=l(696724);let er={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function es({closeupImageUrl:e,closeupImageDims:a,cropArea:l,handleBackClick:n,handleChangeCloseupImageTop:i,handleCropperChange:t,headerHeight:r,inUnifiedFeedExp:s,pinDominantColor:d,pinId:c,pinImageSignature:g,showBackButton:p,viewParameter:m,visualObjects:h,visualObjectToHide:_}){let y=(0,U.Z)(),f=(0,o.useRef)(),[S,k]=(0,o.useState)(0),[x,v]=(0,o.useState)(0),[b,P]=(0,o.useState)(er.NONE),[T,w]=(0,o.useState)(l),{current:F}=(0,z.Z)(),{x:I,y:E,w:A,h:L}=T,{closeupImageTop:C,closeupImageMinTop:K,closeupImageWidth:R,closeupImageHeight:D,minCropperWidthRatio:j,minCropperHeightRatio:O}=a,N=r||0,Z=(e,a)=>{let l=a-C,n=e-(f.current?f.current.getBoundingClientRect().left:0),i=D*E,t=D*(E+L),r=R*I,s=R*(A+I);if(l>i+12&&l<t-12&&n>r+12&&n<s-12)return er.INSIDE;if(n<=r+12&&n>=r-12&&l>=i+15&&l<=t-15)return er.LEFT_CROPPER;if(n<=s+12&&n>=s-12&&l>=i+15&&l<=t-15)return er.RIGHT_CROPPER;if(n<=s-15&&n>=r+15&&l>=i-12&&l<=i+12)return er.TOP_CROPPER;if(n<=s-15&&n>=r+15&&l>=t-12&&l<=t+12)return er.BOTTOM_CROPPER;if(n<=r-9+24&&n>=r-12&&l>=i-12&&l<=i+24-9)return er.TOP_LEFT_HANDLE;if(n<=s+12&&n>=s-15&&l>=i-12&&l<=i+24-9)return er.TOP_RIGHT_HANDLE;else if(n<=r-9+24&&n>=r-12&&l>=t-15&&l<=t+12)return er.BOTTOM_LEFT_HANDLE;else if(n<=s+12&&n>=s-15&&l>=t-15&&l<=t+12)return er.BOTTOM_RIGHT_HANDLE;else return er.OUTSIDE};return(0,M.jsx)(u.kC,{justifyContent:"center",width:"100vw",children:(0,M.jsxs)(u.xu,{ref:f,dangerouslySetInlineStyle:{__style:{top:C,touchAction:"none"}},maxWidth:et.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,M.jsx)(q,{closeupImageDims:a,closeupImageUrl:e,cropArea:T,handleBackClick:n,onTouchEnd:()=>{[er.NONE,er.OUTSIDE].includes(b)||(y({event_type:b===er.INSIDE?7603:7604,view_parameter:m,view_type:72}),t({cropArea:T,cropSource:6,visualObjects:h}))},onTouchMove:e=>{let{clientX:a,clientY:l}=e.touches[0];if(k(a),v(l),b===er.NONE&&P(Z(a,l)),null!=j&&null!=O&&null!=K){let e=l-x,n=(a-S)/R,t=e/D,r=Math.min(I+A-j,Math.max(0,I+n)),s=A+(I-r),o=Math.min(E+L-O,Math.max(0,E+t)),d=L+(E-o),u=Math.min(1-I,Math.max(j,A+n)),c=Math.min(1-E,Math.max(O,L+t));switch(b){case er.OUTSIDE:i(Math.floor(Math.max(K,Math.min(N,C+e))));break;case er.INSIDE:w(e=>({...e,x:Math.max(0,Math.min(1-A,I+n)),y:Math.max(0,Math.min(1-L,E+t))}));break;case er.LEFT_CROPPER:w(e=>({...e,x:r,w:s}));break;case er.RIGHT_CROPPER:w(e=>({...e,w:u}));break;case er.TOP_CROPPER:w(e=>({...e,y:o,h:d}));break;case er.BOTTOM_CROPPER:w(e=>({...e,h:c}));break;case er.TOP_LEFT_HANDLE:w({x:r,w:s,y:o,h:d});break;case er.TOP_RIGHT_HANDLE:w(e=>({...e,w:u,y:o,h:d}));break;case er.BOTTOM_LEFT_HANDLE:w(e=>({...e,h:c,x:r,w:s}));break;case er.BOTTOM_RIGHT_HANDLE:w(e=>({...e,h:c,w:u}))}}},onTouchStart:e=>{let{clientX:a,clientY:l}=e.touches[0];k(a),v(l),P(er.NONE)},pinDominantColor:d,showBackButton:p,viewParameter:m}),!!h.length&&0!==D&&0!==R&&(0,M.jsx)(u.xu,{"data-test-id":"FlashlightDots",children:(0,M.jsx)(ei,{closeupImageTop:C,imageHeight:D,imageTop:C,imageWidth:R,onDotTap:t,pinId:c,pinImageSignature:g,setCropArea:w,shouldLogDotRender:!F,showNoHalo:s,viewParameter:m,visualObjects:h,visualObjectToHide:_})})]})})}var eo=l(732988),ed=l(682661);let eu=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var ec=l(275686),eg=l(677596),ep=l(124747),em=l(785220),eh=l(887279),e_=l(635284),ey=l(730212),ef=l(272109),eS=l(1006),ek=l(154785),ex=l(441662);function ev(e,a,l){var n;return(a="symbol"==typeof(n=function(e,a){if("object"!=typeof e||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var n=l.call(e,a||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?n:String(n))in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}let eb={baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}},eP={NONE:0,UP:1,DOWN:2};class eT extends o.Component{constructor(...e){super(...e),ev(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:eP.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),ev(this,"onTouchStart",e=>{let{clientY:a}=e.touches[0];this.setState({startY:a,shouldAnimate:!1,scrollDirection:eP.NONE})}),ev(this,"onTouchMove",e=>{let{clientY:a}=e.touches[0],{startY:l,currentDistanceFromTop:n}=this.state,{canMoveModal:i,maxDistanceFromTop:t}=this.props,r=a-l;i&&void 0!==t&&(r>0&&n>=0&&n<t&&window.scrollY<=0||r<0&&n<=t&&n>=0)&&this.setModalPosition(a)}),ev(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:a,canMoveModal:l}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===eP.DOWN?(this.header&&e_.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,eS.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===eP.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:l,currentDistanceFromTop:a||0,shouldAnimate:!0,isAtTop:!0}),this.header&&e_.Z.addObstruction("top",this.header),e&&(0,eS.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),ev(this,"handleHandleMove",e=>{let{clientY:a}=e.touches[0],{canMoveModal:l,maxDistanceFromTop:n,minDistanceFromTop:i}=this.props,{startY:t,currentDistanceFromTop:r}=this.state;l&&r<=(i||0)&&a-t>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:n,isAtTop:!1,scrollDirection:eP.NONE,shouldAnimate:!0,startY:0}))}),ev(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:a,entryPoint:l,canMoveModal:n}=this.props,{currentDistanceFromTop:i,scrollDirection:t}=this.state;t===eP.NONE&&(i===e?(this.setState({canScrollOnChildren:n,currentDistanceFromTop:a||0,shouldAnimate:!0,isAtTop:!0}),(0,eS.My)(`mweb.${l}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,eS.My)(`mweb.${l}.sliding_modal.header_touch.snap_to_bottom`)))}),ev(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:a}=this.state,{onDismiss:l,logContextEvent:n,maxDistanceFromTop:i,viewParameter:t,viewType:r}=this.props;e.stopPropagation(),l&&(n({aux_data:{commerce_data:JSON.stringify({snapped_top:0===a})},element:75,event_type:102,view_parameter:t,view_type:r}),this.setState({currentDistanceFromTop:i,startY:0,scrollDirection:eP.NONE},()=>l(e)))}),ev(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:a,shouldAnimate:l,canScrollOnChildren:n}=this.state,{baseStyles:i}=eb;return{...i,animation:"modalReveal 0.3s ease-out both",position:n?"absolute":"fixed",top:a>-1?a:void 0,bottom:0,width:"100vw",...e&&l?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),ev(this,"setModalPosition",e=>{let{startY:a,currentDistanceFromTop:l}=this.state,{maxDistanceFromTop:n,snapToEndThreshold:i,entryPoint:t}=this.props;if(n){let r=e-a,s=Math.floor("CloseupShop"===t||"CloseUpMainPinDrawer"===t?Math.max(0,l+r):Math.min(n,Math.max(0,l+r))),o=eP.NONE;if(void 0!==i&&i>=0){let e=Math.floor(i*n),a=Math.floor((1-i)*n);r<0?o=s>a?eP.DOWN:eP.UP:r>0&&(o=s>e?eP.DOWN:eP.UP)}this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:o})}})}componentDidMount(){let{isOpen:e}=this.props;e&&e_.Z.pause()}componentDidUpdate(e,a){let{domainFilters:l,priceFilters:n,cropSource:i,isOpen:t,logContextEvent:r,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:o,minDistanceFromTop:d,entryPoint:u}=this.props,{currentDistanceFromTop:c}=this.state;t&&!e.isOpen?e_.Z.pause():!t&&e.isOpen&&e_.Z.resume(),"CloseUpMainPinDrawer"===u&&s<e.maxDistanceFromTop&&c>s&&this.handleHeaderTouch(),a.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&c===(d||0)&&o&&o(!0),l&&n&&(!(0,em.ZP)(l,e.domainFilters)||!(0,em.ZP)(n,e.priceFilters))&&r({event_type:13,view_parameter:"related_products"===(0,ex.Z)(i)?3455:3456,view_type:72,element:11735})}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&e_.Z.removeObstruction("top",this.header),e&&e_.Z.resume()}render(){let{children:e,headerChildren:a,heading:l,inUnifiedFeedExp:n,isOpen:i,isRTL:t,mobileAccessibilityCloseIconLabel:r,mobileHideCloseIcon:s,noDivider:o,showHandle:d}=this.props,{headerHeight:c,canScrollOnChildren:g}=this.state,p=!g&&n?"32px 32px 0 0":"0";return i?(0,M.jsx)(ef.Z,{children:(0,M.jsx)(u.xu,{"aria-label":l,role:"dialog",children:(0,M.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:p}},onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,M.jsxs)(u.iP,{accessibilityLabel:this.props.i18n.bt("     ", "View all search results", "SlidingModal.Header.a11yLabel", undefined, true),onTap:this.handleHeaderTouch,children:[(0,M.jsxs)(u.Le,{top:c||0,children:[d&&(0,M.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:p}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:eh.Z}),!s&&(0,M.jsxs)(u.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,M.jsxs)(u.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,M.jsx)(u.kC,{alignItems:"center",justifyContent:"start",children:(0,M.jsx)(u.hU,{accessibilityLabel:r||"Close visual search results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,M.jsx)(u.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:a}){let l=a?"marginRight":"marginLeft",n=a?"marginLeft":"marginRight";return e?{[l]:38,[n]:50,marginTop:15,marginBottom:15}:{[l]:-10,[n]:50,marginTop:15,marginBottom:15}}({isRTL:t})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,M.jsx)(u.X6,{accessibilityLevel:2,align:"center",size:"400",children:l})})]}),a||null,!o&&(0,M.jsx)(u.iz,{})]})]}),(0,M.jsx)(u.xu,{overflow:g?"auto":"visible",children:e})]})})})}):null}}function ew(e){let a=(0,p.ZP)(),l=(0,U.Z)(),{isRTL:n}=(0,ey.B)(),i=(0,ek.Z)();return(0,M.jsx)(eT,{...e,i18n:a,isRTL:n,logContextEvent:l,trackInteraction:i})}let eF=`
  html, body {
    overscroll-behavior: none;
  }
`;function eI(){return Math.min(et.g6,window.innerWidth)}function eE(e,a){return Math.floor(eI()/a*e)}function eA(e,a){let l=0,n=0,i=0;if(e&&e.imageSpec_736x){var t,r;let a=e?e.imageSpec_736x:null;l=eI(),n=eE(a?.height??1,a?.width??1),t=a?.height??1,r=a?.width??1,i=Math.min(Math.floor(.6*window.innerHeight),eE(t,r))}return{closeupImageWidth:l,closeupImageHeight:n,closeupImageMinTop:i-n,closeupImageTop:a||0,minCropperWidthRatio:l?50/l:0,minCropperHeightRatio:n?50/n:0,modalTop:i}}function eL(e,a,l,n,i){let t=l?Number(l):.4,r=n?Number(n):.1;return e>0&&a>0&&(l||(t=(a-2*a*.1-i)/e),n||(r=.1*a/e)),{h:t,y:r}}function eC({cropArea:e,cropSource:a,headerHeight:l,inUnifiedFeedExp:n,isShopTheLookFeed:i,pin:t,pinId:r,queryH:c,queryY:g,requestParams:m,searchResourceOptions:h,setCropSource:_,setState:y,state:F,surfaceType:I,visualSearchFlashlightUnifiedResource:L}){let C=(0,p.ZP)(),{logContextEvent:O}=(0,k.v)(),N=(0,f.I0)(),U=(0,d.k6)(),{previous:z}=(0,v.Hv)(),H=(0,d.TH)(),{isAuth:G}=(0,s.Z)(),{width:V}=(0,S.Z)()||{},{onCarouselTouchStart:B,onCarouselTouchMove:W,onCarouselTouchEnd:Y}=function(){let[e,a]=(0,o.useState)(0),[l,n]=(0,o.useState)(0),[i,t]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!1),[d,u]=(0,o.useState)(void 0);function c(){s(!1),t(!1),u(void 0)}function g(e,a){"vertical"!==a&&e.stopPropagation()}return{onCarouselTouchStart:function(e){let{clientX:l,clientY:i}=e.touches[0];a(l),n(i),c()},onCarouselTouchMove:function(a){let{clientX:n,clientY:o}=a.touches[0],c=Math.abs(n-e);Math.abs(o-l)>10&&t(!0),c>10&&s(!0),r&&i?u(e=>e||"vertical"):r?u(e=>e||"horizontal"):i?u(e=>e||"vertical"):u(void 0),g(a,d)},onCarouselTouchEnd:function(e){g(e,d),c()}}}(),$=(t.visualObjects??[]).filter(e=>e.isStela).map(e=>({h:e?.h??void 0,is_stela:e?.isStela??void 0,label_id:e?.labelId??void 0,label_x:e?.labelX??void 0,label_y:e?.labelY??void 0,label:e?.label??void 0,max_annotation_num_documents:e?.maxAnnotationNumDocuments??void 0,score:e?.score??void 0,show_on_closeup:e?.showOnCloseup??void 0,title:e?.title??void 0,w:e?.w??void 0,x:e?.x??void 0,y:e?.y??void 0})),[Q,q]=(0,o.useState)(A($,e)),{isCropAreaOnDotArea:X,dotIndexToHide:J}=Q,ee=e=>N((0,ec.By)(e)),ea=e=>N(eu(e)),{data:el,fetchMore:en,isAtEnd:ei,isFetching:et,isLoaded:er}=L||{},em=el?.results||[],eh=em.find(e=>"story"===e.type),e_=!!eh&&"stl"!==I,ey=em.flatMap(e=>"pin"===e.type?e:[]),{url:ef=`/pin/${r}`,text:eS=""}=eh?.action||{},ek=C.bt(" ", "Shop similar", "mobileFlashlight.productUpsellTitle", undefined, true),ex=C.bt("  ", "Image search", "mobileFlashlight.organicFeedTitle", undefined, true),ev=C.bt(" ", "Shop the look", "mobileFlashlight.shopTheLookFeedTitle", undefined, true),eb=i?ev:ex,eP=C.bt(" ", "Visual search", "Visual search results", undefined, true),eT=n||i,{closeupImageWidth:eI,modalTop:eE}=F.closeupImageDims,eC=t?.imageSpec_736x?.url??"",eK=!V||V-60<eI&&eT,eR=!eK&&eT;function eD(){if(0===z.length){U.replace(`/pin/${r}/`);return}U.goBack()}let ej=(0,o.useMemo)(()=>eA(t,l),[t.entityId,l]);if((0,o.useEffect)(()=>{let{closeupImageHeight:e,modalTop:a=0}=ej,n=eL(e,a,Number(c),Number(g),l||0);y(e=>({...e,closeupImageDims:ej,...n}))},[ej]),(0,E.Z)(()=>{ea(a)}),0===eE)return null;let{auxData:eO,viewType:eN,viewParameter:eM}=function({cropSource:e,inUnifiedFeedExp:a,isCropAreaOnDotArea:l,isProductPage:n,surfaceType:i}){let t=a||"stl"===i,r=4===e||l,s=n?"product":"stl"===i?r?"product":"organic":a&&r?"unified":"organic";return{auxData:(()=>{let e=e=>({commerce_data:JSON.stringify({is_product_only_feed:e})});return"product"===s?e(!0):"unified"===s?e(!1):t?e(!1):void 0})(),viewType:"product"===s?427:72,viewParameter:"organic"===s?3050:3462}}({cropSource:a,inUnifiedFeedExp:n,isCropAreaOnDotArea:X,isProductPage:!1,surfaceType:I});function eZ(){O({component:14339,element:179,event_type:102,view_parameter:eM,view_type:eN})}return(0,M.jsxs)(o.Fragment,{children:[(0,M.jsx)(b.Z,{unsafeCSS:eF}),(0,M.jsx)(R.Z,{auxData:eO,viewParameter:eM,viewType:eN,children:(0,M.jsx)(w.Z,{view:eN,children:(0,M.jsxs)(P.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,M.jsx)(eo.Z,{text:C.bt("   ", "Visual Search Page", "flashlight.accessibilityhiddenheading.fullpage", undefined, true)}),(0,M.jsx)(u.xu,{color:"dark",height:"100vh",width:"100vw"}),(0,M.jsx)(es,{closeupImageDims:F.closeupImageDims,closeupImageUrl:eC,cropArea:e,handleBackClick:eD,handleChangeCloseupImageTop:function(e){y(a=>({...a,closeupImageDims:{...a.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:a,visualObjects:l}){ea(a),ee(r),q(A(l,e)),_(a),y(a=>({...a,...e})),U.replace((0,K.Z)({cropArea:e,cropSource:a,isProductPage:!1,pinId:r,requestParams:m,surfaceType:I}))},headerHeight:l,inUnifiedFeedExp:eT,pinDominantColor:t.dominantColor||"#efefef",pinId:r,pinImageSignature:t.imageSignature,showBackButton:eK,viewParameter:eM,visualObjects:$,visualObjectToHide:J}),eR&&(0,M.jsx)(Z,{handleBackClick:eD,viewParameter:eM,viewType:eN}),(0,M.jsxs)(ew,{canMoveModal:!0,cropSource:a,entryPoint:"flashlight",headerHeight:l,heading:eP,inUnifiedFeedExp:eT,isOpen:!0,location:H,maxDistanceFromTop:eE||0,minDistanceFromTop:G?60:l,mobileAccessibilityCloseIconLabel:C.bt("     ", "Close visual search results", "close visual search results and go back to pin", undefined, true),mobileHideCloseIcon:eT,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eD,pinId:r,shouldSnapToEnds:!0,showHandle:eT,snapToEndThreshold:.3,viewParameter:eM,viewType:eN,children:[(0,M.jsx)(u.$j,{accessibilityLabel:C.bt("     ", "Loading visual search results", "mobileFlashlightPage.loadingSpinner", undefined, true),show:eT&&!er}),eT&&er&&(0,M.jsxs)(o.Fragment,{children:[e_&&(0,M.jsxs)(u.xu,{marginBottom:-6,children:[(0,M.jsxs)(u.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,M.jsx)(u.Tg,{href:ef,onTap:({event:e})=>{e.stopPropagation(),eZ()},tapStyle:"compress",children:(0,M.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:ek})}),(0,M.jsx)(u.I_,{accessibilityLabel:eS||C.bt(" ", "See more", "headerModule.headerModuleActionButton.iconButton", undefined, true),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:ef,icon:"arrow-forward",iconColor:"darkGray",onClick:eZ,size:"sm"})]}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:Y,onTouchMove:W,onTouchStart:B,children:(0,M.jsx)(T.default,{component:14339,disableHeader:!0,story:eh,storyKey:eh?{type:"deprecated",data:eh}:null,surface:"ShoppingDynamicHeightGrid",view:eN,viewParameter:eM,width:V})})]}),(0,M.jsx)(u.xu,{marginBottom:3,paddingX:4,children:(0,M.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:eb})}),(0,M.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},paddingX:x.D6,children:(0,M.jsx)(ep.Z,{feedItems:ey,feedKey:(0,eg.J)("VisualSearchFlashlightUnifiedResource",h)??"",pagination:{loadNext:en||(()=>void 0),hasNext:!ei,isLoadingNext:et||!1,refetch:()=>void 0},renderFeedItem:(e,a)=>(0,M.jsx)(j.cn,{children:(0,M.jsx)(ed.ZP,{auxData:eO,componentType:0,duploQueryRef:null,pinId:e.id??"",slotIndex:a,trackingParams:e.tracking_params||void 0,trafficSource:i?"shop_feed":void 0,viewParameter:eM,viewType:eN})})})})]}),!eT&&(0,M.jsx)(u.xu,{color:"default",paddingX:x.D6,children:(0,M.jsx)(D.ZP,{feedItemProps:{viewParameter:eM,viewType:eN},feedKey:(0,eg.J)("VisualLiveSearchResource",h)??"",resourceConfig:{name:"VisualLiveSearchResource",options:h},trafficSource:"flashlight"})})]})]})})})]})}function eK(e){let{searchResourceOptions:a}=e,l=(0,_.Z)({name:"VisualSearchFlashlightUnifiedResource",options:a});return(0,M.jsx)(eC,{...e,visualSearchFlashlightUnifiedResource:l})}let eR=void 0!==n?n:n=l(149234);function eD({pinKey:e}){let{checkExperiment:a}=(0,m.F)(),l=a("mweb_flashlight_unified_feed").anyEnabled||a("mweb_unified_visual_features_expansion").anyEnabled,n=(0,d.$B)(),{pinId:i}=(0,y.Z)(n.params.id||""),t=(0,d.TH)(),{cropSource:u,x:g,y:p,h,w:_,surfaceType:f,requestParams:S}=(0,I.mB)(t.search),k=f||"flashlight",{isAuth:x}=(0,s.Z)(),v=(0,r.ZP)(),b=!x&&(0,F.x9)(v)||void 0,P=(0,c.Z)(eR,e),[T,w]=(0,o.useState)(()=>{let e=eA(P,b);e.closeupImageTop=0;let{closeupImageHeight:a,modalTop:l=0}=e,n=eL(a,l,Number(h),Number(p),b||0);return{closeupImageDims:e,x:g?Number(g):.1,w:_?Number(_):.8,y:n.y,h:n.h}}),[E,A]=(0,o.useState)(()=>(0,L.Z)(Number(u))||(g&&p&&h&&_?6:5));if(!P)return null;let K={x:T.x,y:T.y,w:T.w,h:T.h},R="stl"===k&&4===E,D=(0,C.Z)({cropSource:E,isProductPage:!1,surfaceType:k}),j={cropArea:K,cropSource:E,headerHeight:b,inUnifiedFeedExp:l,isShopTheLookFeed:R,pin:P,pinId:i,queryH:h,queryY:p,requestParams:S,searchResourceOptions:{pin_id:i,crop:K,crop_source:E,is_shopping:R,entry_source:R?"shopping":"flashlight",entrypoint:D},setCropSource:A,setState:w,state:T,surfaceType:k};return l||R?(0,M.jsx)(eK,{...j}):(0,M.jsx)(eC,{...j})}var ej=l(66560);let eO=void 0!==i?i:i=l(660036),eN=void 0!==t?t:t=l(530118);function eM(){let{checkExperiment:e}=(0,m.F)(),a=(0,d.$B)(),{pinId:l}=(0,y.Z)(a.params.id||""),n=(0,r.HG)(),i=e("auth_mweb_graphql_flashlight_pinResource").anyEnabled||e("unauth_mweb_graphql_flashlight_pinResource").anyEnabled,t=(0,g.Z)({strategy:i?"GRAPHQL":"LEGACY",query:eN,variables:{pinId:l,isDesktop:n},options:{fetchPolicy:"store-or-network"},transformGraphQL:e=>e.v3GetPinQuery?.__typename==="V3GetPin"?e.v3GetPinQuery.data:null,useGetLegacyData:({pinId:e})=>{let{data:a}=(0,_.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),l=(0,ej.S6)()(e);return a??l}}),s=(0,c.Z)(eO,t);return(0,M.jsx)(eD,{pinKey:s})}function eZ(){let e=(0,p.ZP)();return(0,M.jsx)(h.Z,{measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,M.jsx)(o.Suspense,{fallback:(0,M.jsx)(u.$j,{accessibilityLabel:e.bt("    ", "Loading Pin data", "mobileFlashlightPage.loadingPinData", undefined, true),show:!0}),children:(0,M.jsx)(eM,{})})})}var eU=l(809079),ez=l(132245);let eH=function(){let e=(0,r.HG)(),a=(0,s.Z)();return e?a.isAuth?(0,M.jsx)(ez.Z,{}):(0,M.jsx)(eU.Z,{}):(0,M.jsx)(eZ,{})}},974556:(e,a,l)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/pin/[id]/visual-search",function(){return l(866106).Z}])},585913:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},913574:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},49808:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},957435:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"}},e=>{var a=a=>e(e.s=a);e.O(0,[97270,83119,15787,76594,89820,50289,5710,57173,84091,9073,32859,90917,60718,81507,61484,84555,84659,76949,99641,62515,58331,77596,98170],()=>a(974556)),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search.bg_BG-f4584e862492d490.mjs.map